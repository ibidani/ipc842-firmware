(function(){(function(){var k=Page.cameraConfig={Tab:[],init:function(){k.Tab.Conditions.init();k.Tab.config.init();if(g_isHasFocus||g_isABFFunction){$("camera_autoFocus_label").setStyle("display","");if(g_isABFFunction&&($("camera_ABF").setStyle("display","none"),$("camera_autoFocus_label").set("text",tl("W_focus")),$("camera_restoryAll")))$("camera_restoryAll").dispose(),$("camera_ABFRestartAll").innerHTML='<a href="javascript:;" class="ui-button" id="camera_restoryAll">'+tl("w_restoryAll")+"</a>";
k.Tab.autoFocus.init();if(g_isABFFunction)$("camera_autoFocus_label").set("text",tl("W_focus")),$("camera_nearText").style.display="none",$("camera_farText").style.display="none",$("camera_focusText").style.display="none"}k.translate();k.bind();k.render()},translate:function(){$("camera_camara_label").set("text",tl("w_Camera Attribute"));$("camera_configmanage_label").set("text",tl("w_configManage"));$("camera_help").set("title",tl("w_help"))},render:function(){$$(".camera_tab_title.ui-tab-current").fireEvent("click")},
bind:function(){$$(".camera_tab_title").addEvent("click",k._onTabTitleClick);$("camera_help").addEvent("click",function(){openHelp("cameraConfig.htm")})},_onTabTitleClick:function(){$("video1").setStyles({top:"0px",left:"0px"});k._onTabTitleClickHandle.delay(20,this)},_onTabTitleClickHandle:function(){var q=this.getProperty("data-for");$$(".camera_tab_title").removeClass("ui-tab-current");$$(".camera_tab_con").setStyle("display","none");this.addClass("ui-tab-current");$("camera_tab_"+q).setStyle("display",
"block");k.Tab[q].render()}}})();(function(){var k=[],q=[],e=null,p=null,l=null,B=null,f=null,d=null,m=null,K=null,s=["1/50","1/100","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/25","1/12","1/6","1/3","1/10","1/5","1/4"],w=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],x=[20,10,4,2,1,0.5,0.25,0.1,40,80,166.67,300,100,200,250],y=["1/60","1/120","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/30","1/15","1/8","1/4","1/12","1/6"],z=[1,2,3,4,5,6,7,8,9,10,11,12,13,14],u=[16.67,8.33,4,2,1,0.5,
0.25,0.1,33,66.67,125,250,80,166.67],t=["1/50","1/60","1/100","1/120","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/25","1/30","1/12","1/15","1/6","1/8","1/3","1/4","1/100000","1/10","1/5"],b=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],o=[20,16.67,10,8.33,4,2,1,0.5,0.25,0.1,40,33,80,66.67,166.67,125,300,250,0.01,100,200],r=["1/30000","1/10000","1/4000","1/2000","1/1000","1/500","1/250","1/100","1/50","1/25"],Q=[0.03,0.1,0.25,0.5,1,2,4,10,20,40],M=["1/30000","1/10000","1/4000",
"1/2000","1/1000","1/500","1/250","1/120","1/60","1/30"],R=[0.03,0.1,0.25,0.5,1,2,4,8.33,16.67,33],h=0,za=!0,va=!0,wa=!1,J=0,ia=!1,C=0,D=0,E=0,F=0,ja={},ka={},la={},ma={},na={},N={},U={},V={},I={},W=0,X=0,Y=0,Z=0,aa=0,O=0,oa=0,pa=0,ba=0,G=0,ca={},L=null,S=!0,da={},ea={},qa=0,ra={},sa=null,T=!1,P=0,ta=0,fa=!1,ga=!1,xa={},ha=0,ya=!1,H=null,ua=null,c=Page.cameraConfig.Tab.Conditions={_left:0,_top:0,init:function(){c.reGetVideoInCaps=!1;c.reGetProcessInfo=!1;c.configManager=new ConfigManager;c.magicBox=
new MagicBox;c.videoInput=new VideoInput;if(currenDeviceType.contains("IPC-F728WP")||currenDeviceType.contains("HF3211-I"))$("camera_showFlip").style.display="none";currenDeviceType.contains("IPC-HF5281-I")||!isEnable("is_show_Gamma")?$("camera_line_gammaWrap").setStyle("display","none"):$("camera_line_gammaWrap").setStyle("display","block");c._getProcessInfo();c._sliderInit();c.translate();c.bind();c._getVideoInCaps()},translate:function(){var a=$("camera_config_mode").getElements("option");a[1].setProperty("text",
tl("Daytime"));a[2].setProperty("text",tl("Night"));a[0].setProperty("text",tl("w_Normal"));$("camera_Brightness_label").set("text",tl("w_Brightness"));$("camera_Contrast_label").set("text",tl("w_Contrast"));$("camera_Saturation_label").set("text",tl("w_Saturation"));$("camera_Hue_label").set("text",tl("w_Chroma"));$("camera_EEMode_label").set("text",tl("w_Acutance"));$("camera_AntiFlicker_label").set("text",tl("w_Flicker"));$("camera_ExposureMode_label").set("text",tl("w_Exposure Mode"));$("camera_WhiteBalance_label").set("text",
tl("w_Scene Mode"));$("camera_Exposure_label").set("text",tl("w_KmScope"));$("camera_Gain_label").set("text",tl("w_GainScope"));$("camera_ExposureSpeed_label").set("text",tl("w_Kmregulate"));$("camera_ExposureSlct_label").set("text",tl("w_Kmregulate"));$("camera_redGain_label").set("text",tl("GainRed"));$("camera_blueGain_label").set("text",tl("GainBlue"));$("camera_DayNightColor_label").set("text",tl("DayAndNightMode"));$("camera_backlight_label").set("text",tl("w_BackLight"));$("camera_GainRange_label").set("text",
tl("w_Gainregulate"));$("camera_autoIris_label").set("text",tl("IrisAuto"));$("camera_Mirror_label").set("text",tl("Mirror"));$("camera_flip_label").set("text",tl("w_FlipEx"));$("camera_default").set("text",tl("w_DefaultConfig"));$("camera_refresh").set("text",tl("Cancel"));$("camera_autoIris_enable_label").set("text",tl("w_on"));$("camera_autoIris_disable_label").set("text",tl("w_off"));$("camera_backDefault_label").set("text",tl("Default"));$("camera_backCustom_label").set("text",tl("w_Custom"));
$("camera_Mirror_enable_label").set("text",tl("w_on"));$("camera_Mirror_disable_label").set("text",tl("w_off"));$("camera_AntiFlicker_70_label").set("text",tl("w_outdoor"));$("camera_confirm").set("text",tl("w_Confirm"));$("camera_3DDeNoise_label").set("text",tl("w_3DdepressNoise"));$("camera_3Destimate_label").set("text",tl("w_3DdepressLevel"));$("camera_3Dintension_label").set("text",tl("w_3DdepressNoiseIntension"));$("camera_gamma_label").set("text",tl("w_Gamma"));$("camera_on3D").set("text",tl("w_on"));
$("camera_off3D").set("text",tl("w_off"));$("camera_Sensitivity_label").set("text",tl("w_D&N Sensitivity"));$("camera_Delay_label").set("text",tl("w_D&N Delay"));a=$("camera_Sensitivity").getElements("option");a[0].setProperty("text",tl("w_low"));a[1].setProperty("text",tl("w_Middle"));a[2].setProperty("text",tl("w_high"));$("camera_VideoInDefog_label").set("text",tl("w_DefogMode"));$("camera_UnFocusDetect_label").set("text",tl("w_UnFocusDetect"));$("camera_VideoStabilization_label").set("text",tl("w_ImageStabilization"));
$("camera_VideoStabilization_enable_label").set("text",tl("w_on"));$("camera_VideoStabilization_disable_label").set("text",tl("w_off"));$("camera_UnFocusDetect_enable_label").set("text",tl("w_on"));$("camera_UnFocusDetect_disable_label").set("text",tl("w_off"));a=$("camera_VideoInDefogMode").getElements("option");a[0].setProperty("text",tl("w_close"));a[1].setProperty("text",tl("Auto"));a[2].setProperty("text",tl("w_Manual"));a=$("camera_LightIntensityMode").getElements("option");a[0].setProperty("text",
tl("Auto"));a[1].setProperty("text",tl("w_Manual"));$("camera_SmartIR_label").set("text",tl("w_SmartIR"));$("camera_SmartIR_enable_label").set("text",tl("w_on"));$("camera_SmartIR_disable_label").set("text",tl("w_off"));$("camera_InfraRed_label").set("text",tl("w_InfraRed"));a=$("camera_InfraRed").getElements("option");a[0].setProperty("text",tl("w_Auto"));a[1].setProperty("text",tl("w_off"));$("camera_AutoIrisValue_label").set("text",tl("w_sensitivity"));$("camera_VideoInDefogModeStrong_label").set("text",
tl("w_Intensity"));$("camera_LightIntensityModeStrong_label").set("text",tl("w_Intensity"));$("camera_LightIntensityMode_label").set("text",tl("w_lightIntensityMode"));$("camera_LightGlobal_label").set("text",tl("w_LightGlobal"));a=$("camera_LightGlobal").getElements("option");a[0].setProperty("text",tl("w_on"));a[1].setProperty("text",tl("w_off"))},render:function(){c.reGetProcessInfo&&c._getProcessInfo();c.reGetVideoInCaps&&c._getVideoInCaps();var a=$("camera_showVideo");c._initPage();if(Site.currentPage.is.cameraConfig&&
$("camera_camara_label").hasClass("ui-tab-current"))overlayPlugins("camera_showVideo"),c._left=$("video1").getStyle("left"),c._top=$("video1").getStyle("top"),$("video1").getStyle("width")!=a.getStyle("width")&&$("video1").setStyle("width",a.getStyle("width")),$("ocx")&&$("ocx").SetRegionNum(0),$("ocx")&&$("ocx").SetModuleMode(1),$("ocx")&&$("ocx").ConnectRealVideo(0,1);c.configManager.getConfig(["VideoInOptions","VideoColor","VideoInPreviewOptions","Encode","VideoInDefog","LightGlobal"],function(a){if($("CAMERA")!=
null){if(JSON.decode(a).result){a=JSON.decode(a).params;e=a[0].params.table;l=a[1].params.table;f=a[2].params.table;p=$unlink(e);B=$unlink(l);d=$unlink(f);if(a[4].result)m=a[4].params.table,K=$unlink(m);if(a[5].result)H=a[5].params.table,ua=$unlink(H);c._isCanFilp(a[3].params.table)}c._SliderValueInit();c._hideForK6();c._showPageInit();c._showBackLightInit();c._getCurrentPage();setTimeout(c._restoreTemporaryConfig,500)}})},_restoreTemporaryConfig:function(){if(!Site.currentPage.isLogin){var a=!0;
Site.currentPage.is.cameraConfig&&$("camera_camara_label").hasClass("ui-tab-current")?setTimeout(c._restoreTemporaryConfig,100):(a=!$("camera_configmanage_label").hasClass("ui-tab-current"),c.configManager.restoreTemporaryConfig(["VideoInOptions","VideoColor","VideoInPreviewOptions","VideoInDefog","LightGlobal"],function(){},a))}},_showPageInit:function(){c._putValue()},_initPage:function(){var a=0;if(k[0]){a=k[0];$("camera_Exposure").innerHTML="";$("camera_Exposure").innerHTML='<input id="camera_ExposureValue1" maxlength=5 type="text" class="ui-input fn-width40"/>                    <span class="ui-symbol">~</span> <input id="camera_ExposureValue2" maxlength=5 type="text" class="ui-input fn-width40"/>                    <span class="ui-text fn-marr0">ms(0</span><span class="ui-symbol fn-marr0">~</span><span id="camera_MaxExposureTime" class="ui-text fn-marr0">'+
k[0].MaxExposureTime+'</span><span class="ui-text fn-marr0">)</span>';$("camera_ExposureValue1").addEvent("blur",function(){c._chaValue(this,k[0].MaxExposureTime)});$("camera_ExposureValue2").addEvent("blur",function(){c._chaValue(this,k[0].MaxExposureTime)});$("camera_ExposureSlct").empty();PAL_NTSC=="PAL"?r.each(function(a,c){$("camera_ExposureSlct").options.add(new Option(a,Q[c]))}):M.each(function(a,c){$("camera_ExposureSlct").options.add(new Option(a,R[c]))});$("camera_ExposureSlct").options.add(new Option(tl("w_Custom"),
"Custom"));$("camera_ExposureSlct").addEvent("change",function(){c._changeExposure()});currenDeviceType.contains("3110")&&(PAL_NTSC=="PAL"?(t=["1/50","1/100","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/25","1/12","1/6","1/3","1/100000"],b=[1,2,3,4,5,6,7,8,9,10,11,12,13],o=[20,10,4,2,1,0.5,0.25,0.1,40,80,66.67,166.67,300,0.01]):(t=["1/60","1/120","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/30","1/15","1/8","1/4","1/100000"],b=[1,2,3,4,5,6,7,8,9,10,11,12,13],o=[16.67,8.33,4,
2,1,0.5,0.25,0.1,33,66.67,125,250,0.01]));if(!(a.ExposureMode>>3&1))$("camera_AntiFlicker_50").style.display="none",$("camera_AntiFlicker_50_label").style.display="none";if(!(a.ExposureMode>>4&1))$("camera_AntiFlicker_60").style.display="none",$("camera_AntiFlicker_60_label").style.display="none";$("camera_ExposureMode").innerHTML="";a.ExposureMode&1&&$("camera_ExposureMode").options.add(new Option(tl("w_Automatic"),0));a.ExposureMode>>1&1&&$("camera_ExposureMode").options.add(new Option(tl("w_Gainfirst"),
1));a.ExposureMode>>2&1&&$("camera_ExposureMode").options.add(new Option(tl("w_ExposureTime"),2));a.ExposureMode>>3&1||a.ExposureMode>>4&1?($("camera_showAntiFlicker").style.display="",S=!0):S=!1;$("camera_ExposureMode").options.add(new Option(tl("w_Manual"),4));$("camera_backlight").innerHTML="";$("camera_backlight").options.add(new Option(tl("Close"),0));a.Backlight&&($("camera_backlight").options.add(new Option(tl("w_Backlight"),1)),a.Backlight==1&&$("camera_showBacklightMode").setStyle("display",
"none"));a.WideDynamicRange==1&&$("camera_backlight").options.add(new Option(tl("WideDynamicRange"),2));a.WideDynamicRange==2&&$("camera_backlight").options.add(new Option(tl("w_realWideDynamic"),4));a.GlareInhibition&&$("camera_backlight").options.add(new Option(tl("w_GlareInhibition"),3));$("camera_DayNightColor").innerHTML="";a.DayNightColor?($("camera_DayNightColor").options.add(new Option(tl("Colorful"),0)),$("camera_DayNightColor").options.add(new Option(tl("Automatic"),1)),$("camera_DayNightColor").options.add(new Option(tl("BlackWhite"),
2)),a.DayNightColorIO&&$("camera_DayNightColor").options.add(new Option(tl("w_SensorEnter"),4)),isEnable("is_show_switchByAlarm")&&$("camera_DayNightColor").options.add(new Option(tl("w_Alarm Link"),5))):$("camera_dayNightColor_wrap").style.display="none";a.Mirror?$("camera_showMirror").style.display="block":$("camera_showMirror").style.display="none";$("camera_flip").innerHTML="";if(a.Flip&&a.Rotate90){var g='<select id="camera_select_filp" class="ui-select"><option value="0">'+tl("w_noFlipEx")+
'</option><option value="1">'+tl("w_clockwise90Ex")+'</option><option value="2">'+tl("w_Flip180Ex")+"</option>";isEnable("is_show_rotate2")&&(g+='<option value="3">'+tl("w_clockwise90Ex2")+"</option>");g+="</select>";$("camera_flip").innerHTML=g}else a.Flip&&a.Rotate90==!1?$("camera_flip").innerHTML='<select id="camera_select_filp" class="ui-select"><option value="0">'+tl("w_noFlipEx")+'</option><option value="2">'+tl("w_Flip180Ex")+"</option></select>":a.Flip==!1&&a.Rotate90?$("camera_flip").innerHTML=
'<select id="camera_select_filp" class="ui-select"><option value="0">'+tl("w_noFlipEx")+'</option><option value="1">'+tl("w_clockwise90Ex")+"</option></select>":$("camera_showFlip").style.display="none";$("camera_select_filp")&&$("camera_select_filp").addEvent("change",function(){c._showFilpChange()});a.IrisAuto?$("camera_showAutoIris").style.display="":$("camera_showAutoIris").style.display="none";a.TridimDenoise==2||a.TridimDenoiseDetails==1?(T=!0,$("camera_3DradioDepressNoise").style.display=""):
(T=!1,$("camera_3DradioDepressNoise").style.display="none",$("camera_3DshowEstimate").style.display="none",$("camera_3Dintension").style.display="none");g=a.WhiteBalance;$("camera_whiteBalance").innerHTML="";switch(g){case 1:$("camera_whiteBalance").options.add(new Option(tl("Automatic"),"Auto"));$("camera_whiteBalance").options.add(new Option(tl("w_outdoor"),"Outdoor"));break;case 2:$("camera_whiteBalance").options.add(new Option(tl("Automatic"),"Auto"));$("camera_whiteBalance").options.add(new Option(tl("Sunny"),
"Sunny"));$("camera_whiteBalance").options.add(new Option(tl("Night"),"Night"));$("camera_whiteBalance").options.add(new Option(tl("w_outdoor"),"Outdoor"));break;case 3:$("camera_whiteBalance").options.add(new Option(tl("Automatic"),"Auto")),$("camera_whiteBalance").options.add(new Option(tl("Sunny"),"Sunny")),$("camera_whiteBalance").options.add(new Option(tl("Night"),"Night")),$("camera_whiteBalance").options.add(new Option(tl("w_outdoor"),"Outdoor")),$("camera_whiteBalance").options.add(new Option(tl("Custom"),
"Custom"))}q.Defog&&q.Defog.Support&&$("camera_showVideoInDefog").setStyle("display","");q.ImageStabilization&&q.ImageStabilization.Support&&$("camera_showVideoStabilization").setStyle("display","");a.SmartIRExposure&&$("camera_showSmartIR").setStyle("display","");$("camera_DayNightDelay").empty();for(a=2;a<11;a++)$("camera_DayNightDelay").options.add(new Option(a+" "+tl("w_secondEx"),a));$("camera_remark").style.display="none";if(ya)$("camera_showLightGlobal").style.display="block"}},_SliderValueInit:function(){var a=
e[0],c=l[0][0],b=f[0];W=c.Brightness;X=c.Contrast;Y=c.Saturation;Z=c.Hue;aa=b.DayOptions.EEMode;O=a.Gain},_sliderInit:function(){ra=ea=Slider3Destimate=V=U=I=N=na=ma=la=ka=ja=null;$("camera_showBrightness").setStyle("display","block");$("camera_showContrast").setStyle("display","block");$("camera_showSaturation").setStyle("display","block");$("camera_showEEMode").setStyle("display","block");$("camera_showGainRange").style.display="";$("camera_showRedGain").style.display="";$("camera_showBlueGain").style.display=
"";$("camera_showWDRValue").style.display="";$("camera_3DshowEstimate").style.display="";$("camera_3Dintension").style.display="";G=1;ja=new FineSlider("camera_line_Brightness","camera_icon_Brightness",{steps:100,wheel:!1,onChange:function(a){$("camera_line_Brightness").setProperty("title",a);W=a;$("camera_Brightness_title").setProperty("text",W)},onComplete:function(){c._setBrightness()}},"camera_Brightness_title","camera_add_Brightness","camera_less_Brightness");ka=new FineSlider("camera_line_Contrast",
"camera_icon_Contrast",{steps:100,wheel:!1,onChange:function(a){$("camera_line_Contrast").setProperty("title",a);X=a;$("camera_Contrast_title").setProperty("text",X)},onComplete:function(){c._setContrast()}},"camera_Contrast_title","camera_add_Contrast","camera_less_Contrast");la=new FineSlider("camera_line_Saturation","camera_icon_Saturation",{steps:100,wheel:!1,onChange:function(a){$("camera_line_Saturation").setProperty("title",a);Y=a;$("camera_Saturation_title").setProperty("text",Y)},onComplete:function(){c._setSaturation()}},
"camera_Saturation_title","camera_add_Saturation","camera_less_Saturation");ma=new FineSlider("camera_line_Hue","camera_icon_Hue",{steps:100,wheel:!1,onChange:function(a){$("camera_line_Hue").setProperty("title",a);Z=a;$("camera_Hue_title").setProperty("text",Z)},onComplete:function(){c._setHue()}},"camera_Hue_title","camera_add_Hue","camera_less_Hue");na=new FineSlider("camera_line_EEMode","camera_icon_EEMode",{steps:100,wheel:!1,onChange:function(a){$("camera_line_EEMode").setProperty("title",a);
aa=a;$("camera_EEMode_title").setProperty("text",aa)},onComplete:function(){c._setEEMode()}},"camera_EEMode_title","camera_add_EEMode","camera_less_EEMode");N=new FineSlider("camera_line_Gain","camera_icon_Gain",{steps:100,wheel:!1,onChange:function(a){$("camera_line_Gain").setProperty("title",a);O=a;$("camera_Gain_title").setProperty("text",O)},onComplete:function(){$("camera_Gain_title").setProperty("text",O);c._postGainOnly()}},"camera_Gain_title","camera_add_Gain","camera_less_Gain");I=new FineSlider("camera_line_WDR",
"camera_icon_WDR",{range:[1,100],wheel:!1,onChange:function(a){$("camera_line_WDR").setProperty("title",a);ba=a;$("camera_WDR_title").setProperty("text",ba)},onComplete:function(){c._postBackValue()}},"camera_WDR_title","camera_add_WDR","camera_less_WDR");U=new FineSlider("camera_line_redGain","camera_icon_redGain",{steps:100,wheel:!1,onChange:function(a){$("camera_line_redGain").setProperty("title",a);oa=a;$("camera_redGain_title").setProperty("text",oa)},onComplete:function(){G==0&&setTimeout(c._post,
0)}},"camera_redGain_title","camera_add_redGain","camera_less_redGain");V=new FineSlider("camera_line_blueGain","camera_icon_blueGain",{steps:100,wheel:!1,onChange:function(a){$("camera_line_blueGain").setProperty("title",a);pa=a;$("camera_blueGain_title").setProperty("text",pa)},onComplete:function(){G==0&&setTimeout(c._post,0)}},"camera_blueGain_title","camera_add_blueGain","camera_less_blueGain");da=new FineSlider("camera_line_3Destimate","camera_icon_3Destimate",{range:[1,100],wheel:!1,onChange:function(a){$("camera_line_3Destimate").setProperty("title",
a);P=a;$("camera_3Destimate_title").setProperty("text",P)},onComplete:function(){c._post()}},"camera_3Destimate_title","camera_add_3Destimate","camera_less_3Destimate");ea=new FineSlider("camera_line_3Dintension","camear_icon_3Dintension",{range:[1,100],wheel:!1,onChange:function(a){$("camera_line_3Dintension").setProperty("title",a);ta=a;$("camera_3Dintension_title").setProperty("text",ta)},onComplete:function(){c._post()}},"camera_3Dintension_title","camera_add_3Dintension","camera_less_3Dintension");
xa=new FineSlider("camera_line_gamma","camera_icon_gamma",{steps:100,wheel:!1,onChange:function(a){$("camera_line_gamma").setProperty("title",a);ha=a;$("camera_gamma_title").setProperty("text",ha)},onComplete:function(){c._postGammaValue()}},"camera_gamma_title","camera_add_gamma","camera_less_gamma");new FineSlider("camera_line_UnFocusDetect","camera_icon_UnFocusDetect",{steps:100,wheel:!1,onChange:function(a){$("camera_line_UnFocusDetect").setProperty("title",a);qa=a;$("camera_UnFocusDetect_title").setProperty("text",
qa)},onComplete:function(){c._postUnFocusDetectValue()}},"camera_UnFocusDetect_title","camera_add_UnFocusDetect","camera_less_UnFocusDetect");ra=new FineSlider("camera_line_AutoIris","camera_icon_AutoIris",{steps:100,wheel:!1,onChange:function(a){$("camera_line_AutoIris").setProperty("title",a);sa=a;$("camera_AutoIris_title").setProperty("text",sa)},onComplete:function(){c._postAutoIrisValue()}},"camera_AutoIris_title","camera_add_AutoIris","camera_less_AutoIris");G=0},_postGammaValue:function(){if(G!=
1){var a=f[0].DayOptions;if(1==h)a=f[0].NightOptions;else if(2==h)a=f[0].NormalOptions;a.GammaAuto=0;a.GammaMode=ha;a.Snapshot.GammaAuto=0;a.Snapshot.GammaMode=ha;c.configManager.setTemporaryConfig("VideoInPreviewOptions",f,c._postresult)}},_postAutoIrisValue:function(){if(G!=1){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;a.IrisAutoSensitivity=sa-0;c.configManager.setTemporaryConfig("VideoInOptions",e,c._postresult)}},_resetBackMode:function(){var a;if(k[0])a=k[0],$("camera_backlight").innerHTML=
"",$("camera_backlight").options.add(new Option(tl("Close"),0)),a.Backlight&&$("camera_backlight").options.add(new Option(tl("w_Backlight"),1)),a.WideDynamicRange==1&&$("camera_backlight").options.add(new Option(tl("WideDynamicRange"),2)),a.WideDynamicRange==2&&$("camera_backlight").options.add(new Option(tl("w_realWideDynamic"),4)),a.GlareInhibition&&$("camera_backlight").options.add(new Option(tl("w_GlareInhibition"),3))},_checkAntiflicker:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==
h)a=e[0].NormalOptions;a.AntiFlicker==0&&$("camera_AntiFlicker_70").checked||a.AntiFlicker==1&&$("camera_AntiFlicker_50").checked||a.AntiFlicker==2&&$("camera_AntiFlicker_60").checked||(c._setDefaultExposure(),c._resetExposure(),c._resetBackMode(),c._selectBackMode(),c._post())},_hideForK6:function(){if(bool_k6)$("camera_showExposureMode").style.display="none",$("camera_showExposure").style.display="none",$("camera_showGain").style.display="none",$("camera_showAntiFlicker").style.display="none",$("camera_showExposureSpeed").style.display=
"none",$("camera_showGainRange").style.display="none",$("camera_showBacklight").style.display="none",$("camera_showBacklightMode").style.display="none",$("camera_showWDR").style.display="none",$("camera_showWDRValue").style.display="none"},_showBackLightInit:function(){$("camera_backlight").value==1&&$("camera_backlightCustom").checked?($("camera_btn_backlight").className="camera-draw-icon-on",c._drawBackline(!0),$("camera_backlightCustom").customChecked=!0):($("camera_btn_backlight").className="camera-draw-icon-off",
c._drawBackline(!1),$("camera_backlightCustom").customChecked=!1)},_putValue:function(){var a=e[0],g=l[0][0],n=f[0],j=k[0];ca.start=chk10(a.NightOptions.SunriseHour)+":"+chk10(a.NightOptions.SunriseMinute);ca.end=chk10(a.NightOptions.SunsetHour)+":"+chk10(a.NightOptions.SunsetMinute);0==h?n=f[0].DayOptions:1==h?(a=a.NightOptions,g=l[0][1],n=f[0].NightOptions):(a=a.NormalOptions,g=l[0][2],n=f[0].NormalOptions);var d=k[0].Exposure;if(a.AntiFlicker==1){if(c._EmpRayDisplay(),a.ExposureSpeed){$("camera_ExposureMode").value=
4;$("camera_ExposureSpeed").innerHTML="";var A=[],r=[];if(a.WideDynamicRange!=0&&k[0].WideDynamicRange==2){var v=s.slice(1,8),j=w.slice(1,8),r=x.slice(1,8);v.push("1/30000");r.push(0.03);c._sortArray(v,j,r);for(j=0;j<v.length;j++)$("camera_ExposureSpeed").options.add(new Option(v[j],r[j]))}else{j=s.slice(0,d-1);v=w.slice(0,d-1);A=x.slice(0,d-1);c._sortArray(j,v,A);c._filterArray(j,v,1,A);for(i=0;i<j.length;i++)$("camera_ExposureSpeed").options.add(new Option(j[i],A[i]))}a.ExposureSpeed=2*d;a.ExposureValue2==
a.ExposureValue1&&(A.contains(a.ExposureValue2)||r.contains(a.ExposureValue2))?$("camera_ExposureSpeed").value=a.ExposureValue2:$("camera_ExposureSpeed").selectedIndex=0}}else if(a.AntiFlicker==2){if(c._EmpRayDisplay(),a.ExposureSpeed){$("camera_ExposureMode").value=4;$("camera_ExposureSpeed").innerHTML="";A=[];r=[];if(j.WideDynamicRange==2&&a.WideDynamicRange!=0&&k[0].WideDynamicRange==2){v=y.slice(1,8);j=z.slice(1,8);A=u.slice(1,8);v.push("1/30000");A.push(0.03);c._sortArray(v,j,A);for(j=0;j<v.length;j++)$("camera_ExposureSpeed").options.add(new Option(v[j],
A[j]))}else{j=y.slice(0,d-1);v=z.slice(0,d-1);r=u.slice(0,d-1);c._sortArray(j,v,r);c._filterArray(j,v,0,r);for(i=0;i<j.length;i++)$("camera_ExposureSpeed").options.add(new Option(j[i],r[i]))}a.ExposureSpeed=2*d;a.ExposureValue2==a.ExposureValue1&&(A.contains(a.ExposureValue2)||r.contains(a.ExposureValue2))?$("camera_ExposureSpeed").value=a.ExposureValue2:$("camera_ExposureSpeed").selectedIndex=0}}else if(a.AntiFlicker==0&&(c._EmpRayDisplay(),a.ExposureSpeed)){$("camera_ExposureMode").value=4;$("camera_ExposureSpeed").innerHTML=
"";r=[];A=[];if(currenDeviceType.contains("3110")){j=t.slice(0,d-1);v=b.slice(0,d-1);r=o.slice(0,d-1);j.push("1/30000");r.push(0.03);c._sortArray(j,v,r);for(i=0;i<j.length;i++)$("camera_ExposureSpeed").options.add(new Option(j[i],r[i]))}else{if(a.WideDynamicRange!=0&&k[0].WideDynamicRange==2){v=t.slice(2,10);j=b.slice(2,10);A=o.slice(2,10);v.push("1/30000");A.push(0.03);c._sortArray(v,j,A);for(j=0;j<v.length;j++)$("camera_ExposureSpeed").options.add(new Option(v[j],A[j]))}else{j=y.slice(0,d-1);r=
s.slice(0,d-1);j.combine(r);r=j.length;if((fa||ga)&&d>14)r=j.length+1;j=t.slice(0,r);v=b.slice(0,r);r=o.slice(0,r);j.push("1/30000");r.push(0.03);c._sortArray(j,v,r);for(i=0;i<j.length;i++)$("camera_ExposureSpeed").options.add(new Option(j[i],r[i]))}$("camera_ExposureSpeed").options.add(new Option(tl("w_CostomDifsec"),"Custom"))}a.ExposureSpeed=2*d;a.ExposureValue2==a.ExposureValue1&&(r.contains(a.ExposureValue2)||A.contains(a.ExposureValue2))?($("camera_ExposureSpeed").value=a.ExposureValue2,$("camera_showExposure").style.display=
"none"):($("camera_ExposureSpeed").value="Custom",$("camera_showExposure").style.display="")}$("camera_ExposureValue1").value=a.ExposureValue1;$("camera_ExposureValue2").value=a.ExposureValue2;$("camera_GainMin").value=a.GainMin;$("camera_GainMax").value=a.GainMax;$("camera_DayNightColor").value=a.DayNightColor;$("camera_ExposureMode").value=a.ExposureMode;a.SmartIRExposure?$("camera_SmartIR_enable").checked=!0:$("camera_SmartIR_disable").checked=!0;a.InfraRed?$("camera_InfraRed").value="false":$("camera_InfraRed").value=
"true";c._EmpModeDisplay();$("camera_whiteBalance").value=a.WhiteBalance;a.WhiteBalance=="Custom"&&(U.set(a.GainRed),V.set(a.GainBlue));a.Mirror?$("camera_Mirror_enable").checked=!0:$("camera_Mirror_disable").checked=!0;c._resetBackMode();c._selectBackMode();c._BackModeDisplay();d=!1;g_isHasfisheye&&e[0].FishEye&&e[0].FishEye.CalibrateMode!="Original"&&(d=!0);$("camera_backlightCustom").disabled=d;a.IrisAuto?$("camera_autoIris_enable").checked=!0:$("camera_autoIris_disable").checked=!0;ja.set(g.Brightness);
ka.set(g.Contrast);la.set(g.Saturation);ma.set(g.Hue);na.set(n.EEMode);N.set(a.Gain);a.IrisAutoSensitivity!==void 0&&ra.set(a.IrisAutoSensitivity);($("camera_ExposureMode").value==1||$("camera_ExposureMode").value==2)&&N.set(a.GainMax);c._selectScrene();c._showfilpChangeEx();if(T)n.TridimDenoise==1?($("camera_3DRDeNoiseOn").checked=!0,$("camera_3DshowEstimate").style.display=""):($("camera_3DRDeNoiseOff").checked=!0,da.set(0),ea.set(0),n.TridimEstimation=0,n.TridimIntensity=0,$("camera_3DshowEstimate").style.display=
"none"),$("camera_3Dintension").style.display="none",n.TridimEstimation!=0&&da.set(n.TridimEstimation),n.TridimEstimation!=0&&ea.set(n.TridimIntensity);xa.set(n.GammaMode);$("camera_Sensitivity").value=a.DayNightSensitivity;$("camera_DayNightDelay").value=a.DayNightSwitchDelay;c._displayDayNight();if(m)a=null,a=1==h?m[0][2]:2==h?m[0][0]:m[0][1],$("camera_VideoInDefogMode").value=a.Mode,$("camera_LightIntensityMode").value=a.LightIntensityMode,a.Mode=="Manul"?($("camera_ShowVideoInDefogModeWrap").setStyle("display",
""),$("camera_showLightIntensityMode").setStyle("display",""),$("camera_VideoInDefogModeStrong").value=a.Intensity,a.LightIntensityMode=="Manul"?$("camera_ShowLightIntensityModeStrongWrap").setStyle("display",""):$("camera_ShowLightIntensityModeStrongWrap").setStyle("display","none")):($("camera_ShowVideoInDefogModeWrap").setStyle("display","none"),$("camera_showLightIntensityMode").setStyle("display","none"),$("camera_ShowLightIntensityModeStrongWrap").setStyle("display","none")),$("camera_LightIntensityModeStrong").value=
a.LightIntensityLevel;n.ImageStabilizationEnable?$("camera_VideoStabilization_enable").checked=!0:$("camera_VideoStabilization_disable").checked=!0;if(H)$("camera_LightGlobal").value=H[0].Enable-0},_limitExposure:function(a){a==0?($("camera_ExposureValue1").removeEvents("blur"),$("camera_ExposureValue1").addEvent("blur",function(){c._chaValue(this,k[0].MaxExposureTime)}),$("camera_ExposureValue2").removeEvents("blur"),$("camera_ExposureValue2").addEvent("blur",function(){c._chaValue(this,k[0].MaxExposureTime)}),
$("camera_MaxExposureTime").innerHTML=k[0].MaxExposureTime):($("camera_ExposureValue1").removeEvents("blur"),$("camera_ExposureValue2").removeEvents("blur"),PAL_NTSC=="PAL"?($("camera_ExposureValue1").addEvent("blur",function(){c._chaValue(this,40)}),$("camera_ExposureValue2").addEvent("blur",function(){c._chaValue(this,40)}),$("camera_MaxExposureTime").innerHTML=40):($("camera_ExposureValue1").addEvent("blur",function(){c._chaValue(this,33)}),$("camera_ExposureValue2").addEvent("blur",function(){c._chaValue(this,
33)}),$("camera_MaxExposureTime").innerHTML=33))},_resetExposure:function(){var a=e[0],g=k[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;var n=k[0].Exposure;if($("camera_AntiFlicker_50").checked){var j=$("camera_ExposureMode").value-0;$("camera_ExposureMode").innerHTML="";g.ExposureMode&1&&($("camera_ExposureMode").options.add(new Option(tl("w_Automatic"),0)),$("camera_ExposureMode").options.add(new Option(tl("w_Manual"),4)));$("camera_ExposureSpeed").innerHTML="";if($("camera_backlight").value==
4&&k[0].WideDynamicRange==2){var d=s.slice(1,8),g=w.slice(1,8),f=x.slice(1,8);d.push("1/30000");f.push(0.03);c._sortArray(d,g,f)}else d=s.slice(0,n-1),g=w.slice(0,n-1),f=x.slice(0,n-1),c._sortArray(d,g,f),c._filterArray(d,g,1,f);for(g=0;g<d.length;g++)$("camera_ExposureSpeed").options.add(new Option(d[g],f[g]));$("camera_showGain").style.display="none";$("camera_showExposureSpeed").style.display="none";$("camera_showGainRange").style.display="none";$("camera_showExposure").style.display="none";$("camera_showExposureSlct").style.display=
"none";if(j!=4)a.ExposureMode=0,a.ExposureSpeed=0;else if(j==4){$("camera_ExposureMode").value=j;$("camera_showExposureSpeed").style.display="";$("camera_showGain").style.display="";j=!1;d=$("camera_ExposureSpeed").options.length;for(g=0;g<d;g++)if($("camera_ExposureSpeed").options[g].value=="10"){j=!0;break}j?$("camera_ExposureSpeed").value=10:(j=(d/2).toInt(),$("camera_ExposureSpeed").selectedIndex=j);a.ExposureSpeed=2*n}}else if($("camera_AntiFlicker_60").checked){j=$("camera_ExposureMode").value;
$("camera_ExposureMode").innerHTML="";g.ExposureMode&1&&($("camera_ExposureMode").options.add(new Option(tl("w_Automatic"),0)),$("camera_ExposureMode").options.add(new Option(tl("w_Manual"),4)));$("camera_ExposureSpeed").innerHTML="";$("camera_backlight").value==4&&k[0].WideDynamicRange==2?(d=y.slice(1,8),g=z.slice(1,8),f=u.slice(1,8),d.push("1/30000"),f.push(0.03),c._sortArray(d,g,f)):(d=y.slice(0,n-1),g=z.slice(0,n-1),f=u.slice(0,n-1),c._sortArray(d,g,f),c._filterArray(d,g,0,f));for(g=0;g<d.length;g++)$("camera_ExposureSpeed").options.add(new Option(d[g],
f[g]));$("camera_showGain").style.display="none";$("camera_showExposureSpeed").style.display="none";$("camera_showGainRange").style.display="none";$("camera_showExposure").style.display="none";$("camera_showExposureSlct").style.display="none";if(j!=4)a.ExposureMode=0,a.ExposureSpeed=0;else{$("camera_ExposureMode").value=j;$("camera_showExposureSpeed").style.display="";$("camera_showGain").style.display="";j=!1;d=$("camera_ExposureSpeed").options.length;for(g=0;g<d;g++)if($("camera_ExposureSpeed").options[g].value==
8.33){j=!0;break}j?$("camera_ExposureSpeed").value=8.33:(j=(d/2).toInt(),$("camera_ExposureSpeed").selectedIndex=j);a.ExposureSpeed=2*n}}else{j=$("camera_ExposureMode").value;$("camera_ExposureMode").innerHTML="";g.ExposureMode&1&&$("camera_ExposureMode").options.add(new Option(tl("w_Automatic"),0));g.ExposureMode>>1&1&&$("camera_backlight").value!=4&&$("camera_ExposureMode").options.add(new Option(tl("w_Gainfirst"),1));g.ExposureMode>>2&1&&$("camera_ExposureMode").options.add(new Option(tl("w_ExposureTime"),
2));$("camera_ExposureMode").options.add(new Option(tl("w_Manual"),4));$("camera_ExposureSpeed").innerHTML="";if(currenDeviceType.contains("3110")){f=t.slice(0,n-1);g=b.slice(0,n-1);n=o.slice(0,n-1);f.push("1/30000");n.push(0.03);c._sortArray(f,g,n);for(g=0;g<f.length;g++)$("camera_ExposureSpeed").options.add(new Option(f[g],n[g]))}else{if($("camera_backlight").value==4&&k[0].WideDynamicRange==2){n=t.slice(2,10);g=b.slice(2,10);d=o.slice(1,10);n.push("1/30000");d.push(0.03);c._sortArray(n,g,d);for(g=
0;g<n.length;g++)$("camera_ExposureSpeed").options.add(new Option(n[g],d[g]))}else{g=y.slice(0,n-1);d=s.slice(0,n-1);g.combine(d);d=g.length;if((fa||ga)&&n>14)d=g.length+1;f=t.slice(0,d);g=b.slice(0,d);n=o.slice(0,d);f.push("1/30000");n.push(0.03);c._sortArray(f,g,n);for(g=0;g<f.length;g++)$("camera_ExposureSpeed").options.add(new Option(f[g],n[g]))}$("camera_ExposureSpeed").options.add(new Option(tl("w_CostomDifsec"),"Custom"))}$("camera_ExposureMode").value=j;$("camera_showGain").style.display=
"none";$("camera_showExposureSpeed").style.display="none";$("camera_showGainRange").style.display="none";$("camera_showExposure").style.display="none";if(j!=4){a.ExposureSpeed=0;if(j==0&&currenDeviceType.contains("3110"))$("camera_showGain").style.display="";if(j==2)PAL_NTSC=="PAL"?!Q.contains(a.ExposureValue2)||a.ExposureValue1!=0?($("camera_ExposureSlct").value="Custom",$("camera_showExposure").style.display=""):$("camera_ExposureSlct").value=a.ExposureValue2:!R.contains(a.ExposureValue2)||a.ExposureValue1!=
0?($("camera_ExposureSlct").value="Custom",$("camera_showExposure").style.display=""):$("camera_ExposureSlct").value=a.ExposureValue2,$("camera_Exposure_label").set("text","");if(j==1)$("camera_showGain").style.display="none",$("camera_showGainRange").style.display=""}else{$("camera_ExposureMode").value=j;$("camera_showExposureSpeed").style.display="";$("camera_showGain").style.display="";j=!1;n=k[0].Exposure;d=$("camera_ExposureSpeed").options.length;for(g=0;g<d;g++)if(currenDeviceType.contains("3110"))if(n>
9)if(PAL_NTSC=="PAL"){if($("camera_ExposureSpeed").options[g].value==40){j=!0;break}}else{if($("camera_ExposureSpeed").options[g].value==33){j=!0;break}}else{if($("camera_ExposureSpeed").options[g].value==1){j=!0;break}}else if($("camera_backlight").value==4&&k[0].WideDynamicRange==2){if($("camera_ExposureSpeed").options[g].value==10){j=!0;break}}else if(n>9)if(PAL_NTSC=="PAL"){if($("camera_ExposureSpeed").options[g].value==40){j=!0;break}}else{if($("camera_ExposureSpeed").options[g].value==33){j=
!0;break}}else if($("camera_ExposureSpeed").options[g].value==10){j=!0;break}j?currenDeviceType.contains("3110")?n>9?PAL_NTSC=="PAL"?$("camera_ExposureSpeed").value=40:$("camera_ExposureSpeed").value=33:$("camera_ExposureSpeed").value=1:$("camera_backlight").value==4&&k[0].WideDynamicRange==2?$("camera_ExposureSpeed").value=10:n>9?PAL_NTSC=="PAL"?$("camera_ExposureSpeed").value=40:$("camera_ExposureSpeed").value=33:$("camera_ExposureSpeed").value=10:(j=(d/2).toInt(),$("camera_ExposureSpeed").selectedIndex=
j);a.ExposureSpeed=2*n;if(currenDeviceType.contains("3110"))$("camera_showGain").style.display="none",$("camera_showGainRange").style.display=""}}},_setDefaultExposure:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;a.ExposureValue1=0;$("camera_ExposureValue1").value=0;PAL_NTSC=="PAL"?(a.ExposureValue2=40,$("camera_ExposureValue2").value=40):(a.ExposureValue2=33,$("camera_ExposureValue2").value=33);a.GainMin=0;a.GainMax=50;$("camera_GainMin").value=0;$("camera_GainMax").value=
50;($("camera_ExposureMode").value==1||$("camera_ExposureMode").value==2)&&N.set(a.GainMax)},_selectBackMode:function(){var a=e[0],g=k[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;$("camera_showWDRValue").style.top=0;$("camera_showWDRValue").style.display="none";$("camera_backlight").value=0;$("camera_ExposureMode").value==2?c._limitExposure(1):c._limitExposure(0);L=0;if(a.Backlight)L=$("camera_backlight").value=1;if(g.WideDynamicRange==1&&a.WideDynamicRange!=0)L=$("camera_backlight").value=
2,$("camera_showWDRValue").style.display="",I.set(a.WideDynamicRange);if(g.WideDynamicRange==2&&a.WideDynamicRange!=0)L=$("camera_backlight").value=4,$("camera_showWDRValue").style.display="",I.set(a.WideDynamicRange),c._limitExposure(1);if(a.GlareInhibition!=null&&a.GlareInhibition!=0)L=$("camera_backlight").value=3,$("camera_showWDRValue").style.display="",I.set(a.GlareInhibition);$("camera_backlight").value==4||!S?$("camera_showAntiFlicker").style.display="none":$("camera_showAntiFlicker").style.display=
""},_sortArray:function(a,c,b){for(var e=a.length,d,f=0;f<e;f++)for(var o=0;o<e;o++)a[f].slice(2)-0>a[o].slice(2)-0&&(d=a[o],a[o]=a[f],a[f]=d,d=c[o],c[o]=c[f],c[f]=d,d=b[o],b[o]=b[f],b[f]=d)},_filterArray:function(a,c,b,d){for(var e=b==1?["1/100","1/50","1/25","1/10","1/5","1/4"]:["1/120","1/60","1/30","1/12","1/6","1/4"],b=0;b<a.length;b++)e.contains(a[b])||(a.erase(a[b]),c.erase(c[b]),d.erase(d[b]),--b)},_parsecurrentTime:function(a){a?(a=a.trim().split(" ")[1].split(":"),a=((a[0]-0)*60+(a[1]-0))*
60+(a[2]-0)):a=43200;return a},_getCurrentPage:function(){var a=e[0];a.NightOptions.SwitchMode==0?c._changeDayNighr(0):a.NightOptions.SwitchMode==3?c._changeDayNighr(1):a.NightOptions.SwitchMode==2?(new Global).getCurrentTime(function(a){a=JSON.decode(a).result;a=c._parsecurrentTime(a);c._isDaytime(a)?c._changeDayNighr(0):c._changeDayNighr(1)},!1):a.NightOptions.SwitchMode==4&&c._changeDayNighr(2)},_isDaytime:function(a){var c=ca.start,b=ca.end,d=c.split(":")[0]-0,e=c.split(":")[1]-0,c=b.split(":")[0]-
0,b=b.split(":")[1]-0,d=(d*60+e)*60+0,c=(c*60+b)*60+0;return za=d<=c?a>=d&&a<c?!0:!1:a>=d||a<c?!0:!1},_selectScrene:function(){$("camera_whiteBalance").value=="Custom"?($("camera_showRedGain").style.display="block",$("camera_showBlueGain").style.display="block"):($("camera_showRedGain").style.display="none",$("camera_showBlueGain").style.display="none")},_getStatus:function(){c.videoInput.getVideoInStatus(function(a){if(JSON.decode(a).result)a=JSON.decode(a).params.status,U.set(a.GainRed),V.set(a.GainBlue)},
0,!1)},_isCanFilp:function(a){var g=a[0].MainFormat[0].Video.Width,b=a[0].MainFormat[0].Video.Height,d=a[0].SnapFormat[0].Video.Width,e=a[0].SnapFormat[0].Video.Height,f=a[0].ExtraFormat[0].Video.Width,o=a[0].ExtraFormat[0].Video.Height,h=ExtraStreamNum>1&&a[0].ExtraFormat[1].Video.Width,r=ExtraStreamNum>1&&a[0].ExtraFormat[1].Video.Height;c.magicBox.getProductDef("RotateResolutionLimit",function(a){if(JSON.decode(a).result){var c=getRorateFrame(g,b),m=getRorateFrame(d,e),k=getRorateFrame(f,o),a=
JSON.decode(a).params.definition,c=a.contains(c)&&a.contains(m)&&a.contains(k);ExtraStreamNum>1&&(m=getRorateFrame(h,r),c=c&&a.contains(m));va=c?!1:!0}},!1)},_getRorateRect:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;var g=a.BacklightRegion,b=0;a.Rotate90==0&&a.Flip==!1?(c._Rotate(g[0],g[1],g[2],g[3],0),b=0):a.Rotate90==0&&a.Flip==!0?(c._Rotate(g[0],g[1],g[2],g[3],180),b=180):a.Rotate90==1?(c._Rotate(g[0],g[1],g[2],g[3],90),b=90):a.Rotate90==2&&(c._Rotate(g[0],
g[1],g[2],g[3],270),b=270);a.Mirror&&c._getMirrorEx(C,D,E,F,b);c._showBackArea(C,D,E,F)},_getProcessInfo:function(){ga=isEnable("is_show_ExposureSpeed");c.magicBox.getProcessInfo(function(a){JSON.decode(a).result?(c.reGetProcessInfo=!1,fa=JSON.decode(a).params.info.contains("A5S"),!ga&&!fa&&(t.erase("1/100000"),b.erase(19),o.erase(0.01))):c.reGetProcessInfo=!0},!1)},_getVideoInCaps:function(){c.videoInput.getCaps(function(a){JSON.decode(a).result?(c.reGetVideoInCaps=!1,k[0]=JSON.decode(a).params.caps):
c.reGetVideoInCaps=!0},0,!1);c.videoInput.getCapsEx(function(a){JSON.decode(a).result?(c.reGetVideoInCaps=!1,q=JSON.decode(a).params.caps):c.reGetVideoInCaps=!0},0,"ALL",!1);c.magicBox.getProductDef("LightGlobal",function(a,c){if(c.result)ya=c.params.definition.Support},!1)},_chaValue:function(a,g){c._limitFloat(a,g);var b=e[0];if(1==h)b=e[0].NightOptions;else if(2==h)b=e[0].NormalOptions;if($("camera_ExposureValue1").value-0>$("camera_ExposureValue2").value-0)$("camera_ExposureValue2").value=$("camera_ExposureValue1").value;
b.ExposureValue1=$("camera_ExposureValue1").value-0;b.ExposureValue2=$("camera_ExposureValue2").value-0;c.configManager.setTemporaryConfig("VideoInOptions",e,c._postresult)},_limitFloat:function(a,c){var b=a.value;if(/^[0-9]+[.]?[0-9]*$/.test(a.value))if(b.charAt(0)==".")a.value="0"+b;else{if(/[.]/.test(b)){var b=b.replace(/[^0-9, ^.]/g,""),d=b.indexOf(".",b.indexOf(".")+1);a.value=d>0?b.slice(0,d):b;if(a.value.indexOf(".")==1&&a.value.length>4)a.value=a.value.slice(0,4)}else a.value=b.replace(/[^0-9, ^.]/g,
"");if(a.value=="00"||a.value=="0.0"||a.value==""||a.value=="0."||a.value-0<0.01)a.value="0";if(a.value-0>k[0].MaxExposureTime)a.value=k[0].MaxExposureTime;a.value-=0;if(a.value>c)a.value=c}else a.value="0"},_postresult:function(a){JSON.decode(a).result||remarkDisplay("camera_remark",tl("Saving failure"),3E3,1)},_setBrightness:function(){if(G!=1){var a=l[0][0];1==h?a=l[0][1]:2==h&&(a=l[0][2]);a.Brightness=W;c.configManager.setTemporaryConfig("VideoColor",l,c._postresult)}},_setContrast:function(){if(G!=
1){var a=l[0][0];1==h?a=l[0][1]:2==h&&(a=l[0][2]);a.Contrast=X;c.configManager.setTemporaryConfig("VideoColor",l,c._postresult)}},_setSaturation:function(){if(G!=1){var a=l[0][0];1==h?a=l[0][1]:2==h&&(a=l[0][2]);a.Saturation=Y;c.configManager.setTemporaryConfig("VideoColor",l,c._postresult)}},_setHue:function(){if(G!=1){var a=l[0][0];1==h?a=l[0][1]:2==h&&(a=l[0][2]);a.Hue=Z;c.configManager.setTemporaryConfig("VideoColor",l,c._postresult)}},_setEEMode:function(){if(G!=1){var a=f[0].DayOptions;if(1==
h)a=f[0].NightOptions;else if(2==h)a=f[0].NormalOptions;a.EEMode=aa;c.configManager.setTemporaryConfig("VideoInPreviewOptions",f,c._postresult)}},_postUnFocusDetectValue:function(){if(G!=1){var a=f[0].DayOptions;if(1==h)a=f[0].NightOptions;else if(2==h)a=f[0].NormalOptions;a.UnFocusDetectSensitivity=qa-0;c.configManager.setTemporaryConfig("VideoInPreviewOptions",f,c._postresult)}},_postBackValue:function(){if(G!=1){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;$("camera_backlight").value==
3?a.GlareInhibition=ba:a.WideDynamicRange=ba;c.configManager.setTemporaryConfig("VideoInOptions",e,c._postresult)}},_postGainOnly:function(){if(G!=1){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;$("camera_ExposureMode").value==1||$("camera_ExposureMode").value==2?(a.GainMin=0,a.GainMax=O):a.Gain=O;c.configManager.setTemporaryConfig("VideoInOptions",e,c._postresult)}},_changeDayNighr:function(a){$("camera_backlightDefault").checked=!0;h=0==a?$("camera_config_mode").value=
0:1==a?$("camera_config_mode").value=1:$("camera_config_mode").value=2;c._changeTempTime();c._putValue();c._showBackLightInit();c._EmpRayDisplay();c._resetBackMode();c._selectBackMode();c._post()},_EmpRayDisplay:function(){var a=e[0],g=k[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;if(a.AntiFlicker==1)$("camera_ExposureMode").innerHTML="",g.ExposureMode&1&&($("camera_ExposureMode").options.add(new Option(tl("w_Automatic"),0)),$("camera_ExposureMode").options.add(new Option(tl("w_Manual"),
4)));else if(a.AntiFlicker==2)$("camera_ExposureMode").innerHTML="",g.ExposureMode&1&&($("camera_ExposureMode").options.add(new Option(tl("w_Automatic"),0)),$("camera_ExposureMode").options.add(new Option(tl("w_Manual"),4)));else if(a.AntiFlicker==0)$("camera_ExposureMode").innerHTML="",g.ExposureMode&1&&$("camera_ExposureMode").options.add(new Option(tl("w_Automatic"),0)),g.ExposureMode>>1&1&&$("camera_backlight").value!=4&&$("camera_ExposureMode").options.add(new Option(tl("w_Gainfirst"),1)),g.ExposureMode>>
2&1&&$("camera_ExposureMode").options.add(new Option(tl("w_ExposureTime"),2)),$("camera_ExposureMode").options.add(new Option(tl("w_Manual"),4));$("camera_ExposureMode").value=a.ExposureMode;c._manuEmpNOpost()},_manuEmpNOpost:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;if(a.AntiFlicker==1)$("camera_AntiFlicker_50").checked=!0;else if(a.AntiFlicker==2)$("camera_AntiFlicker_60").checked=!0;else if(a.AntiFlicker==0)$("camera_AntiFlicker_70").checked=!0},_EmpModeDisplay:function(){$("camera_GainRange_label").setProperty("text",
tl("w_Gainregulate"));$("camera_showExposureSlct").style.display="none";$("camera_Exposure_label").set("text",tl("w_KmScope"));switch($("camera_ExposureMode").value-0){case 0:c._onEmpAuto();break;case 1:c._onEmpAuto1();break;case 2:c._onEmpAuto2();break;case 4:c._onEmpManu()}c._hideForK6()},_changeExposure:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;$("camera_ExposureSlct").value!="Custom"?($("camera_showExposure").style.display="none",a.ExposureValue1=0,a.ExposureValue2=
$("camera_ExposureSlct").value-0):($("camera_showExposure").style.display="",$("camera_Exposure_label").set("text",""),$("camera_ExposureValue1").value=0,$("camera_ExposureValue2").value=a.ExposureValue2,a.ExposureValue1=0,a.ExposureValue2=$("camera_ExposureValue2").value-0);c.configManager.setTemporaryConfig("VideoInOptions",e,c._postresult)},_BackModeDisplay:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;if($("camera_backlight").value==0)$("camera_showBacklightMode").style.display=
"none",$("camera_btn_backlight").style.display="none",$("camera_showWDR").style.display="none",$("camera_showWDRValue").style.display="none",a.Backlight=0,a.WideDynamicRange=0,a.GlareInhibition=0;else if($("camera_backlight").value==1){$("camera_showBacklightMode").style.display="";$("camera_showWDRValue").style.display="none";if(currenDeviceType.indexOf("3110")>0||k[0].Backlight==1)$("camera_showBacklightMode").style.display="none";$("camera_btn_backlight").style.display="";$("camera_showWDR").style.display=
"none";a.WideDynamicRange=0;a.GlareInhibition=0;c._showBackSelect(a.Backlight)}else k[0].WideDynamicRange==2&&$("camera_GainRange_label").setProperty("text",tl("GainMax")),$("camera_showBacklightMode").style.display="none",$("camera_btn_backlight").style.display="none",$("camera_showWDR").style.display="none",$("camera_showWDRValue").style.display="",$("camera_backlight").value==3?(a.Backlight=0,a.WideDynamicRange=0,I.set(a.GlareInhibition)):(I.set(a.WideDynamicRange),a.Backlight=0,a.GlareInhibition=
0);c._hideForK6()},_onEmpAuto:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;a.GainAuto=!0;$("camera_showExposure").style.display="none";if(k[0].ExposureMode>>3&1||k[0].ExposureMode>>4&1)if($("camera_AntiFlicker_50").checked||$("camera_AntiFlicker_60").checked)$("camera_showGain").style.display="none";else{if($("camera_showGain").style.display="none",currenDeviceType.contains("3110"))$("camera_showGain").style.display=""}else $("camera_showGain").style.display=
"";$("camera_showExposureSpeed").style.display="none";$("camera_showGainRange").style.display="none"},_onEmpAuto1:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;a.GainAuto=!0;$("camera_showExposure").style.display="none";$("camera_showGain").style.display="none";$("camera_showExposureSpeed").style.display="none";$("camera_showGainRange").style.display="";$("camera_GainRange_label").set("text",tl("w_GainScope"))},_onEmpAuto2:function(){var a=e[0];if(1==h)a=e[0].NightOptions;
else if(2==h)a=e[0].NormalOptions;$("camera_showExposure").style.display="none";$("camera_showGain").style.display="none";$("camera_showExposureSpeed").style.display="none";$("camera_showGainRange").style.display="none";$("camera_showExposureSlct").style.display="";$("camera_GainRange_label").set("text",tl("w_GainScope"));PAL_NTSC=="PAL"?!Q.contains(a.ExposureValue2)||a.ExposureValue1!=0?($("camera_showExposure").style.display="",$("camera_ExposureSlct").value="Custom"):$("camera_ExposureSlct").value=
a.ExposureValue2:!R.contains(a.ExposureValue2)||a.ExposureValue1!=0?($("camera_showExposure").style.display="",$("camera_ExposureSlct").value="Custom"):$("camera_ExposureSlct").value=a.ExposureValue2;$("camera_Exposure_label").set("text","")},_onEmpManu:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;$("camera_backlight").value==4&&$("camera_GainRange_label").setProperty("text",tl("GainMax"));a.GainAuto=!0;$("camera_showExposure").style.display="none";if($("camera_ExposureSpeed").value==
"Custom")$("camera_showExposure").style.display="";$("camera_showGain").style.display="";$("camera_showExposureSpeed").style.display="";$("camera_showGainRange").style.display="none";if(currenDeviceType.contains("3110"))$("camera_showGain").style.display="none",$("camera_showGainRange").style.display="",a.GainAuto=!1;N.set(a.Gain)},_showBackSelect:function(a){$("camera_backlightDefault").checked=!1;$("camera_backlightCustom").checked=!1;switch(a){case 1:$("camera_backlightDefault").checked=!0;c._drawBackline(!1);
break;case 2:$("camera_backlightCustom").checked=!0,c._drawBackline(!0)}if($("camera_backlightDefault").checked==!1&&$("camera_backlightCustom").checked==!1)$("camera_backlightDefault").checked=!0;$("camera_backlightCustom").checked?$("camera_btn_backlight").style.display="":$("camera_btn_backlight").style.display="none"},_onSelectBackMode:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;G=1;L==4&&c._resetExposure();if(S)$("camera_showAntiFlicker").style.display=
"";$("camera_ExposureMode").value==2?c._limitExposure(1):c._limitExposure(0);var g=$("camera_backlight").value;if($("camera_backlight").value==0)c._drawBackline(!1),$("camera_showBacklightMode").style.display="none",$("camera_btn_backlight").style.display="none",$("camera_showWDR").style.display="none",$("camera_showWDRValue").style.display="none",a.Backlight=0,a.WideDynamicRange=0,a.GlareInhibition=0;else if($("camera_backlight").value==1){currenDeviceType.indexOf("3110")>0||k[0].Backlight==1?$("camera_showBacklightMode").style.display=
"none":$("camera_showBacklightMode").style.display="";$("camera_showWDRValue").style.display="none";$("camera_btn_backlight").style.display="";$("camera_showWDR").style.display="none";if($("camera_backlightDefault").checked)a.Backlight=1,c._drawBackline(!1);if($("camera_backlightCustom").checked)a.Backlight=2,c._drawBackline(!0),$("camera_btn_backlight").className="camera-draw-icon-on",$("camera_btn_backlight").style.display="";a.WideDynamicRange=0;a.GlareInhibition=0;c._showBackSelect(a.Backlight)}else if($("camera_backlight").value==
2)$("camera_showBacklightMode").style.display="none",$("camera_btn_backlight").style.display="none",$("camera_showWDR").style.display="none",$("camera_showWDRValue").style.display="",c._drawBackline(!1),a.Backlight=0,a.GlareInhibition=0,a.WideDynamicRange=50,I.set(a.WideDynamicRange);else if($("camera_backlight").value==3)$("camera_showBacklightMode").style.display="none",$("camera_btn_backlight").style.display="none",$("camera_showWDR").style.display="none",$("camera_showWDRValue").style.display=
"",c._drawBackline(!1),a.Backlight=0,a.WideDynamicRange=0,a.GlareInhibition=50,I.set(a.GlareInhibition);else if($("camera_backlight").value==4){c._drawBackline(!1);$("camera_showBacklightMode").style.display="none";$("camera_btn_backlight").style.display="none";$("camera_showWDR").style.display="none";$("camera_showWDRValue").style.display="";a.Backlight=0;a.GlareInhibition=0;a.WideDynamicRange=50;I.set(a.WideDynamicRange);a.AntiFlicker=0;c._EmpRayDisplay();c._resetExposure();for(var b=$("camera_ExposureMode").options.length,
d=!1,f=0;f<b;f++)if($("camera_ExposureMode").options[f].value==a.ExposureMode){d=!0;break}if(!d)$("camera_ExposureMode").value=0,a.ExposureMode=0,c._EmpModeDisplay(),c._setDefaultExposure();if(S)$("camera_showAntiFlicker").style.display="none";c._limitExposure(1)}c._resetBackMode();$("camera_backlight").value=g;G=0;c.configManager.setTemporaryConfig("VideoInOptions",e,c._postresult)},_drawBackline:function(a){$("ocx")&&(a=a==!0?1:0,Site.currentPage.is.cameraConfig&&$("ocx").SetRegionNum(a));a&&c._getRorateRect()},
_post:function(){var a=e[0],g=f[0];if(0==h)g=f[0].DayOptions;else if(1==h)a=e[0].NightOptions,g=f[0].NightOptions;else if(2==h)a=e[0].NormalOptions,g=f[0].NormalOptions;a.DayNightColor=$("camera_DayNightColor").value-0;a.ExposureMode=$("camera_ExposureMode").value-0;a.IrisAuto=$("camera_autoIris_enable").checked?!0:!1;a.WhiteBalance=$("camera_whiteBalance").value;if($("camera_whiteBalance").value=="Custom")a.GainRed=oa,a.GainBlue=pa;if($("camera_ExposureMode").value!=1)a.GainMin=$("camera_GainMin").value-
0,a.GainMax=$("camera_GainMax").value-0;a.AntiFlicker=$("camera_AntiFlicker_50").checked?1:$("camera_AntiFlicker_60").checked?2:0;if($("camera_ExposureMode").value==4)$("camera_ExposureSpeed").value=="Custom"?(a.ExposureValue1=$("camera_ExposureValue1").value-0,a.ExposureValue2=$("camera_ExposureValue2").value-0):(a.ExposureValue1=$("camera_ExposureSpeed").value-0,a.ExposureValue2=$("camera_ExposureSpeed").value-0),a.ExposureSpeed=2*k[0].Exposure;e[0].Mirror=$("camera_Mirror_enable").checked;e[0].NightOptions.Mirror=
$("camera_Mirror_enable").checked;e[0].NormalOptions.Mirror=$("camera_Mirror_enable").checked;if(T)g.TridimEstimation=P-0,g.TridimIntensity=ta-0,g.TridimDenoise=$("camera_3DRDeNoiseOn").checked?1:0;a.DayNightSensitivity=$("camera_Sensitivity").value-0;a.DayNightSwitchDelay=$("camera_DayNightDelay").value-0;if(m){var b=null,b=1==h?m[0][2]:2==h?m[0][0]:m[0][1];b.Mode=$("camera_VideoInDefogMode").value;if($("camera_VideoInDefogMode").value=="Manul"&&(b.Intensity=$("camera_VideoInDefogModeStrong").value-
0,b.LightIntensityMode=$("camera_LightIntensityMode").value,$("camera_LightIntensityMode").value=="Manul"))b.LightIntensityLevel=$("camera_LightIntensityModeStrong").value-0}g.ImageStabilizationEnable=$("camera_VideoStabilization_enable").checked;a.SmartIRExposure=$("camera_SmartIR_enable").checked;a.InfraRed=$("camera_InfraRed").value=="true"?!1:!0;T?m?c.configManager.setTemporaryConfig(["VideoInOptions","VideoInPreviewOptions","VideoInDefog"],[e,f,m],c._postresult):c.configManager.setTemporaryConfig(["VideoInOptions",
"VideoInPreviewOptions"],[e,f],c._postresult):m?c.configManager.setTemporaryConfig(["VideoInOptions","VideoInDefog"],[e,m],c._postresult):c.configManager.setTemporaryConfig(["VideoInOptions"],[e],c._postresult)},_Rotate:function(a,c,b,d,e){var f,o,m,h;e==0&&(f=a,o=c,m=b,h=d);e==90&&(f=8191-c,o=a,m=8191-d,h=b);e==180&&(f=a,o=8191-c,m=b,h=8191-d);e==270&&(f=c,o=8191-a,m=d,h=8191-b);C=f>m?m:f;D=o>h?h:o;E=f>m?f:m;F=o>h?o:h},_showBackArea:function(a,c,b,d){$("ocx")&&$("ocx").SetSelRegionByIndex(0,a,c,
b,d)},_postBacklineCfg:function(a,b,d,f){if(!(-1==a&&-1==b&&-1==d&&-1==f||0==a&&0==b&&0==d&&0==f)){var o=e[0];if(1==h)o=e[0].NightOptions;else if(2==h)o=e[0].NormalOptions;o.Backlight=2;o.WideDynamicRange=0;o.GlareInhibition=0;var f=getDefaultRect(a,b,d,f),a=f[0],b=f[1],d=f[2],f=f[3],m=0;o.Rotate90==1?(c._Rotate(a,b,d,f,270),m=0):o.Rotate90==2?(c._Rotate(a,b,d,f,90),m=180):o.Flip?(c._Rotate(a,b,d,f,180),m=180):(c._Rotate(a,b,d,f,0),m=0);$("camera_Mirror_enable").checked&&c._getMirrorEx(C,D,E,F,m);
if(o.BacklightRegion!=C+","+D+","+E+","+F)e[0].BacklightRegion=[C,D,E,F],e[0].NightOptions.BacklightRegion=[C,D,E,F],e[0].NormalOptions.BacklightRegion=[C,D,E,F],e[0].Mirror=$("camera_Mirror_enable").checked,e[0].NightOptions.Mirror=$("camera_Mirror_enable").checked,e[0].NormalOptions.Mirror=$("camera_Mirror_enable").checked,c.configManager.setTemporaryConfig("VideoInOptions",e,c._postresult)}},_showfilpChangeEx:function(){if($("camera_select_filp")){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==
h)a=e[0].NormalOptions;if(a.Flip==!1&&a.Rotate90==0)$("camera_select_filp").value=0;else if(a.Flip==!1&&a.Rotate90==1)$("camera_select_filp").value=1;else if(a.Flip==!0&&a.Rotate90==0)$("camera_select_filp").value=2;else if(a.Flip==!1&&a.Rotate90==2)$("camera_select_filp").value=3}},_getMirror:function(a,c,b,d){if($("camera_select_filp").value==0||$("camera_select_filp").value==2)C=8191-b,D=c,E=8191-a,F=d;if($("camera_select_filp").value==1||$("camera_select_filp").value==3)C=a,D=8191-d,E=b,F=8191-
c},_getMirrorEx:function(a,c,b,d,e){if(e==0||e==180)C=8191-b,D=c,E=8191-a,F=d;if(e==90||e==270)C=a,D=8191-d,E=b,F=8191-c},_changeMirror:function(){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;var b=a.BacklightRegion;J=a.Rotate90;J==0?a.Rotate90==1?c._Rotate(b[0],b[1],b[2],b[3],90):a.Rotate90==2?c._Rotate(b[0],b[1],b[2],b[3],270):ia==!1&&a.Flip==!0?c._Rotate(b[0],b[1],b[2],b[3],180):c._Rotate(b[0],b[1],b[2],b[3],0):J==1?(a.Rotate90==0?c._Rotate(b[0],b[1],b[2],b[3],0):a.Rotate90==
2?c._Rotate(b[0],b[1],b[2],b[3],270):c._Rotate(b[0],b[1],b[2],b[3],90),a.Flip&&c._Rotate(b[0],b[1],b[2],b[3],180)):J==2&&(a.Rotate90==0?c._Rotate(b[0],b[1],b[2],b[3],0):a.Rotate90==1?c._Rotate(b[0],b[1],b[2],b[3],90):c._Rotate(b[0],b[1],b[2],b[3],270),a.Flip&&c._Rotate(b[0],b[1],b[2],b[3],180));$("camera_Mirror_enable").checked&&c._getMirror(C,D,E,F);c._showBackArea(C,D,E,F)},_showFilpChange:function(){var a=e[0],b=e[0].NightOptions,d=e[0].NormalOptions;J=a.Rotate90;ia=a.Flip;wa=$("camera_backlight").value==
1?!0:!1;if(va&&($("camera_select_filp").value==1||$("camera_select_filp").value==3))remarkDisplay("camera_remark",tl("w_can not Filp"),3E3,1),c._showfilpChangeEx();else{if($("camera_select_filp").value==0)a.Flip=!1,a.Rotate90=0,b.Flip=!1,b.Rotate90=0,d.Flip=!1,d.Rotate90=0;else if($("camera_select_filp").value==1)a.Flip=!1,a.Rotate90=1,b.Flip=!1,b.Rotate90=1,d.Flip=!1,d.Rotate90=1;else if($("camera_select_filp").value==2)a.Flip=!0,a.Rotate90=0,b.Flip=!0,b.Rotate90=0,d.Flip=!0,d.Rotate90=0;else if($("camera_select_filp").value==
3)a.Flip=!1,a.Rotate90=2,b.Flip=!1,b.Rotate90=2,d.Flip=!1,d.Rotate90=2;c.configManager.setTemporaryConfig("VideoInOptions",e,c._postsuccess)}},_postsuccess:function(a){var b=e[0];if(1==h)b=e[0].NightOptions;else if(2==h)b=e[0].NormalOptions;if(JSON.decode(a).result){if(wa)a=b.BacklightRegion,J==0?b.Rotate90==1?c._Rotate(a[0],a[1],a[2],a[3],90):b.Rotate90==2?c._Rotate(a[0],a[1],a[2],a[3],270):ia==!1&&b.Flip==!0?c._Rotate(a[0],a[1],a[2],a[3],180):c._Rotate(a[0],a[1],a[2],a[3],0):J==1?(b.Rotate90==0?
c._Rotate(a[0],a[1],a[2],a[3],0):b.Rotate90==2?c._Rotate(a[0],a[1],a[2],a[3],270):c._Rotate(a[0],a[1],a[2],a[3],90),b.Flip&&c._Rotate(a[0],a[1],a[2],a[3],180)):J==2&&(b.Rotate90==0?c._Rotate(a[0],a[1],a[2],a[3],0):b.Rotate90==1?c._Rotate(a[0],a[1],a[2],a[3],90):c._Rotate(a[0],a[1],a[2],a[3],270),b.Flip&&c._Rotate(a[0],a[1],a[2],a[3],180)),$("camera_Mirror_enable").checked&&c._getMirror(C,D,E,F),c._showBackArea(C,D,E,F)}else remarkDisplay("camera_remark",tl("Saving failure"),3E3,1)},_checkGain:function(a,
b,d){var f=$(a).value.replace(/[^\d]/g,0)-0;if(f=="")$(a).value=0;f>d?$(a).value=d:f<b?$(a).value=b:$(a).value=f;b=e[0];if(1==h)b=e[0].NightOptions;else if(2==h)b=e[0].NormalOptions;if($("camera_GainMin").value-0>$("camera_GainMax").value-0)$("camera_GainMax").value=$("camera_GainMin").value;$(a).value=$(a).value-0;b.GainMin=$("camera_GainMin").value-0;b.GainMax=$("camera_GainMax").value-0;c.configManager.setTemporaryConfig("VideoInOptions",e,c._postresult)},_clearAndDrawArea:function(){$("camera_btn_backlight").className==
"camera-draw-icon-off"?($("camera_btn_backlight").className="camera-draw-icon-on",c._drawBackline(!0)):($("camera_btn_backlight").className="camera-draw-icon-off",c._drawBackline(!1))},_onSelectEmpMode:function(){c._EmpModeDisplay();c._setDefaultExposure();c._resetExposure();c._resetBackMode();c._selectBackMode();c._post()},_chaManulExposure:function(){if($("camera_ExposureSpeed").value=="Custom"){var a=e[0];if(1==h)a=e[0].NightOptions;else if(2==h)a=e[0].NormalOptions;$("camera_showExposure").style.display=
"";var b=$("camera_MaxExposureTime").get("text")-0;if(a.ExposureValue2>b)a.ExposureValue2=b;a.ExposureValue1=0;$("camera_ExposureValue1").value=0;$("camera_ExposureValue2").value=a.ExposureValue2}else $("camera_showExposure").style.display="none";c._post()},_cfgScrene:function(){c._selectScrene();$("camera_whiteBalance").value=="Custom"&&c._getStatus();c._post()},_show3DNoise:function(a){a?$("camera_3DshowEstimate").style.display="":$("camera_3DshowEstimate").style.display="none";$("camera_3Dintension").style.display=
"none"},_changeTempTime:function(){0==h?(l[0][0].TimeSection="1 00:00:00-24:00:00",l[0][1].TimeSection="0 00:00:00-24:00:00",l[0][2].TimeSection="0 00:00:00-24:00:00",f[0].SwitchMode=3,e[0].NightOptions.Profile=0):1==h?(l[0][0].TimeSection="0 00:00:00-24:00:00",l[0][1].TimeSection="1 00:00:00-24:00:00",l[0][2].TimeSection="0 00:00:00-24:00:00",f[0].SwitchMode=5,e[0].NightOptions.Profile=1):(l[0][0].TimeSection="0 00:00:00-24:00:00",l[0][1].TimeSection="0 00:00:00-24:00:00",l[0][2].TimeSection="1 00:00:00-24:00:00",
f[0].SwitchMode=0,e[0].NightOptions.Profile=2);c.configManager.setTemporaryConfig("VideoColor",l,c._postresult)},_setTimeBack:function(){e[0].NightOptions.SwitchMode=$unlink(p[0].NightOptions.SwitchMode);e[0].NightOptions.SunriseHour=$unlink(p[0].NightOptions.SunriseHour);e[0].NightOptions.SunriseMinute=$unlink(p[0].NightOptions.SunriseMinute);e[0].NightOptions.SunriseSecond=$unlink(p[0].NightOptions.SunriseSecond);e[0].NightOptions.SunsetHour=$unlink(p[0].NightOptions.SunsetHour);e[0].NightOptions.SunsetMinute=
$unlink(p[0].NightOptions.SunsetMinute);e[0].NightOptions.SunsetSecond=$unlink(p[0].NightOptions.SunsetSecond);f[0].SwitchMode=$unlink(d[0].SwitchMode);f[0].DayOptions.BeginHour=$unlink(d[0].DayOptions.BeginHour);f[0].DayOptions.BeginMinute=$unlink(d[0].DayOptions.BeginMinute);f[0].DayOptions.BeginSecond=$unlink(d[0].DayOptions.BeginSecond);f[0].DayOptions.EndHour=$unlink(d[0].DayOptions.EndHour);f[0].DayOptions.EndMinute=$unlink(d[0].DayOptions.EndMinute);f[0].DayOptions.EndSecond=$unlink(d[0].DayOptions.EndSecond);
f[0].NightOptions.BeginHour=$unlink(d[0].NightOptions.BeginHour);f[0].NightOptions.BeginMinute=$unlink(d[0].NightOptions.BeginMinute);f[0].NightOptions.BeginSecond=$unlink(d[0].NightOptions.BeginSecond);f[0].NightOptions.EndHour=$unlink(d[0].NightOptions.EndHour);f[0].NightOptions.EndMinute=$unlink(d[0].NightOptions.EndMinute);f[0].NightOptions.EndSecond=$unlink(d[0].NightOptions.EndSecond);l[0][0].TimeSection=$unlink(B[0][0].TimeSection);l[0][1].TimeSection=$unlink(B[0][1].TimeSection);l[0][2].TimeSection=
$unlink(B[0][2].TimeSection)},_onDefaultClick:function(){c.configManager.getDefault(["VideoInOptions","VideoColor","VideoInPreviewOptions","VideoInDefog","LightGlobal"],function(a){if(JSON.decode(a).result){a=JSON.decode(a).params;e=a[0].params.table;l=a[1].params.table;f=a[2].params.table;if(a[3].result)m=a[3].params.table;if(a[4].result)H=a[4].params.table;c._setTimeBack();c._getCurrentPage();remarkDisplay("camera_remark",tl("Defaultsuccess"),3E3,0)}else remarkDisplay("camera_remark",tl("Defaultfailure"),
3E3,1)},!1);c._drawBackline(!1);$("camera_btn_backlight").style.display="none"},_onRefreshClick:function(){e=$unlink(p);l=$unlink(B);f=$unlink(d);m&&(m=$unlink(K));H&&(H=$unlink(ua));c._getCurrentPage();($("camera_backlight").value!=1||$("camera_btn_backlight").style.display=="none")&&c._drawBackline(!1);remarkDisplay("camera_remark",tl("Operateingsuccess"),3E3,0)},_onConfirmClick:function(){c._setTimeBack();e[0].NightOptions.Profile=3;var a=["VideoInOptions","VideoColor","VideoInPreviewOptions"],
b=[e,l,f];m&&(a.push("VideoInDefog"),b.push(m));if(H)H[0].Enable=$("camera_LightGlobal").value-0?!0:!1,a.push("LightGlobal"),b.push(H);c.configManager.setConfig(a,b,c._onPostresult,!1);c._getCurrentPage()},_onPostresult:function(a){checkPostResult(a)?(p=$unlink(e),B=$unlink(l),d=$unlink(f),m&&(K=$unlink(m)),H&&(ua=$unlink(H)),remarkDisplay("camera_remark",tl("Succeed in saving configure"),3E3,0)):remarkDisplay("camera_remark",tl("Saving failure"),3E3,1)},_displayDayNight:function(){k[0].DayNightSwitchCtrl!==
!1&&$("camera_DayNightColor").value==1?($("camera_showSensitivity").style.display="",$("camera_showDelay").style.display=""):($("camera_showSensitivity").style.display="none",$("camera_showDelay").style.display="none")},_changeVideoInDefogMode:function(){$("camera_VideoInDefogMode").value=="Manul"?($("camera_LightIntensityMode").value="Auto",$("camera_VideoInDefogModeStrong").value=0,$("camera_ShowVideoInDefogModeWrap").setStyle("display",""),$("camera_showLightIntensityMode").setStyle("display",
"")):($("camera_ShowVideoInDefogModeWrap").setStyle("display","none"),$("camera_showLightIntensityMode").setStyle("display","none"),$("camera_ShowLightIntensityModeStrongWrap").setStyle("display","none"))},bind:function(){$("camera_refresh").addEvent("click",c._onRefreshClick);$("camera_default").addEvent("click",c._onDefaultClick);$("camera_confirm").addEvent("click",c._onConfirmClick);$("camera_config_mode").addEvent("change",function(){c._changeDayNighr(this.value)});$("camera_backlight").addEvent("change",
function(){c._onSelectBackMode();L=this.value});$("camera_backlightDefault").addEvent("click",function(){$("camera_backlightCustom").customChecked=!1;c._onSelectBackMode()});$("camera_backlightCustom").addEvent("click",function(){if(this.customChecked!=!0)c._onSelectBackMode(),this.customChecked=this.checked});$("camera_btn_backlight").addEvent("click",c._clearAndDrawArea);$("camera_ExposureSpeed").addEvent("change",c._chaManulExposure);$("camera_AntiFlicker_50").addEvent("click",c._checkAntiflicker);
$("camera_AntiFlicker_60").addEvent("click",c._checkAntiflicker);$("camera_AntiFlicker_70").addEvent("click",c._checkAntiflicker);$("camera_ExposureMode").addEvent("change",c._onSelectEmpMode);$("camera_whiteBalance").addEvent("change",c._cfgScrene);$("camera_DayNightColor").addEvent("change",function(){c._displayDayNight();c._post()});$("camera_GainMin").addEvent("blur",function(){c._checkGain("camera_GainMin",0,100)});$("camera_GainMax").addEvent("blur",function(){c._checkGain("camera_GainMax",
0,100)});$("camera_GainMin").addEvent("keyup",function(){intLimit("camera_GainMin")});$("camera_GainMax").addEvent("keyup",function(){intLimit("camera_GainMax")});$("camera_autoIris_enable").addEvent("click",function(){c._post()});$("camera_autoIris_disable").addEvent("click",function(){c._post()});$("camera_Sensitivity").addEvent("change",c._post);$("camera_btn_FullScene").addEvent("click",function(){$("ocx")&&$("ocx").OnFullScreenClk()});$("camera_Mirror_enable").addEvent("click",function(){$("camera_btn_backlight").className==
"camera-draw-icon-on"&&$("camera_btn_backlight").style.display!="none"&&c._changeMirror();c._post()});$("camera_Mirror_disable").addEvent("click",function(){$("camera_btn_backlight").className=="camera-draw-icon-on"&&$("camera_btn_backlight").style.display!="none"&&c._changeMirror();c._post()});$("camera_3DRDeNoiseOn").addEvent("click",function(){$("camera_3DshowEstimate").style.display=="none"&&(P=50,da.set(P),c._show3DNoise(1),c._post())});$("camera_3DRDeNoiseOff").addEvent("click",function(){P=
0;c._show3DNoise(0);c._post()});$("camera_VideoInDefogMode").addEvent("change",function(){c._changeVideoInDefogMode();c._post()});$("camera_VideoInDefogModeStrong").addEvent("change",function(){c._post()});$("camera_LightIntensityMode").addEvent("change",function(){this.value=="Manul"?($("camera_ShowLightIntensityModeStrongWrap").setStyle("display",""),$("camera_LightIntensityModeStrong").value=7):$("camera_ShowLightIntensityModeStrongWrap").setStyle("display","none");c._post()});$("camera_LightIntensityModeStrong").addEvent("change",
function(){c._post()});$("camera_UnFocusDetect_enable").addEvent("click",function(){c._post()});$("camera_UnFocusDetect_disable").addEvent("click",function(){c._post()});$("camera_VideoStabilization_enable").addEvent("click",c._post);$("camera_VideoStabilization_disable").addEvent("click",c._post);$("camera_SmartIR_enable").addEvent("click",c._post);$("camera_SmartIR_disable").addEvent("click",c._post);$("camera_InfraRed").addEvent("change",c._post);$("camera_DayNightDelay").addEvent("change",c._post);
$("camera_LightGlobal").addEvent("change",function(){H[0].Enable=this.value-0?!0:!1;c.configManager.setTemporaryConfig("LightGlobal",H)})}}})();(function(){var k=null,q=null,e=null,p=574/86400,l={},B=1,f=Page.cameraConfig.Tab.config={init:function(){f.configManager=new ConfigManager;f.translate();f.bind();f._DragInit()},translate:function(){$("camera_normal_label").set("text",tl("w_Normal"));$("camera_changeTime_label").set("text",tl("w_changeByTime"));$("camera_configMode_label").set("text",tl("w_configFile"));
$("camera_dayTime_label").set("text",tl("w_TimeSectionSet"));$("camera_dayNight_label").set("text",tl("w_configManage"));$("camera_Daytime1_label").set("text",tl("Daytime"));$("camera_Nighttime1_label").set("text",tl("Night"));$("camera_default1").set("text",tl("w_DefaultConfig"));$("camera_refresh1").set("text",tl("w_Refresh"));$("camera_confirm1").set("text",tl("w_Confirm"));var d=$("camera_useMode").getElements("option");d[0].setProperty("text",tl("Daytime"));d[1].setProperty("text",tl("Night"));
$("camera_fullTime_label").set("text",tl("w_fullTime"));$("camera_use_label").set("text",tl("w_alwaysUse"))},_DragInit:function(){new Drag.Move("camera_dayTime_slider",{snap:1,modifiers:{x:"left",y:""},container:$("camera_slider_line"),onDrag:function(d){$("camera_slider_daytime").style.left=d.style.left.toInt()+1+"px";var e=$("camera_nightTime_slider").getStyle("left").toInt()-d.style.left.toInt()-13;e<=0?(d.style.left=$("camera_nightTime_slider").getStyle("left").toInt()-13+"px",$("camera_slider_daytime").style.width=
"0px"):$("camera_slider_daytime").style.width=e+"px";f._showStartTime(d)},onComplete:function(d){l.start=f._getTime(d.style.left.toInt());f._setColorEEMode()}});new Drag.Move("camera_nightTime_slider",{snap:1,modifiers:{x:"left",y:""},container:$("camera_slider_line"),onDrag:function(d){var e=d.style.left.toInt()-$("camera_dayTime_slider").getStyle("left").toInt()-13;$("camera_slider_daytime").style.left=$("camera_dayTime_slider").getStyle("left").toInt()+1+"px";e<=0?(d.style.left=$("camera_dayTime_slider").getStyle("left").toInt()+
13+"px",$("camera_slider_daytime").style.width="0px"):$("camera_slider_daytime").style.width=e+"px";$("camera_slider_timeTitle").style.left=d.style.left.toInt()-11+"px";f._showEndTime(d)},onComplete:function(d){l.end=f._getTime(d.style.left.toInt()-13);f._setColorEEMode()}});B=0},render:function(){$("video1").setStyles({top:"0px",left:"0px"});l={};B=0;(function(){f.configManager.getConfig(["VideoInOptions","VideoColor","VideoInPreviewOptions"],function(d){if($("CAMERA")!=null&&JSON.decode(d).result)d=
JSON.decode(d).params,k=d[0].params.table,q=d[1].params.table,e=d[2].params.table,$unlink(k),$unlink(q),$unlink(e),f._putValue()})}).delay(100)},_putValue:function(){var d=k[0],e=d.NightOptions.SunriseHour,q=d.NightOptions.SunriseMinute,s=d.NightOptions.SunriseSecond,w=d.NightOptions.SunsetHour,x=d.NightOptions.SunsetMinute,y=d.NightOptions.SunsetSecond;l.start=chk10(d.NightOptions.SunriseHour)+":"+chk10(d.NightOptions.SunriseMinute);l.end=chk10(d.NightOptions.SunsetHour)+":"+chk10(d.NightOptions.SunsetMinute);
w=((w*3600+x*60+y)*p+13.499999).round();s=((e*3600+q*60+s)*p+0.499999).round();0==e-0&&0==q-0&&(s=0);w>587&&(w=587);w-s<=13&&(s=w-13);$("camera_nightTime_slider").style.left=w+"px";$("camera_dayTime_slider").style.left=s+"px";$("camera_slider_daytime").style.width=w-s-13+"px";$("camera_slider_daytime").style.left=s+1+"px";$("camera_slider_daytime").set("text",tl(""));switch(d.NightOptions.SwitchMode){case 0:$("camera_radio_fullTime").checked=!0;$("camera_useMode").value=0;break;case 3:$("camera_radio_fullTime").checked=
!0;$("camera_useMode").value=1;break;case 2:$("camera_radio_exittime").checked=!0;$("camera_useMode").value=0;break;case 4:$("camera_radio_normal").checked=!0,$("camera_useMode").value=0}f._getTimeMode()},_onDefaultClick:function(){f.configManager.getDefault(["VideoInOptions","VideoColor","VideoInPreviewOptions"],function(d){if($("CAMERA")!=null)if(JSON.decode(d).result){var m=JSON.decode(d).params,d=m[0].params.table,l=m[1].params.table,m=m[2].params.table;k[0].NightOptions.SwitchMode=$unlink(d[0].NightOptions.SwitchMode);
k[0].NightOptions.SunriseHour=$unlink(d[0].NightOptions.SunriseHour);k[0].NightOptions.SunriseMinute=$unlink(d[0].NightOptions.SunriseMinute);k[0].NightOptions.SunriseSecond=$unlink(d[0].NightOptions.SunriseSecond);k[0].NightOptions.SunsetHour=$unlink(d[0].NightOptions.SunsetHour);k[0].NightOptions.SunsetMinute=$unlink(d[0].NightOptions.SunsetMinute);k[0].NightOptions.SunsetSecond=$unlink(d[0].NightOptions.SunsetSecond);e[0].SwitchMode=$unlink(m[0].SwitchMode);e[0].DayOptions.BeginHour=$unlink(m[0].DayOptions.BeginHour);
e[0].DayOptions.BeginMinute=$unlink(m[0].DayOptions.BeginMinute);e[0].DayOptions.BeginSecond=$unlink(m[0].DayOptions.BeginSecond);e[0].DayOptions.EndHour=$unlink(m[0].DayOptions.EndHour);e[0].DayOptions.EndMinute=$unlink(m[0].DayOptions.EndMinute);e[0].DayOptions.EndSecond=$unlink(m[0].DayOptions.EndSecond);e[0].NightOptions.BeginHour=$unlink(m[0].NightOptions.BeginHour);e[0].NightOptions.BeginMinute=$unlink(m[0].NightOptions.BeginMinute);e[0].NightOptions.BeginSecond=$unlink(m[0].NightOptions.BeginSecond);
e[0].NightOptions.EndHour=$unlink(m[0].NightOptions.EndHour);e[0].NightOptions.EndMinute=$unlink(m[0].NightOptions.EndMinute);e[0].NightOptions.EndSecond=$unlink(m[0].NightOptions.EndSecond);q[0][0].TimeSection=$unlink(l[0][0].TimeSection);q[0][1].TimeSection=$unlink(l[0][1].TimeSection);q[0][2].TimeSection=$unlink(l[0][2].TimeSection);f._putValue();remarkDisplay("camera_remark1",tl("Defaultsuccess"),3E3,0)}else remarkDisplay("camera_remark1",tl("Defaultfailure"),3E3,1)})},_onRefreshClick:function(){f.configManager.getConfig(["VideoInOptions",
"VideoColor","VideoInPreviewOptions"],function(d){if($("CAMERA")!=null)JSON.decode(d).result?(d=JSON.decode(d).params,k=d[0].params.table,q=d[1].params.table,e=d[2].params.table,f._putValue(),remarkDisplay("camera_remark1",tl("Operateingsuccess"),3E3,0)):remarkDisplay("camera_remark1",tl("Operateingfailure"),3E3,1)})},_onConfirmClick:function(){$("camera_radio_exittime").checked&&f._chkTime()?remarkDisplay("camera_remark1",tl("SunTimeError"),3E3,2):(f._setColorEEMode(),f.configManager.setConfig(["VideoInOptions",
"VideoColor","VideoInPreviewOptions"],[k,q,e],f._postResult))},_postResult:function(d){checkPostResult(d)?(remarkDisplay("camera_remark1",tl("Succeed in saving configure"),3E3,0),f._putValue()):remarkDisplay("camera_remark1",tl("Saving failure"),3E3,1)},_showStartTime:function(d){d=(d||this).style.left.toInt();$("camera_slider_timeTitle").style.left=d-18+"px";$("camera_slider_timeTitle").set("text",f._getTime(d))},_showEndTime:function(d){d=(d||this).style.left.toInt();$("camera_slider_timeTitle").style.left=
d-11+"px";$("camera_slider_timeTitle").set("text",f._getTime(d-13))},_getTime:function(d){var e={};d>574&&(d=574);d=d/574*1440;e.hour=(d/60).toInt();e.minite=(d%60).toInt();if(e.hour<10)e.hour="0"+e.hour;if(e.minite<10)e.minite="0"+e.minite;return"{hour}:{minite}".substitute(e)},_getTimeMode:function(){$("camera_radio_exittime").checked?($("camera_showPeriod").style.display="",$("camera_showFullTime").style.display="none"):$("camera_radio_fullTime").checked?($("camera_showPeriod").style.display="none",
$("camera_showFullTime").style.display=""):($("camera_showPeriod").style.display="none",$("camera_showFullTime").style.display="none")},_chkTime:function(){var d=l.start,e=l.end,f=d.split(":")[0]-0,d=d.split(":")[1]-0,k=e.split(":")[0]-0,e=e.split(":")[1]-0;return f==24&&k==24||f>k?!0:(f*60+d)*60+0==(k*60+e)*60+0},_setColorEEMode:function(){if(B!=1){var d=q[0][0],f=q[0][1],p=e[0].DayOptions,s=e[0].NightOptions,w=e[0],x=k[0],y=q[0][2];x.NightOptions.Profile=3;if($("camera_radio_fullTime").checked)$("camera_useMode").value==
0?(d.TimeSection="1 00:00:00-24:00:00",f.TimeSection="0 00:00:00-24:00:00",y.TimeSection="0 00:00:00-24:00:00",x.NightOptions.SwitchMode=0,w.SwitchMode=3):(d.TimeSection="0 00:00:00-24:00:00",f.TimeSection="1 00:00:00-24:00:00",y.TimeSection="0 00:00:00-24:00:00",x.NightOptions.SwitchMode=3,w.SwitchMode=5);else if($("camera_radio_normal").checked)d.TimeSection="0 00:00:00-24:00:00",f.TimeSection="0 00:00:00-24:00:00",y.TimeSection="1 00:00:00-24:00:00",x.NightOptions.SwitchMode=4,w.SwitchMode=0;else{var z=
l.start,u=l.end,t=z.split(":")[0]-0,z=z.split(":")[1]-0,b=u.split(":")[0]-0,u=u.split(":")[1]-0;x.NightOptions.SunsetHour=b;x.NightOptions.SunsetMinute=u;x.NightOptions.SunsetSecond=0;x.NightOptions.SunriseHour=t;x.NightOptions.SunriseMinute=z;x.NightOptions.SunriseSecond=0;var o=chk10(b),r=chk10(u),Q=chk10(0),M=chk10(t),R=chk10(z),h=chk10(0),o=o+":"+r+":"+Q,M=M+":"+R+":"+h;d.TimeSection="1 "+M+"-"+o;f.TimeSection="1 "+o+"-"+M;y.TimeSection="0 00:00:00-24:00:00";x.NightOptions.SwitchMode=2;w.SwitchMode=
2;p.BeginHour=t;p.BeginMinute=z;p.BeginSecond=0;p.EndHour=b;p.EndMinute=u;p.EndSecond=0;s.BeginHour=b;s.BeginMinute=u;s.BeginSecond=0;s.EndHour=t;s.EndMinute=z;s.EndSecond=0}}},bind:function(){$("camera_default1").addEvent("click",f._onDefaultClick);$("camera_refresh1").addEvent("click",f._onRefreshClick);$("camera_confirm1").addEvent("click",f._onConfirmClick);$("camera_radio_fullTime").addEvent("click",f._getTimeMode);$("camera_radio_exittime").addEvent("click",f._getTimeMode);$("camera_radio_normal").addEvent("click",
f._getTimeMode);$("camera_dayTime_slider").addEvent("mouseover",function(){$("camera_slider_timeTitle").style.display="";f._showStartTime(this)}).addEvent("mouseout",function(){$("camera_slider_timeTitle").style.display="none"});$("camera_nightTime_slider").addEvent("mouseover",function(){$("camera_slider_timeTitle").style.display="";f._showEndTime(this)}).addEvent("mouseout",function(){$("camera_slider_timeTitle").style.display="none"})}}})();(function(){var k,q,e=0,p=0,l="",B="",f=!0,d=!1,m=!0,
K=0,s="",w="",x="",y=!1,z=!1,u=0,t=0,b=Page.cameraConfig.Tab.autoFocus={_sendContinue:!1,_Focusing:!1,_isZoom:!1,_clickType:!1,_isAutoFocus:!1,_dragStep:!1,_clearFocus:!1,_focusState:"Normal",_lastFocusStep:-1,_beginFocus:!1,init:function(){$("camera_tab_autoFocus").setStyles({display:"",position:"relative",top:"10000px"});b.videoInput=new VideoInput;b.translate();b.bind();$("camera_tab_autoFocus").setStyles({display:"none",position:"static",top:"0px"})},translate:function(){$("camera_autoFocus_label").set("text",
tl("w_zoomFocus"));$("camera_zoomText").set("text",tl("W_zoom"));$("camera_stepZoomText").set("text",tl("w_Step"));$("camera_focusZoomText").set("text",tl("w_Step"));$("camera_focusText").set("text",tl("W_focus"));$("camera_autoFocusText").set("text",tl("w_autoFocus"));$("camera_restoryAll").set("text",tl("w_restoryAll"));$("camera_restartAll").set("text",tl("w_Refresh"));$("camera_wideText").set("text",tl("w_wide"));$("camera_teleText").set("text",tl("w_tele"));$("camera_nearText").set("text",tl("w_near"));
$("camera_farText").set("text",tl("w_far"))},bind:function(){g_focusStatuss=1;k=new Slider($("camera_zoomL"),$("camera_zoomS"),{steps:2E3,wheel:!1,onChange:function(){},onComplete:function(d){e=d;f?(b._isAutoFocus=!0,b._saveZoomFocus()):f=!0}});q=new Slider($("camera_focusL"),$("camera_focusS"),{steps:2E3,wheel:!1,onChange:function(){},onComplete:function(d){p=d;b._lastFocusStep!=-1?(q.set(b._lastFocusStep),b._lastFocusStep=-1,f=!1):f?b._saveZoomFocus():f=!0}});$("camera_autoFocus").addEvent("click",
b._getautoFocus);$("camera_restoryAll").addEvent("click",b._setRestoryAll);$("camera_restartAll").addEvent("click",b._setTimeAuto);$("camera_zoomMore").addEvents({mousedown:function(d){b._preventM(d);b._zoomContinue(1,0)},mouseup:function(d){b._preventM(d);b._zoomEnd(1,0)},mouseout:function(d){b._preventM(d);b._zoomEnd(1,0)}});$("camera_zoomLess").addEvents({mousedown:function(d){b._preventM(d);b._zoomContinue(-1,0)},mouseup:function(d){b._preventM(d);b._zoomEnd(-1,0)},mouseout:function(d){b._preventM(d);
b._zoomEnd(-1,0)}});$("camera_focusMore").addEvents({mousedown:function(d){b._preventM(d);b._zoomContinue(1,1)},mouseup:function(d){b._preventM(d);b._zoomEnd(1,1)},mouseout:function(d){b._preventM(d);b._zoomEnd(1,1)}});$("camera_focusLess").addEvents({mousedown:function(d){b._preventM(d);b._zoomContinue(-1,1)},mouseup:function(d){b._preventM(d);b._zoomEnd(-1,1)},mouseout:function(d){b._preventM(d);b._zoomEnd(-1,1)}});$("camera_zoomL").addEvent("mousedown",function(){b._isZoom=!0});$("camera_focusL").addEvent("mousedown",
function(){b._isZoom=!1});$("camera_zoomEstop").addEvent("mousedown",function(b){b.stopPropagation()});$("camera_focusEstop").addEvent("mousedown",function(b){b.stopPropagation()});$("camera_zoomS").addEvent("mousedown",function(d){b._isZoom=!0;d.stopPropagation()});$("camera_focusS").addEvent("mousedown",function(d){b._isZoom=!1;d.stopPropagation();b._dragStep=q.step;b._clearFocus=window.setInterval(function(){if(b._dragStep==q.step&&b._focusState=="Normal"&&q.step!=b._lastFocusStep)p=b._dragStep,
b._lastFocusStep=b._dragStep,b._saveZoomFocus();b._dragStep=q.step},600);document.addEvent("mouseup",b._clearFocusDom)})},_clearFocusDom:function(){if(b._clearFocus&&(window.clearInterval(b._clearFocus),b._focusState!="Normal"))q.step=b._lastFocusStep;document.removeEvent("mouseup",b._clearFocusDom)},render:function(){$("main_videobox")&&$("main_videobox").removeClass("playback-video-container");overlayPlugins("camera-fouse-box");$("video1").getStyle("width")!=$("camera-fouse-box").getStyle("width")&&
$("video1").setStyle("width",$("camera-fouse-box").getStyle("width"));$("ocx")&&$("ocx").SetRegionNum(0);$("ocx")&&$("ocx").SetModuleMode(1);$("b_Stream1")?checkAuthority("Monitor_01")&&$("ocx")&&$("ocx").ConnectRealVideo(0,1):$("ocx")&&$("ocx").ConnectRealVideo(0,1);$("camera_zoomStep").value=20;$("camera_focusStep").value=20;b._setTimeAuto()},_preventM:function(b){Browser.Engine.trident?document.documentElement.releaseCapture():(b?b:event).preventDefault()},_setRestoryAll:function(){b._disabledButton(!0);
b._clearTimeAuto();B=b._stepReturn.delay(1E4);b.videoInput.adjustFocus(function(d){if(JSON.decode(d).result)$("camera_zoomStep").value=20,$("camera_focusStep").value=20,b._clearTimeAuto(),b._setTimeAuto()},0,-1,-1,!0)},_getautoFocus:function(){b._isAutoFocus=!0;b._disabledButton(!0);m=!0;b._clearTimeAuto();b._Focusing=!0;b.videoInput.autoFocus(function(d){if(JSON.decode(d).result)b._clearTimeAuto(),m=!1,b._isZoom=!0},0,!0)},_getFocusStatus:function(){l&&$clear(l);m=!0;b._clearTimeAuto();B=b._stepReturn.delay(1E4);
b.videoInput.getFocusStatus(function(f){if(JSON.decode(f).result){b._clearTimeAuto();m=!1;f=JSON.decode(f).params.status;if(!u||!t)u=f.ZoomMotorSteps||2E3,t=f.FocusMotorSteps||2E3,k.steps=k.range=k.max=u,q.steps=q.range=q.max=t;e=f.Zoom*u;p=f.Focus*t;b._clickType="longClick";b._setZoomFocus(e,p);f.Status=="Autofocus"?b._disabledButton(!0):b._disabledButton(!1);f.Status=="Normal"&&d?(l&&$clear(l),d=!1,$("camera_autoFocus").removeClass("ui-button-current"),$("camera_autoFocus").removeClass("ui-button-disabled")):
b._setTimeAuto()}else JSON.decode(f).error.code==403&&(b._clearTimeAuto(),b._disabledButton(!0))},0,!0)},_stepReturn:function(){K++;l&&$clear(l);!m||K>1?(b._disabledButton(!1),K=0):(b._disabledButton(!1),b._getFocusStatus())},_clearTimeAuto:function(){B&&$clear(B)},_setZoomFocus:function(d,e){f=!1;b._clickType=="longClick"&&k.set(d);f=!1;q.set(e);f=!0},_saveZoomFocus:function(){m=!0;b._disabledButton(!0);b._clickType=!1;var d=(e-0)/u,f=(p-0)/t;b._clearTimeAuto();B=b._stepReturn.delay(1E4);b.videoInput.adjustFocus(function(d){if(JSON.decode(d).result){b._Focusing=
!0;b._focusState="Autofocus";b._clearTimeAuto();m=!1;var e=window.setInterval(function(){b.videoInput.getFocusStatus(function(d){if(JSON.decode(d).result){if(JSON.decode(d).params.status.Status=="Normal")window.clearInterval(e),b._disabledButton(!1),b._Focusing=!1,b._focusState="Normal",b._beginFocus=!1}else window.clearInterval(e)},0,!0)},500)}},0,f,d,!0)},_setTimeAuto:function(){l&&$clear(l);$("estopAll").getStyle("display")=="none"&&b._disabledButton(!0);l=function(){d=!0;b._getFocusStatus()}.delay(1E3)},
_goZoomValue:function(b){var d=$("camera_zoomStep").value-0;e==u&&b>0||e==0&&b<0||(e=e-0+d*b-0,e>0&&e<u?k.set(e):e>=u?(e=u,k.set(u)):(e=0,k.set(0)))},_goFocusValue:function(b){var d=$("camera_focusStep").value-0;p==t&&b>0||p==0&&b<0||(p=p-0+d*b-0,p>0&&p<t?q.set(p):p>=t?(p=t,q.set(t)):(p=0,q.set(0)))},_goValue:function(d,e){e==0?(b._goZoomValue(d),b._isZoom=!0):(b._goFocusValue(d),b._isZoom=!1);y=!1},_zoomEnd:function(d,e){y=!0;s&&s.cancel();w&&w.cancel();if(z)b._disabledButton(!0),b._adjustContinue(e,
d,!0),z=!1,b._sendContinue=!1,b._Focusing||b._disabledButton(!1)},_adjustContinue:function(d,e,f){m=!0;if(d==0){var k=-1;if(e==1)var l=0.036;else e==-1&&(l=-0.036);f&&(l=0)}else d==1&&(l=-1,e==1?k=0.02:e==-1&&(k=-0.02),f&&(k=0));b.videoInput.adjustFocusContinuously(function(b){JSON.decode(b).result&&(m=!1)},0,k,l,!0)},_zoomContinue:function(d,f){if(f==0)b._isAutoFocus=!0;b._isAutoFocus&&f==1&&b.videoInput.stopAutoFocus(function(){},0,!1);w=s=null;z=y=!1;$("camera_zoomS");$("camera_focusS");parseInt($("camera_zoomS").style.left);
parseInt($("camera_focusS").style.left);x&&window.clearTimeout(x);x=window.setTimeout(function(){if(y)b._goValue(d,f);else{if(f==0){if(e==0&&d<0||e==u&&d>0)return}else if(p==0&&d<0||p==t&&d>0)return;b._clickType="longClick";b._Focusing=!0;b._adjustContinue(f,d);z=!0;b._sendContinue=!0}},200)},_disabledButton:function(d){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();d?($("camera_autoFocus").removeEvents(),$("camera_restoryAll").removeEvents(),$("camera_restartAll").removeEvents(),
$("camera_zoomLess").removeEvents(),$("camera_zoomMore").removeEvents(),b._isAutoFocus||($("camera_focusLess").removeEvents(),$("camera_focusMore").removeEvents()),$("camera_zoomL").disabled="disabled",$("camera_zoomS").disabled="disabled",$("camera_focusL").disabled="disabled",$("camera_focusS").disabled="disabled",$("camera_autoFocus").removeClass("ui-button-current"),$("camera_autoFocus").addClass("ui-button-disabled"),$("camera_restoryAll").removeClass("ui-button-current"),$("camera_restoryAll").addClass("ui-button-disabled"),
$("camera_restartAll").removeClass("ui-button-current"),$("camera_restartAll").addClass("ui-button-disabled"),$("camera_zoomEstop").setStyle("display","block"),$("camera_focusEstop").setStyle("display","block")):($("estopAll").setStyle("display","none"),$("camera_zoomL").disabled=!1,$("camera_zoomS").disabled=!1,$("camera_focusL").disabled=!1,$("camera_focusS").disabled=!1,$("camera_autoFocus").removeClass("ui-button-current"),$("camera_autoFocus").removeClass("ui-button-disabled"),$("camera_restoryAll").removeClass("ui-button-current"),
$("camera_restoryAll").removeClass("ui-button-disabled"),$("camera_restartAll").removeClass("ui-button-current"),$("camera_restartAll").removeClass("ui-button-disabled"),$("camera_zoomEstop").setStyle("display","none"),$("camera_focusEstop").setStyle("display","none"),$("camera_zoomLess").removeEvents(),$("camera_zoomMore").removeEvents(),b._isAutoFocus||($("camera_focusLess").removeEvents(),$("camera_focusMore").removeEvents()),$("camera_autoFocus").removeEvents(),$("camera_restoryAll").removeEvents(),
$("camera_restartAll").removeEvents(),$("camera_autoFocus").addEvent("click",b._getautoFocus),$("camera_restoryAll").addEvent("click",b._setRestoryAll),$("camera_restartAll").addEvent("click",b._setTimeAuto),$("camera_zoomMore").addEvents({mousedown:function(d){b._preventM(d);b._zoomContinue(1,0)},mouseup:function(d){b._preventM(d);b._zoomEnd(1,0)},mouseout:function(d){b._preventM(d);b._zoomEnd(1,0)}}),$("camera_zoomLess").addEvents({mousedown:function(d){b._preventM(d);b._zoomContinue(-1,0)},mouseup:function(d){b._preventM(d);
b._zoomEnd(-1,0)},mouseout:function(d){b._preventM(d);b._zoomEnd(-1,0)}}),b._isAutoFocus?b._isAutoFocus=!1:($("camera_focusMore").addEvents({mousedown:function(d){b._preventM(d);b._zoomContinue(1,1)},mouseup:function(d){b._preventM(d);b._zoomEnd(1,1)},mouseout:function(d){b._preventM(d);b._zoomEnd(1,1)}}),$("camera_focusLess").addEvents({mousedown:function(d){b._preventM(d);b._zoomContinue(-1,1)},mouseup:function(d){b._preventM(d);b._zoomEnd(-1,1)},mouseout:function(d){b._preventM(d);b._zoomEnd(-1,
1)}})))}}})()})();
