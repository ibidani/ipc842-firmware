(function(){var u=0,v=0,x=0,z;(function(){var i=Page.encodeConfig={Tab:[],MAXINTERAREANUM:0,init:function(){i.Tab.encode.init();i.Tab.snap.init();i.Tab.OSD.init();i.Tab.Inter.init();i.Tab.path.init();i.translate();isEnable("is_show_roi")?i._getCaps():$("video_Intel_tab").style.display="none";i.bind();i.render()},translate:function(){$("video_encode_tab").set("text",tl("w_Video Stream"));$("video_snap_tab").set("text",tl("w_Image Stream"));$("video_OSD_tab").set("text",tl("w_Video Splice"));$("video_Intel_tab").set("text",
tl("w_interArea"));$("video_path_tab").set("text",tl("w_Save Path"));$("video_help").set("title",tl("w_help"));$("page_encodeConfig").translation()},render:function(){$$(".video_tab_title.ui-tab-current").fireEvent("click")},_getCaps:function(){var d=new DevVideoEnc;d.instance(0,"Main",function(h){(u=JSON.decode(h).result)?d.getCaps(u,function(d){if(JSON.decode(d).result){d=JSON.decode(d).params.caps;d.MaxROICount?(i.MAXINTERAREANUM=d.MaxROICount,$("video_Intel_tab").style.display=""):$("video_Intel_tab").style.display=
"none";if(d.MaxROIWidth)v=d.MaxROIWidth;if(d.MaxROIHeight)x=d.MaxROIHeight;d.MaxROIHeight&&d.MaxROIWidth&&(z=getFrame(v,x))}else $("video_Intel_tab").style.display="none"}):$("video_Intel_tab").style.display="none"},!1)},_onTabTitleClick:function(){$("video1").setStyles({top:"0px",left:"0px"});i._onTabTitleClickHandle.delay(20,this)},_onTabTitleClickHandle:function(){var d=this.getProperty("data-for");$$(".video_tab_title").removeClass("ui-tab-current");$$(".video_tab_con").setStyle("display","none");
this.addClass("ui-tab-current");i.Tab[d].render();$("video_tab_"+d).setStyle("display","block")},bind:function(){$("video_help").addEvent("click",function(){openHelp("encodeConfig.htm")});$$(".video_tab_title").addEvent("click",i._onTabTitleClick)}}})();(function(){var i=null,d=null,h=null,n=null,k=null,o=!1,p=null,m=[32,48,64,80,96,128,160,192,224,256,320,384,448,512,640,768,896,1024,1280,1536,1792,2048,4096,6144,8192,10240,12288,14336,16384,18432,20480,22528,"Customize"],l=0,c=0,j=!1,g=!1,w=0,F=
["H.264"],H=!1,D=!1,y=null,s="",r=null,b=null,e=Page.encodeConfig.Tab.encode={init:function(){e.configManager=new ConfigManager;e.encodeManager=new EncodeManager;e.devVideoEnc=new DevVideoEnc;e.magicBox=new MagicBox;e.translate();e.bind();e.cpu=!1;e.RotateResolutionArr=[];e.magicBox.getProcessInfo(function(a){if(JSON.decode(a).result&&JSON.decode(a).params.info.contains("A5S"))e.cpu=!0},!1);e.magicBox.getProductDef("RotateResolutionLimit",function(a){if(JSON.decode(a).result)e.RotateResolutionArr=
JSON.decode(a).params.definition,e.RotateResolutionArr.indexOf("1_3M")>-1&&(e.RotateResolutionArr.erase("1_3M"),e.RotateResolutionArr.include("1.3M"))},!1)},translate:function(){$("video_mainStream_label").set("text",tl("w_MainStream"));$("video_streamType0_label").setProperty("text",tl("w_StreamType"));$("video_compress0_label").setProperty("text",tl("w_EncodeMode"));$("video_resolut0_label").setProperty("text",tl("w_Resolution"));$("video_fps0_label").setProperty("text",tl("w_FramePerSec"));$("video_bitctrl0_label").setProperty("text",
tl("w_BitRateControl"));var a=$("video_bitctrl0").getElements("option");a[0].setProperty("text",tl("w_CBR"));a[1].setProperty("text",tl("w_VBR"));$("video_quality0_label").setProperty("text",tl("w_Menu Quality"));a=$("video_quality0").getElements("option");a[0].setProperty("text",tl("w_Worst"));a[1].setProperty("text",tl("w_Worse"));a[2].setProperty("text",tl("w_Bad"));a[3].setProperty("text",tl("w_Good"));a[4].setProperty("text",tl("w_Better"));a[5].setProperty("text",tl("w_Best"));$("video_bitrefer0_label").setProperty("text",
tl("w_suggestbitrate"));$("video_bitrate0_label").setProperty("text",tl("w_Code Stream"));$("video_gop0_label").setProperty("text",tl("GOP"));$("video_waterSet_label").setProperty("text",tl("w_WaterMark Settings"));$("video_waterString_enable").setProperty("text",tl("w_WaterMark Character"));$("video_subStream_label").set("text",tl("w_SecondStream"));$("video_subStreamEnable_label").setProperty("text",tl("Enable"));$("video_streamType1_label").setProperty("text",tl("w_StreamType"));$("video_streamType1").getElements("option")[0].setProperty("text",
tl("w_General"));$("video_compress1_label").setProperty("text",tl("w_EncodeMode"));$("video_resolut1_label").setProperty("text",tl("w_Resolution"));$("video_fps1_label").setProperty("text",tl("w_FramePerSec"));$("video_bitctrl1_label").setProperty("text",tl("w_BitRateControl"));a=$("video_bitctrl1").getElements("option");a[0].setProperty("text",tl("w_CBR"));a[1].setProperty("text",tl("w_VBR"));$("video_quality1_label").setProperty("text",tl("w_Menu Quality"));a=$("video_quality1").getElements("option");
a[0].setProperty("text",tl("w_Worst"));a[1].setProperty("text",tl("w_Worse"));a[2].setProperty("text",tl("w_Bad"));a[3].setProperty("text",tl("w_Good"));a[4].setProperty("text",tl("w_Better"));a[5].setProperty("text",tl("w_Best"));$("video_bitrefer1_label").setProperty("text",tl("w_suggestbitrate"));$("video_bitrate1_label").setProperty("text",tl("w_Code Stream"));$("video_gop1_label").setProperty("text",tl("GOP"));$("video_encode_default").setProperty("text",tl("w_DefaultConfig"));$("video_encode_refresh").setProperty("text",
tl("w_Refresh"));$("video_encode_confirm").setProperty("text",tl("w_Confirm"));$$("#video_mainStreamLink_label,#video_subStreamLink_label").setProperty("text",tl("w_RTSP link"))},render:function(){j=!1;c=l=0;$("video_extraAudioList").empty();if(ExtraStreamNum<2)$("video_extraAudioList").style.display="none";else{$("video_extraAudioList").style.display="";for(var a=0;a<ExtraStreamNum;a++)$("video_extraAudioList").options.add(new Option(tl("w_SecondStream"+(a+1)),a))}$("video_streamType0").empty();
ALARM_IN_NUMBER<1&&!hasSDCard?($("video_streamType0").options.add(new Option(tl("w_General"),"general")),$("video_streamType0").options.add(new Option(tl("w_Motion"),"motion"))):($("video_streamType0").options.add(new Option(tl("w_General"),"general")),$("video_streamType0").options.add(new Option(tl("w_Motion"),"motion")),$("video_streamType0").options.add(new Option(tl("w_Alarm"),"alarm")));ishasIntellent&&e.configManager.getConfig("IntelliTrackScene",function(a,f){if(f.result){var b=f.params.table;
g=b[0].Enable&&b[0].Category!="FullScene"}},!1);var f=function(){e.configManager.getConfig(["Encode","VideoWaterMark","MediaGlobal","VideoEncodeROI","VideoInOptions","EncodeEncrypt","EncodeAuth"],function(a){if(JSON.decode(a).result)a=JSON.decode(a).params,i=a[0].params.table,d=$unlink(i),k=a[1].params.table,p=a[2].params.table,H=a[3].params.table[0].Main,D=a[4].params.table[0].Rotate90,r=a[5].result&&a[5].params.table,b=a[6].result&&a[6].params.table,p.SnapFormatAs!=void 0&&isEnable("is_has_SnapFormatAs")?
(o=!0,$("video_showSnapFormatAs").style.display=""):$("video_showSnapFormatAs").style.display="none",e.encodeManager.getConfigCaps(i,function(a){if(JSON.decode(a).result)h=JSON.decode(a).params.caps,n=$unlink(h),e._initPage(0),e._putvalue(0);j=!0})})};e.devVideoEnc.getCaps(u,function(a){if(JSON.decode(a).result)if(a=JSON.decode(a).params.caps,F=a.SvcEncodeTypes||["H.264"],w=a.MaxSVCTLevel||0,w==0)$("video_mainSvc").setStyle("display","none"),$("video_extrSvc").setStyle("display","none");else{if($("video_svc0").getSelected().length==
0){$("video_svc0").empty();for(a=0;a<w;a++)a==0?$("video_svc0").options.add(new Option("1(off)",a+1)):$("video_svc0").options.add(new Option(a+1,a+1));$("video_mainSvc").setStyle("display","")}if($("video_svc1").getSelected().length==0){$("video_svc1").empty();for(a=0;a<w;a++)a==0?$("video_svc1").options.add(new Option("1(off)",a+1)):$("video_svc1").options.add(new Option(a+1,a+1));$("video_extrSvc").setStyle("display","")}}f()});e.configManager.getConfig("RTSP",e._getRtspPort,!1)},_initPage:function(){e._putCapMain(h,
0,0);e._putCapExtr(h,0,0)},_setCompressionDom:function(a,f){a.contains("H.264")&&(a="H.264");switch(f){case 0:F.contains(a)?$("video_mainSvc").removeClass("fn-hide"):$("video_mainSvc").addClass("fn-hide");a.contains("SVAC")?$("video_svac").removeClass("fn-hide"):$("video_svac").addClass("fn-hide");break;case 1:F.contains(a)?$("video_extrSvc").removeClass("fn-hide"):$("video_extrSvc").addClass("fn-hide")}},_putvalue:function(){e._putvalueExtr(d,0,0);e._putvalueMain(d,0,0);e._putvalueWater(k,0)},_putCapMain:function(a,
f,t){var b=a[f].MainFormat[t];$("video_streamType0").selectedIndex=t;$("video_compression0").innerHTML="";b.Video.H264Profile&&b.Video.H264Profile.each(function(a){$("video_compression0").options.add(new Option(tl("w_"+a),tl("w_"+a)))});b.Video.CompressionTypes.each(function(a){bool_k6&&a=="MJPG"||(a!="H.264"?$("video_compression0").options.add(new Option(tl(a),a)):b.Video.H264Profile||($("video_compression0").options.add(new Option(tl(a),a)),$("video_compression0").options.add(new Option(tl("H.264B"),
"H.264B")),$("video_compression0").options.add(new Option(tl("H.264H"),"H.264H"))))});t==0&&e._insertResolution(b.Video.ResolutionTypes,$("video_resolution0"));$("video_fps0").innerHTML="";for(a=0;a<b.Video.FPSMax;a++)$("video_fps0").options.add(new Option(a+1,a+1));if(currenVendor=="RVi")$$("#rtsp_mainstream_content,#rtsp_mainstream_label").setStyle("display","block"),$("video_mainStreamLink").innerHTML="rtsp://username:password@"+location.hostname+":"+y+"/cam/realmonitor?channel=1&subtype=0"},_putCapExtr:function(a,
f,t){var b;if(h[f].ExtraFormat==null)$("video_subStream_con").style.display="none",$("video_showSnapExtra").style.display="none";else{b=a[f].ExtraFormat[t];$("video_compression1").innerHTML="";b.Video.H264Profile&&b.Video.H264Profile.each(function(a){$("video_compression1").options.add(new Option(tl("w_"+a),tl("w_"+a)))});b.Video.CompressionTypes.each(function(a){bool_k6&&a=="MJPG"||(a!="H.264"?$("video_compression1").options.add(new Option(tl(a),a)):b.Video.H264Profile||($("video_compression1").options.add(new Option(tl(a),
a)),$("video_compression1").options.add(new Option(tl("H.264B"),"H.264B")),$("video_compression1").options.add(new Option(tl("H.264H"),"H.264H"))))});e._insertResolution(b.Video.ResolutionTypes,$("video_resolution1"));$("video_fps1").innerHTML="";if(b.Video.FPSMax==0)a=d[0].ExtraFormat[c].Video.FPS,$("video_fps1").options.add(new Option(a,a));for(a=0;a<b.Video.FPSMax;a++)$("video_fps1").options.add(new Option(a+1,a+1));if(currenVendor=="RVi")$$("#rtsp_substream_content,#rtsp_substream_label").setStyle("display",
"block"),a=$("video_extraAudioList").value-0+1,a="rtsp://username:password@"+location.hostname+":"+y+"/cam/realmonitor?channel=1&subtype="+a,$("video_subStreamLink").innerHTML=a}},_getRtspPort:function(a){if(JSON.decode(a).result)y=JSON.decode(a).params.table.Port},_insertResolution:function(a,f){f.innerHTML="";a.each(function(a,b){a=="720"&&(a="720P");a=="1080"&&(a="1080P");a=="1_3M"&&(a="1.3M");a=="2_5M"&&(a="2.5M");a=="BCIF"?f.options.add(new Option("2CIF ("+getWidthH(a)+")",a)):a=="5_1M"?f.options.add(new Option("5M ("+
getWidthH(a)+")",a)):a=="2592x2592"?f.options.add(new Option("6M ("+getWidthH(a)+")",a)):f.options.add(new Option(a+" ("+getWidthH(a)+")",a));g&&(f.options[b].title=tl("w_resolutionChange"))})},_putvalueMain:function(a,f,t){var c=a[f].MainFormat[t];$("video_streamType0").selectedIndex=t;t==0?($("video_resolution0").disabled=!1,$("video_resolution0").value=getFrame(c.Video.Width,c.Video.Height),$("video_compression0").disabled=!1):($("video_resolution0").disabled=!0,$("video_resolution0").value=getFrame(c.Video.Width,
c.Video.Height),$("video_compression0").disabled=!0);$("video_quality0").value=c.Video.Quality;$("video_gop0").value=c.Video.GOP;if(w!=0)$("video_svc0").value=c.Video.SVCTLayer;a[f].MainFormat[0].Video.Compression=="H.264"&&a[f].MainFormat[0].Video.Profile=="Baseline"?$("video_compression0").value="H.264B":a[f].MainFormat[0].Video.Compression=="H.264"&&a[f].MainFormat[0].Video.Profile=="High"?$("video_compression0").value="H.264H":$("video_compression0").value=a[f].MainFormat[0].Video.Compression;
e._setCompressionDom($("video_compression0").value,0);if($("video_compression0").selectedIndex<=0)$("video_compression0").selectedIndex=0;if($("video_resolution0").selectedIndex<=0)$("video_resolution0").selectedIndex=0;c.Video.Compression=="MJPG"?($("video_bitctrl0").value="CBR",$("video_bitctrl0").disabled=!0,$("video_showQuality0").style.display="none",$("video_showGop0").style.display="none"):($("video_showGop0").style.display="block",$("video_bitctrl0").disabled=!1,$("video_bitctrl0").value=
c.Video.BitRateControl,$("video_bitctrl0").selectedIndex==0?$("video_showQuality0").style.display="none":$("video_showQuality0").style.display="");$("video_fps0").selectedIndex=c.Video.FPS-1;a=$("video_fps0").getElements("option").length;if(c.Video.FPS>a)$("video_fps0").selectedIndex=a-1,isEnable("special_GOP_728WP")?$("video_gop0").value=a*2:$("video_gop0").value=12;isEnable("special_GOP_728WP")?$("video_gop0_range").setProperty("text","("+($("video_fps0").selectedIndex+1)+"~150)"):$("video_gop0_range").setProperty("text",
"(12~150)");f=n[f].MainFormat[t].Video.BitRateOptions;e._initBitSelt(f,c.Video.BitRate,0);$("video_bitrefer0").setProperty("text",f[0]+"-"+f[1]+"Kb/S");if(r&&b&&($("video_svac_svc").value=c.Video.SVCTLayer<=2?c.Video.SVCTLayer:1,$("video_svcPwd_enable").checked=r[0][0].EncryptEnable,$("svcPsd").value=r[0][0].Key,$("video_encodeAuth_enable").checked=b[0].Enable,!r[0][0].EncryptEnable))$("svcPsd").disabled=!0},_A5SBitMinMax:function(a){return $("video_resolution0").value=="1080P"&&$("video_compression0").value==
"MJPG"&&e.cpu?(a[0]>16384&&(a[0]=16384),a[1]>16384&&(a[1]=16384),a):!1},_putvalueExtr:function(a,f,b){if(!(a[f].ExtraFormat[b]==null||$("video_subStream_con").style.display=="none")){a=a[f].ExtraFormat[b];$("video_resolution1").value=getFrame(a.Video.Width,a.Video.Height);$("video_quality1").value=a.Video.Quality;$("video_gop1").value=a.Video.GOP;if(w!=0)$("video_svc1").value=a.Video.SVCTLayer;$("video_subStream_enable").checked=a.VideoEnable;a.Video.Compression=="H.264"&&a.Video.Profile=="Baseline"?
$("video_compression1").value="H.264B":a.Video.Compression=="H.264"&&a.Video.Profile=="High"?$("video_compression1").value="H.264H":$("video_compression1").value=a.Video.Compression;e._setCompressionDom($("video_compression1").value,1);if($("video_compression1").selectedIndex<=0)$("video_compression1").selectedIndex=0;if($("video_resolution1").selectedIndex<=0){$("video_resolution1").selectedIndex=0;var c=getWidthH($("video_resolution1").value).split("*");a.Video.Width=c[0]-0;a.Video.Height=c[1]-
0}a.Video.Compression=="MJPG"?($("video_bitctrl1").value="CBR",$("video_bitctrl1").disabled=!0,$("video_showQuality1").style.display="none",$("video_showGop1").style.display="none"):($("video_showGop1").style.display="",$("video_bitctrl1").disabled=!1,$("video_bitctrl1").value=a.Video.BitRateControl,$("video_bitctrl1").selectedIndex==0?$("video_showQuality1").style.display="none":$("video_showQuality1").style.display="");c=$("video_fps1").length;c<a.Video.FPS?$("video_fps1").selectedIndex=c-1:$("video_fps1").value=
a.Video.FPS;c=$("video_fps1").getElements("option").length;if(a.Video.FPS>c)$("video_fps1").selectedIndex=c-1,isEnable("special_GOP_728WP")?$("video_gop1").value=$("video_fps1").value*2:$("video_gop1").value=12;isEnable("special_GOP_728WP")?$("video_gop1_range").setProperty("text","("+($("video_fps1").value-0)+"~150)"):$("video_gop1_range").setProperty("text","(12~150)");f=n[f].ExtraFormat[b].Video.BitRateOptions;e._initBitSelt(f,a.Video.BitRate,1);$("video_bitrefer1").setProperty("text",f[0]+"-"+
f[1]+"Kb/S")}},_putvalueWater:function(a,f){var b=a[f];$("video_water_enable").checked=b.Enable;$("video_water_enable").checked?$("video_water_show").style.display="":$("video_water_show").style.display="none";$("video_waterString").value=b.String},_initBitSelt:function(a,f,b){var c=!1;$("video_bitrate"+b).set("text","");for(var d=[],g=0;g<m.length-1;g++)m[g]>=a[0]&&m[g]<=a[1]&&($("video_bitrate"+b).options.add(new Option(m[g],m[g])),m[g]==f&&(c=!0),d.push(m[g]));var h=((a[0]+a[1])/2).toInt();$("video_bitrate"+
b).options.add(new Option(tl("w_Customize"),"customize"));if(c)$("video_bitrate"+b).value=f,$("video_customwrap"+b).style.display="none",$("video_custom"+b).value=f;else if(j){for(g=a=0;g<d.length;g++)if(d[g]>=h){$("video_customwrap"+b).style.display="none";$("video_bitrate"+b).value=d[g];a=1;break}if(a==0)$("video_bitrate"+b).value="customize",$("video_customwrap"+b).style.display="",$("video_custom"+b).value=h}else if(a[0]>a[1]&&(a[1]=a[0]),f>=a[0]&&f<=a[1])$("video_bitrate"+b).value="customize",
$("video_customwrap"+b).style.display="",$("video_custom"+b).value=f;else if(d=e._getSuggestBitrate(a[0],a[1]),d<0?$("video_bitrate"+b).selectedIndex=0:$("video_bitrate"+b).value=d,$("video_customwrap"+b).style.display="none",$("video_bitrate"+b).selectedIndex<0||isNaN(getSelect("video_bitrate"+b)))$("video_bitrate"+b).value="customize",$("video_customwrap"+b).style.display="",$("video_custom"+b).value=d},_getSuggestBitrate:function(a,f){for(var b=[32,48,64,80,96,128,160,192,224,256,320,384,448,512,
640,768,896,1024,1280,1536,1792,2048,4096,6144,8192,10240,12288,14336,16384,18432,20480,22528],c=(a+f)/2,d=0,d=0;d<b.length;d++)if(b[d]>=c)if(b[d]>f)break;else return b[d];return f},_saveJsonEncode:function(a){var f=$unlink(d),b=f[a].MainFormat[l];if(l==0)$("video_compression0").value=="H.264"?(b.Video.Profile="Main",b.Video.Compression="H.264",f[a].MainFormat[1].Video.Profile="Main",f[a].MainFormat[1].Video.Compression="H.264",f[a].MainFormat[2].Video.Profile="Main",f[a].MainFormat[2].Video.Compression=
"H.264"):$("video_compression0").value=="H.264B"?(b.Video.Profile="Baseline",b.Video.Compression="H.264",f[a].MainFormat[1].Video.Profile="Baseline",f[a].MainFormat[1].Video.Compression="H.264",f[a].MainFormat[2].Video.Profile="Baseline",f[a].MainFormat[2].Video.Compression="H.264"):$("video_compression0").value=="H.264H"?(b.Video.Profile="High",b.Video.Compression="H.264",f[a].MainFormat[1].Video.Profile="High",f[a].MainFormat[1].Video.Compression="H.264",f[a].MainFormat[2].Video.Profile="High",
f[a].MainFormat[2].Video.Compression="H.264"):(b.Video.Compression=$("video_compression0").value,f[a].MainFormat[1].Video.Compression=$("video_compression0").value,f[a].MainFormat[2].Video.Compression=$("video_compression0").value);var e=getWidthH($("video_resolution0").value).split("*");f[a].MainFormat[0].Video.Width=e[0]-0;f[a].MainFormat[0].Video.Height=e[1]-0;f[a].MainFormat[1].Video.Width=e[0]-0;f[a].MainFormat[1].Video.Height=e[1]-0;f[a].MainFormat[2].Video.Width=e[0]-0;f[a].MainFormat[2].Video.Height=
e[1]-0;if(w!=0)f[a].MainFormat[1].Video.SVCTLayer=$("video_svc0").value-0,f[a].MainFormat[2].Video.SVCTLayer=$("video_svc0").value-0;b.Video.FPS=$("video_fps0").value-0;if($("video_compression0").value=="MJPG")for(e=0;e<3;e++)f[a].MainFormat[e].Video.BitRateControl="CBR";else b.Video.BitRateControl=$("video_bitctrl0").value;b.Video.Quality=$("video_quality0").value-0;b.Video.BitRate=$("video_bitrate0").value=="customize"?$("video_custom0").value-0:$("video_bitrate0").value-0;b.Video.GOP=$("video_gop0").value-
0;if($("video_subStream_con").style.display!="none"&&f[a].ExtraFormat[c]!=null){b=f[a].ExtraFormat[c];$("video_compression1").value=="H.264"?(b.Video.Profile="Main",b.Video.Compression="H.264"):$("video_compression1").value=="H.264B"?(b.Video.Profile="Baseline",b.Video.Compression="H.264"):$("video_compression1").value=="H.264H"?(b.Video.Profile="High",b.Video.Compression="H.264"):b.Video.Compression=$("video_compression1").value;e=getWidthH($("video_resolution1").value).split("*");f[a].ExtraFormat[c].Video.Width=
e[0]-0;f[a].ExtraFormat[c].Video.Height=e[1]-0;b.Video.FPS=$("video_fps1").value-0;if($("video_compression1").value=="MJPG")for(e=0;e<3;e++)f[a].ExtraFormat[e].Video.BitRateControl="CBR";else b.Video.BitRateControl=$("video_bitctrl1").value;b.Video.Quality=$("video_quality1").value-0;$("video_subStream_enable").checked?b.VideoEnable=!0:(b.VideoEnable=!1,b.AudioEnable=!1);b.Video.BitRate=$("video_bitrate1").value=="customize"?$("video_custom1").value-0:$("video_bitrate1").value-0;b.Video.GOP=$("video_gop1").value-
0}if(o)if(p.SnapFormatAs=="MainFormat")f[a].SnapFormat[0].Video.Width=f[a].MainFormat[0].Video.Width,f[a].SnapFormat[0].Video.Height=f[a].MainFormat[0].Video.Height,f[a].SnapFormat[1].Video.Width=f[a].MainFormat[0].Video.Width,f[a].SnapFormat[1].Video.Height=f[a].MainFormat[0].Video.Height,f[a].SnapFormat[2].Video.Width=f[a].MainFormat[0].Video.Width,f[a].SnapFormat[2].Video.Height=f[a].MainFormat[0].Video.Height;else{if(p.SnapFormatAs=="ExtraFormat")f[a].SnapFormat[0].Video.Width=f[a].ExtraFormat[0].Video.Width,
f[a].SnapFormat[0].Video.Height=f[a].ExtraFormat[0].Video.Height,f[a].SnapFormat[1].Video.Width=f[a].ExtraFormat[0].Video.Width,f[a].SnapFormat[1].Video.Height=f[a].ExtraFormat[0].Video.Height,f[a].SnapFormat[2].Video.Width=f[a].ExtraFormat[0].Video.Width,f[a].SnapFormat[2].Video.Height=f[a].ExtraFormat[0].Video.Height}else f[a].SnapFormat[0].Video.Width=f[a].MainFormat[0].Video.Width,f[a].SnapFormat[0].Video.Height=f[a].MainFormat[0].Video.Height,f[a].SnapFormat[1].Video.Width=f[a].MainFormat[0].Video.Width,
f[a].SnapFormat[1].Video.Height=f[a].MainFormat[0].Video.Height;return f},_checkBitRate:function(){for(var a=d[0],b,c,e=1;e<3;e++)if(c=a.MainFormat[e].Video.BitRate,b=n[0].MainFormat[e].Video.BitRateOptions,b[1]<c||b[0]>c)a.MainFormat[e].Video.BitRate=b[1]},_selectBitRate:function(a,b){if(a.value=="customize"){$("video_customwrap"+b).style.display="";var c=$("video_bitrefer"+b).getProperty("text").split("-"),c=[parseInt(c[0]),parseInt(c[1])],e=$("video_custom"+b).value-0;if(e>c[1]||e<c[0])$("video_custom"+
b).value=((c[0]+c[1])/2).toInt()}else $("video_customwrap"+b).style.display="none"},_postConfig:function(){var a=$("video_resolution0").value,f=$("video_resolution1").value,a=e.RotateResolutionArr.contains(a)&&e.RotateResolutionArr.contains(f);if(D&&!a)a="",Site.currentLanguage=="English"&&(D==1?a="90\u00b0":a="270\u00b0"),remarkDisplay("video_remark0",tl("w_noResolution")+a,3E3,1);else if(!checkedImportLimt("video_waterString",0)&&$("video_water_enable").checked)remarkDisplay("video_remark0",tl("w_watermark"),
3E3,1);else{k[0].Enable=$("video_water_enable").checked;if(k[0].Enable)k[0].String=$("video_waterString").value;d=e._saveJsonEncode(0);a=$("video_fps0").options.length;if(d[0].MainFormat[1].Video.FPS>a||d[0].MainFormat[2].Video.FPS>a)d[0].MainFormat[1].Video.FPS=a,d[0].MainFormat[2].Video.FPS=a;if((d[0].MainFormat[0].Video.Width>v||d[0].MainFormat[0].Video.Height>x)&&H&&v&&x)remarkDisplay("video_remark0",tl("w_errorMaxROI")+z,3E3,1);else{e._checkBitRate();a=["Encode","VideoWaterMark"];f=[d,k];if($("video_compression0").value==
"SVAC")r[0][0].EncryptEnable=$("video_svcPwd_enable").checked,r[0][0].Key=$("svcPsd").value,b[0].Enable=$("video_encodeAuth_enable").checked,d[0].MainFormat[0].Video.SVCTLayer=$("video_svac_svc").value-0,d[0].MainFormat[1].Video.SVCTLayer=$("video_svac_svc").value-0,d[0].MainFormat[2].Video.SVCTLayer=$("video_svac_svc").value-0,a.push("EncodeEncrypt","EncodeAuth"),f.push(r,b);e.configManager.setConfig(a,f,e._postResult)}}},_postResult:function(a){if($("ENCODECFG")!=null)if(checkPostResult(a))remarkDisplay("video_remark0",
tl("Succeed in saving configure"),3E3,0),i=$unlink(d),i[0].MainFormat[0].Video.Compression=="SVAC"?(SVAC.isSVAC=!0,SVAC.isSVC=i[0].MainFormat[0].Video.SVCTLayer-1,SVAC.isPwd=r[0][0].EncryptEnable,SVAC.pwd=r[0][0].Key,SVAC.isPwd&&$("ocx")&&$("ocx").SetDecodeKey(SVAC.pwd),SVAC.isSVC?(a=$$("#video_svc_wrap .ui-video-wrap-current")[0].getProperty("data-level")-0,$("ocx")&&$("ocx").ChooseFrame(a)):$("ocx")&&$("ocx").ChooseFrame(0)):SVAC.isSVAC=!1,e.encodeManager.getConfigCaps(i,function(a){h=JSON.decode(a).params.caps;
n=$unlink(h)});else for(var a=JSON.decode(a).params,b=0,c=0;c<a.length;c++){if(a[c]!=null&&!a[c].result)for(var j=a[c].params.options,g=0;g<j.length;g++)j[g]=="CapsNotSupport"&&(b=1);b==1?remarkDisplay("video_remark0",tl("Rorateresolutiong Saving failure Smart"),3E3,1):remarkDisplay("video_remark0",tl("Saving failure"),3E3,1)}},_getDefault:function(){e.configManager.getDefault(["Encode","VideoWaterMark","EncodeEncrypt","EncodeAuth"],function(a){if(JSON.decode(a).result){j=!1;var f=JSON.decode(a).params,
a=f[0].params.table,c=f[1].params.table;r=f[2].result&&f[2].params.table;b=f[3].result&&f[3].params.table;for(f=0;f<3;f++)d[0].MainFormat[f].Video=$unlink(a[0].MainFormat[f].Video),d[0].ExtraFormat[f].Video=$unlink(a[0].ExtraFormat[f].Video),d[0].ExtraFormat[f].VideoEnable=$unlink(a[0].ExtraFormat[f].VideoEnable);e._putvalueWater(c,0);e._putJsonEncode(d,!1);j=!0;remarkDisplay("video_remark0",tl("Defaultsuccess"),3E3,0)}else remarkDisplay("video_remark0",tl("Defaultfailure"),3E3,1)})},_refreshTab:function(){e.configManager.getConfig(["Encode",
"VideoWaterMark","VideoInOptions","EncodeEncrypt","EncodeAuth"],function(a){if(JSON.decode(a).result){if($("ENCODECFG")!=null){j=!1;var a=JSON.decode(a).params,c=a[0].params.table,g=a[1].params.table;D=a[2].params.table[0].Rotate90!=0;r=a[3].result&&a[3].params.table;b=a[4].result&&a[4].params.table;d=$unlink(c);k=$unlink(g);e._putvalueWater(g,0);e._putJsonEncode(c,!1);j=!0;remarkDisplay("video_remark0",tl("Operateingsuccess"),3E3,0)}}else remarkDisplay("video_remark0",tl("Operateingfailure"),3E3,
1)})},_refreshEncodeCap:function(a){var b,j;b=e._saveJsonEncode(0);e.encodeManager.getConfigCaps(b,function(g){if($("ENCODECFG")!=null&&JSON.decode(g).result){n=j=JSON.decode(g).params.caps;d=b;s="";for(g=0;g<ExtraStreamNum;g++)if(j[0].ExtraFormat[g].Video.FPSMax==0&&d[0].ExtraFormat[g].VideoEnable){if(g==c)$("video_subStream_enable").checked=!1;d[0].ExtraFormat[g].VideoEnable=!1;s+=tl("w_SecondStream")+(g+1)}e._refreshEncodeCapDate(a,0,j,b);s!=""&&remarkDisplay("video_remark0",tl("w_extraTips")+
s,3E3,2)}})},_refreshEncodeCapDate:function(a,b,d,g){a==0?(e._putCapMain(d,b,l),e._putvalueMain(g,b,l),j=!1,e._putCapExtr(d,b,c),e._putvalueExtr(g,b,c),j=!0):(j=!1,e._putCapMain(d,b,l),e._putvalueMain(g,b,l),j=!0,e._putCapExtr(d,b,c),e._putvalueExtr(g,b,c))},_putJsonEncode:function(a,b){e.encodeManager.getConfigCaps(a,function(b){if($("ENCODECFG")!=null&&JSON.decode(b).result)b=JSON.decode(b).params.caps,h=$unlink(b),n=$unlink(h),e._putCapMain(b,0,l,a),e._putvalueMain(a,0,l),e._putCapExtr(b,0,c),
e._putvalueExtr(a,0,c)},b)},bind:function(){$("video_water_enable").addEvent("click",function(){this.checked?$("video_water_show").style.display="":$("video_water_show").style.display="none"});$("video_encode_default").addEvent("click",e._getDefault);$("video_encode_refresh").addEvent("click",e._refreshTab);$("video_encode_confirm").addEvent("click",e._postConfig);$("video_extraAudioList").addEvent("change",function(){j=!1;d=e._saveJsonEncode(0);c=this.selectedIndex;e._putCapExtr(n,0,c);e._putvalueExtr(d,
0,c);j=!0});$("video_compression0").addEvent("change",function(){e._refreshEncodeCap(0);var a=$("video_compression0").value;e._setCompressionDom(a,0)});$("video_resolution0").addEvent("change",function(){g&&remarkDisplay("video_remark0",tl("w_resolutionChange"),3E3,2);e._refreshEncodeCap(0)});$("video_gop0").addEvent("blur",function(){limit(this,150);isEnable("special_GOP_728WP")?limitMin(this,$("video_fps0").value-0):limitMin(this,12)});$("video_gop0").addEvent("keyup",function(){limitEx(this,150)});
$("video_bitrate0").addEvent("change",function(){e._selectBitRate(this,0)});$("video_compression1").addEvent("change",function(){e._refreshEncodeCap(1);var a=$("video_compression1").value;e._setCompressionDom(a,1)});$("video_resolution1").addEvent("change",function(){g&&remarkDisplay("video_remark0",tl("w_resolutionChange"),3E3,2);e._refreshEncodeCap(1)});$("video_gop1").addEvent("blur",function(){limit(this,150);isEnable("special_GOP_728WP")?limitMin(this,$("video_fps1").value-0):limitMin(this,12)});
$("video_gop1").addEvent("keyup",function(){limitEx(this,150)});$("video_bitrate1").addEvent("change",function(){e._selectBitRate(this,1)});$("video_custom0").addEvents({keyup:function(){var a=$("video_bitrefer0").getProperty("text").split("-");limitEx(this,parseInt(a[1]))},blur:function(){var a=$("video_bitrefer0").getProperty("text").split("-");limit(this,parseInt(a[1]));limitMin(this,parseInt(a[0]))}});$("video_custom1").addEvents({keyup:function(){var a=$("video_bitrefer1").getProperty("text").split("-");
limitEx(this,parseInt(a[1]))},blur:function(){var a=$("video_bitrefer1").getProperty("text").split("-");limit(this,parseInt(a[1]));limitMin(this,parseInt(a[0]))}});$("video_streamType0").addEvent("change",function(){j=!1;d=e._saveJsonEncode(0);l=this.selectedIndex;e._putCapMain(n,0,l);e._putvalueMain(d,0,l);j=!0});$("video_bitctrl0").addEvent("change",function(){this.selectedIndex==0?$("video_showQuality0").style.display="none":$("video_showQuality0").style.display=""});$("video_bitctrl1").addEvent("change",
function(){this.selectedIndex==0?$("video_showQuality1").style.display="none":$("video_showQuality1").style.display=""});isEnable("special_GOP_728WP")?($("video_fps0").addEvent("change",function(){$("video_gop0").value=(this.value-0)*2;$("video_gop0_range").setProperty("text","("+this.value+"~150)");e._refreshEncodeCap(0)}),$("video_fps1").addEvent("change",function(){$("video_gop1").value=(this.value-0)*2;$("video_gop1_range").setProperty("text","("+this.value+"~150)");e._refreshEncodeCap(1)})):
($("video_fps0").addEvent("change",function(){$("video_gop0").value=12;$("video_gop0_range").setProperty("text","(12~150)");e._refreshEncodeCap(0)}),$("video_fps1").addEvent("change",function(){$("video_gop1").value=12;$("video_gop1_range").setProperty("text","(12~150)");e._refreshEncodeCap(1)}));$("video_svc0").addEvent("change",function(){d[0].MainFormat[0].Video.SVCTLayer=$("video_svc0").value-0});$("video_svc1").addEvent("change",function(){var a=$("video_extraAudioList").value?$("video_extraAudioList").value:
0;d[0].ExtraFormat[a].Video.SVCTLayer=$("video_svc1").value-0});$("video_subStream_enable").addEvent("click",function(){if(this.checked==!0&&n[0].ExtraFormat[c].Video.FPSMax==0)remarkDisplay("video_remark0",tl("w_extraAlarm")+tl("w_SecondStream")+(c+1),3E3,1),this.checked=!1});$("video_svcPwd_enable").addEvent("click",function(){this.checked?$("svcPsd").disabled=!1:$("svcPsd").disabled=!0})}}})();(function(){function i(c){c=(1/c).round();c>7?($("video_snapSpeed").value="Customized",$("video_snapSpeed_customized_wrap").style.display=
"block"):($("video_snapSpeed").value="-"+c,$("video_snapSpeed_customized_wrap").style.display="none");$("video_snapSpeed_customized").value=c}var d=null,h=null,n=!1,k=null,o=0,p=null,m=5E4,l=Page.encodeConfig.Tab.snap={init:function(){l.configManager=new ConfigManager;l.translate();l.bind();(new MagicBox).getProductDef("SnapshotInterval",function(c,d){if(d.result)p=d.params.definition,m=p==null?5E4:p-0,$("video_snapinterval").set("text","(1-"+m+")")},!1)},translate:function(){$("video_snaptype_label").setProperty("text",
tl("w_SnapType"));var c=$("video_snaptype").getElements("option");c[0].setProperty("text",tl("w_General Snap"));c[1].setProperty("text",tl("w_Trigger Snap"));$("video_imgsize_label").setProperty("text",tl("w_Image Size"));$("video_imgQuality_label").setProperty("text",tl("w_Image Quality"));c=$("video_snap_imgQuality").getElements("option");c[0].setProperty("text",tl("w_Worst"));c[1].setProperty("text",tl("w_Worse"));c[2].setProperty("text",tl("w_Bad"));c[3].setProperty("text",tl("w_Good"));c[4].setProperty("text",
tl("w_Better"));c[5].setProperty("text",tl("w_Best"));$("video_SnapFormatAs_label").set("text",tl("w_Snapstream"));$("video_snapMain_label").set("text",tl("w_MainStream"));$("video_snapSub_label").set("text",tl("w_SecondStream"));$("video_snapSpeed_label").setProperty("text",tl("w_SnapSpeed"));$("video_snapSpeed").getElements("option").each(function(c,d){c.value!="Customized"?c.setProperty("text",d+1+" "+tl("w_S/P")):c.setProperty("text",tl("w_Customize"))});$("video_snapSpeed_customized_unit").set("text",
tl("w_S/P"));$("video_snap_default").setProperty("text",tl("w_DefaultConfig"));$("video_snap_refresh").setProperty("text",tl("w_Refresh"));$("video_snap_confirm").setProperty("text",tl("w_Confirm"))},render:function(){o=0;l.configManager.getConfig(["Encode","MediaGlobal"],function(c){if(JSON.decode(c).result)c=JSON.decode(c).params,d=c[0].params.table,h=$unlink(d),k=c[1].params.table,k.SnapFormatAs!=void 0&&isEnable("is_has_SnapFormatAs")?(n=!0,$("video_showSnapFormatAs").style.display=""):$("video_showSnapFormatAs").style.display=
"none",l._putvalueSnap(h,0,0)},!1)},_putvalueSnap:function(c,j,g){c=c[j].SnapFormat[g];$("video_snaptype").selectedIndex=g;if(n){g=k.SnapFormatAs;if(g=="MainFormat"){g=d[0].MainFormat[0];j=g=getFrame(g.Video.Width,g.Video.Height);switch(g){case "BCIF":j="2CIF";break;case "5_1M":j="5M";break;case "2592x2592":j="6M"}$("video_snap_resolution").value=j+" ("+getWidthH(g)+")";$("video_snap_resolution").disabled=!0;$("video_snapMain_enable").checked=!0}else if(g=="ExtraFormat"){g=d[0].ExtraFormat[0];j=g=
getFrame(g.Video.Width,g.Video.Height);switch(g){case "BCIF":j="2CIF";break;case "5_1M":j="5M";break;case "2592x2592":j="6M"}$("video_snap_resolution").value=j+" ("+getWidthH(g)+")";$("video_snap_resolution").disabled=!0;$("video_snapSub_enable").checked=!0}d[0].ExtraFormat[0].VideoEnable?$("video_snapSub_enable").disabled=!1:($("video_snapSub_enable").disabled=!0,$("video_snapSub_enable").checked=!1)}else{g=d[0].MainFormat[0];j=g=getFrame(g.Video.Width,g.Video.Height);switch(g){case "BCIF":j="2CIF";
break;case "5_1M":j="5M";break;case "2592x2592":j="6M"}$("video_snap_resolution").value=j+" ("+getWidthH(g)+")";$("video_snap_resolution").disabled=!0}$("video_snap_imgQuality").value=c.Video.Quality;i(c.Video.FPS)},_showSnapFormatAs:function(){if($("video_snapMain_enable").checked==!0){var c=d[0].MainFormat[0],j=c=getFrame(c.Video.Width,c.Video.Height);switch(c){case "BCIF":j="2CIF";break;case "5_1M":j="5M";break;case "2592x2592":j="6M"}$("video_snap_resolution").value=j+" ("+getWidthH(c)+")";$("video_snap_resolution").disabled=
!0}else if($("video_snapSub_enable").checked==!0){c=d[0].ExtraFormat[0];j=c=getFrame(c.Video.Width,c.Video.Height);switch(c){case "BCIF":j="2CIF";break;case "5_1M":j="5M";break;case "2592x2592":j="6M"}$("video_snap_resolution").value=j+" ("+getWidthH(c)+")";$("video_snap_resolution").disabled=!0}},_putvalueSnapChange:function(c,j,g){c=c[j].SnapFormat[g];$("video_snaptype").selectedIndex=g;if(n)l._showSnapFormatAs();else{g=d[0].MainFormat[0];j=g=getFrame(g.Video.Width,g.Video.Height);switch(g){case "BCIF":j=
"2CIF";break;case "5_1M":j="5M";break;case "2592x2592":j="6M"}$("video_snap_resolution").value=j+" ("+getWidthH(g)+")";$("video_snap_resolution").disabled=!0}$("video_snap_imgQuality").value=c.Video.Quality;i(c.Video.FPS)},_saveJsonSnap:function(c){var d=$unlink(h),g=d[c].SnapFormat[o];if(n)if($("video_snapMain_enable").checked==!0)d[c].SnapFormat[0].Video.Width=d[0].MainFormat[0].Video.Width,d[c].SnapFormat[0].Video.Height=d[0].MainFormat[0].Video.Height,d[c].SnapFormat[1].Video.Width=d[0].MainFormat[0].Video.Width,
d[c].SnapFormat[1].Video.Height=d[0].MainFormat[0].Video.Height;else{if($("video_snapSub_enable").checked==!0)d[c].SnapFormat[0].Video.Width=d[0].ExtraFormat[0].Video.Width,d[c].SnapFormat[0].Video.Height=d[0].ExtraFormat[0].Video.Height,d[c].SnapFormat[1].Video.Width=d[0].ExtraFormat[0].Video.Width,d[c].SnapFormat[1].Video.Height=d[0].ExtraFormat[0].Video.Height}else d[c].SnapFormat[0].Video.Width=d[0].MainFormat[0].Video.Width,d[c].SnapFormat[0].Video.Height=d[0].MainFormat[0].Video.Height,d[c].SnapFormat[1].Video.Width=
d[0].MainFormat[0].Video.Width,d[c].SnapFormat[1].Video.Height=d[0].MainFormat[0].Video.Height;g.Video.Quality=$("video_snap_imgQuality").value-0;c=g.Video;g=1;g=$("video_snapSpeed_customized");$("video_snapSpeed").value=="Customized"?(g.value=g.value.replace(/[^\d]/g,""),g.value=Math.max(1,g.value-0),g.value=Math.min(5E4,g.value-0),g=1/(g.value-0)):(g=$("video_snapSpeed").value-0,g=g<0?-1/g:g);c.FPS=g;return d},_getDefault:function(){l.configManager.getDefault(["Encode","MediaGlobal"],function(c){if(JSON.decode(c).result){var c=
JSON.decode(c).params,d=c[0].params.table;k.SnapFormatAs=c[1].params.table.SnapFormatAs;h[0].SnapFormat=$unlink(d[0].SnapFormat);l._putvalueSnap(h,0,o);remarkDisplay("video_remark1",tl("Defaultsuccess"),3E3,0)}else remarkDisplay("video_remark1",tl("Defaultfailure"),3E3,1)})},_refreshTab:function(){l.configManager.getConfig(["Encode","MediaGlobal"],function(c){if(JSON.decode(c).result){if($("ENCODECFG")!=null){var c=JSON.decode(c).params,d=c[0].params.table;h=$unlink(d);k=c[1].params.table;l._putvalueSnap(d,
0,o);remarkDisplay("video_remark1",tl("Operateingsuccess"),3E3,0)}}else remarkDisplay("video_remark1",tl("Operateingfailure"),3E3,1)})},_postConfig:function(){if(n)if($("video_snapMain_enable").checked==!0)k.SnapFormatAs="MainFormat";else if($("video_snapSub_enable").checked==!0)k.SnapFormatAs="ExtraFormat";h=l._saveJsonSnap(0);l.configManager.setConfig(["Encode","MediaGlobal"],[h,k],l._postResult)},_postResult:function(c){$("ENCODECFG")!=null&&(checkPostResult(c)?(d=$unlink(h),remarkDisplay("video_remark1",
tl("Succeed in saving configure"),3E3,0)):remarkDisplay("video_remark1",tl("Saving failure"),3E3,1))},bind:function(){$("video_snapMain_enable").addEvent("click",l._showSnapFormatAs);$("video_snapSub_enable").addEvent("click",l._showSnapFormatAs);$("video_snap_default").addEvent("click",l._getDefault);$("video_snap_refresh").addEvent("click",l._refreshTab);$("video_snap_confirm").addEvent("click",l._postConfig);$("video_snaptype").addEvent("change",function(){h=l._saveJsonSnap(0);o=this.selectedIndex;
l._putvalueSnapChange(h,0,o)});$("video_snapSpeed").addEvent("change",function(){this.value=="Customized"?$("video_snapSpeed_customized_wrap").style.display="block":$("video_snapSpeed_customized_wrap").style.display="none"});$("video_snapSpeed_customized").addEvent("keyup",function(){limitEx(this,m)});$("video_snapSpeed_customized").addEvent("blur",function(){limit(this,m);limitMin(this,1)})}}})();(function(){function i(){b.Covers=b.Covers||[];for(var a=0;a<4;a++)if(!b.Covers[a]||!b.Covers[a].Rect)b.Covers[a]=
{BackColor:[0,0,0,128],EncodeBlend:!1,FrontColor:[255,255,255,0],PreviewBlend:!1,Rect:[0,0,0,0]};b.CustomTitle=b.CustomTitle||[];b.CustomTitle[0]=b.CustomTitle[0]||{};b.CustomTitle[1]=b.CustomTitle[1]||{};b.CustomTitle[1].Rect=b.CustomTitle[1].Rect||[5321,7450,7931,7868];if(!b.PictureTitle)b.PictureTitle={Name:"",EncodeBlend:!1,Rect:[0,0,0,0]}}function d(){h();b.ChannelTitle.EncodeBlend?$("osd_channel_enable_on").checked=!0:$("osd_channel_enable_off").checked=!0;$("osd_channel_title").value=e.Name||
"";var c=b.TimeTitle||{};c.EncodeBlend?$("osd_time_enable_on").checked=!0:$("osd_time_enable_off").checked=!0;$("osd_time_show_week").checked=c.ShowWeek;(b.PTZPreset||{}).EncodeBlend?$("osd_preset_enable_on").checked=!0:$("osd_preset_enable_off").checked=!0;(b.Temperature||{}).EncodeBlend?$("osd_temperature_enable_on").checked=!0:$("osd_temperature_enable_off").checked=!0;(b.PTZCoordinates||{}).EncodeBlend?$("osd_coordinates_enable_on").checked=!0:$("osd_coordinates_enable_off").checked=!0;c=b.CustomTitle[1]||
{};c.EncodeBlend?$("osd_location_enable_on").checked=!0:$("osd_location_enable_off").checked=!0;j(c.Text||"");$("osd_location_textalign").value="TextAlign"in c?c.TextAlign:2;k();if(b.FontSize!==void 0)b.FontSize==$("fontSizeSmall").value?$("fontSizeSmall").checked=!0:b.FontSize==$("fontSizeLarge").value?$("fontSizeLarge").checked=!0:$("fontSizeMiddle").checked=!0;c=b.VoltageStatus||{};c.EncodeBlend?$("osd_voltage_enable_on").checked=!0:$("osd_voltage_enable_off").checked=!0;($("osd_voltage_continue").value=
c.DisplayTime)?($("osd_voltage_select").value="Manual",$("osd_voltage_continue").setStyle("display","block")):($("osd_voltage_select").value="Auto",$("osd_voltage_continue").setStyle("display","none"));(b.PTZZoom||{}).EncodeBlend?$("osd_PTZZoom_enable_on").checked=!0:$("osd_PTZZoom_enable_off").checked=!0;(b.PTZDirection||{}).EncodeBlend?($("osd_direction_enable_on").checked=!0,$("dirSetting").setStyle("display","block"),$("osd_sd_left_con").setStyle("display","block")):($("osd_direction_enable_off").checked=
!0,$("dirSetting").setStyle("display","none"),$("osd_sd_left_con").setStyle("display","none"));a.EncodeBlend?$("osd_flowrate_enable_on").checked=!0:$("osd_flowrate_enable_off").checked=!0;$("osd_show_enter").checked=a.ShowEnterNum;$("osd_show_exit").checked=a.ShowExitNum;$("osd_flowrate_textalign").value="TextAlign"in a?a.TextAlign:2;(b.GPSTitle||{}).EncodeBlend?$("osd_GPStude_enable_on").checked=!0:$("osd_GPStude_enable_off").checked=!0;$$(".osd-nav-item-current").fireEvent("click")}function h(){(b.Covers||
[]).some(function(a){return a.EncodeBlend})?$("osd_covers_enable_on").checked=!0:$("osd_covers_enable_off").checked=!0}function n(){B&&(new PtzCtrl).setDirection(function(a,b){b.result&&remarkDisplay("video_remark_osd",tl("Succeed in saving configure"),3E3,0)})}function k(){var a=b.PictureTitle||{};a.EncodeBlend?$("osd_image_enable_on").checked=!0:$("osd_image_enable_off").checked=!0;a.Name?(a="url("+x+a.Name+"?"+Date.now()+")",$$(".osd-image-preview").setStyle("background-image",a),$$(".osd-image-file-wrap").addClass("osd-image-file-reupload-wrap"),
$("osd_image_file_import_btn").set("text",tl("w_Re-upload"))):($$(".osd-image-preview").setStyle("background-image",""),$$(".osd-image-file-wrap").removeClass("osd-image-file-reupload-wrap"),$("osd_image_file_import_btn").set("text",tl("w_Upload Picture")))}function o(){if(checkedImportLimt("osd_channel_title",3))if($("osd_channel_title").value.length>15)remarkDisplay("video_remark_osd",tl("w_ChannelTitleLength"),3E3,1);else if(w()){$("osd_covers_enable_on").checked||b.Covers.each(function(a){a.EncodeBlend=
!1});var c=$("osd_covers_enable_on").checked;b.Covers.each(function(a){a.EncodeBlend=c});b.ChannelTitle.EncodeBlend=$("osd_channel_enable_on").checked;e.Name=$("osd_channel_title").value;b.TimeTitle.EncodeBlend=$("osd_time_enable_on").checked;b.TimeTitle.ShowWeek=$("osd_time_show_week").checked;if(bool_PTZfunction)b.PTZPreset.EncodeBlend=$("osd_preset_enable_on").checked;if(temperaturesSupport)b.Temperature.EncodeBlend=$("osd_temperature_enable_on").checked;if(A)b.PTZCoordinates.EncodeBlend=$("osd_coordinates_enable_on").checked;
if(E)b.PTZZoom.EncodeBlend=$("osd_PTZZoom_enable_on").checked;if(B)b.PTZDirection.EncodeBlend=$("osd_direction_enable_on").checked;b.CustomTitle[1].Text=g();b.CustomTitle[1].EncodeBlend=$("osd_location_enable_on").checked;b.CustomTitle[1].PreviewBlend=$("osd_location_enable_on").checked;b.CustomTitle[1].FrontColor=[255,255,255,0];b.CustomTitle[1].BackColor=[0,0,0,128];b.CustomTitle[1].TextAlign=$("osd_location_textalign").value.toInt();b.PictureTitle.EncodeBlend=$("osd_image_enable_on").checked;if(t)b.VoltageStatus.EncodeBlend=
$("osd_voltage_enable_on").checked,b.VoltageStatus.PreviewBlend=$("osd_voltage_enable_on").checked,$("osd_voltage_select").value=="Auto"?(b.VoltageStatus.DisplayTime=0,$("osd_voltage_continue").value=0):b.VoltageStatus.DisplayTime=$("osd_voltage_continue").value-0;if(b.GPSTitle)b.GPSTitle.EncodeBlend=$("osd_GPStude_enable_on").checked;var d=["ChannelTitle","VideoWidget"],I=[[e],[b]];if(bool_flowrate)a.EncodeBlend=$("osd_flowrate_enable_on").checked,a.ShowEnterNum=$("osd_show_enter").checked,a.ShowExitNum=
$("osd_show_exit").checked,a.TextAlign=$("osd_flowrate_textalign").value-0,d.push("VideoWidgetNumberStat"),I.push([a]);q.configManager.setConfig(d,I,function(a){checkPostResult(a)?(f=Object.clone(b),remarkDisplay("video_remark_osd",tl("Succeed in saving configure"),3E3,0)):remarkDisplay("video_remark_osd",tl("Saving failure"),3E3,1)})}else remarkDisplay("video_remark_osd",tl("w_LocationLength"),3E3,1);else remarkDisplay("video_remark_osd",tl("w_wrongChannelName"),3E3,1)}function p(){q.configManager.getConfig(["VideoWidget",
"ChannelTitle","VideoWidgetNumberStat"],function(c,C){C.result?(b=C.params[0].params.table[0],e=C.params[1].params.table[0],C.params[2].result&&(a=C.params[2].params.table[0]),i(),f=Object.clone(b),d(),remarkDisplay("video_remark_osd",tl("Operateingsuccess"),3E3,0)):remarkDisplay("video_remark_osd",tl("Operateingfailure"),3E3,1)})}function m(){q.configManager.getDefault(["VideoWidget","ChannelTitle","VideoWidgetNumberStat"],function(c,f){f.result?(b=f.params[0].params.table[0],e=f.params[1].params.table[0],
f.params[2].result&&(a=f.params[2].params.table[0]),i(),d(),remarkDisplay("video_remark_osd",tl("Defaultsuccess"),3E3,0)):remarkDisplay("video_remark_osd",tl("Defaultfailure"),3E3,1)})}function l(){var a=this.get("data-target");$$(".osd-nav-item").removeClass("osd-nav-item-current");this.addClass("osd-nav-item-current");$$(".osd-container-item").setStyle("display","none");$("osd_"+a).setStyle("display","block");a=="covers"?$("video_OSD_delete").setStyle("display","block"):$("video_OSD_delete").setStyle("display",
"none");if(currenDeviceType.contains("SD"))a=="privateMask"?($("osd_sd_save_el").style.display="none",$("osd_sd_left_con").style.display="block"):($("osd_sd_save_el").style.display="block",$("osd_sd_left_con").style.display="none");if(a=="osdcombination"){if(bool_PTZfunction)$("osd_preset").style.display="";if(temperaturesSupport)$("osd_temperature").style.display="";if(isEnable("is_show_LocationInfo"))$("osd_location").style.display="";A&&($("osd_nav_coordinates").setStyle("display",""),$("osd_coordinates").setStyle("display",
""));E&&($("osd_nav_PTZZoom").setStyle("display",""),$("osd_PTZZoom").setStyle("display",""));if(B)$("osd_nav_direction").setStyle("display",""),$("osd_direction").setStyle("display",""),$("osd_direction_enable_on").checked?($("dirSetting").setStyle("display","block"),$("osd_sd_left_con").setStyle("display","block")):($("dirSetting").setStyle("display","none"),$("osd_sd_left_con").style.display="none")}z[a]&&z[a]()}function c(a,b,c,f){var a=a||[0,0,0,0],c=(u*c).toInt(),f=(v*f).toInt(),d=a[0]+c>8191?
8191-c:a[0],a=a[1]+f>8191?8191-f:a[1];$("ocx")&&($("ocx").SetRegionNum(0),$("ocx").SetRegionNum(1),$("ocx").SetRegionAttributeByIndex(0,b,1,0,0,0),$("ocx").SetSelRegionByIndex(0,d,a,d+c,a+f))}function j(a){(5).times(function(a){$("osd_location_info_"+a).value=""});a.split("|").each(function(a,b){if(!(b>4))$("osd_location_info_"+b).value=a===" "?"":a})}function g(){return[0,1,2,3,4].map(function(a){return $("osd_location_info_"+a).value.replace(/\|/g,"")||" "}).join("|")}function w(){return g().split("|").every(function(a){return a.length<=
15})}var u=16.382,v=8191/374,x="/current_config/",y=!1,s=null,r={"File Transmit Error":"w_File Transmit Error","File too large":"w_PicFileTooLarge","File length error":"w_File length error","File write error":"w_File write error",PicTypeNotSupport:"w_PicTypeNotSupport",BPPTypeNotSupport:"w_BPPTypeNotSupport",ResolutionNotSupport:"w_ResolutionNotSupport",PicNotExist:"w_PicNotExist",FileOperateError:"w_FileOperateError",PicFileTooLarge:"w_PicFileTooLarge"},b={},e={},a={},f={},t=!1,A=!1,E=!1,B=!1,q=
Page.encodeConfig.Tab.OSD={init:function(){q.configManager=new ConfigManager;q.encodeManager=new EncodeManager;q.VideoStatServer=new VideoStatServer;q.magicBox=new MagicBox;q.magicBox.getProductDef(["IsGpsInfoOsd","ControlPTZOSDMenuViaApp"],function(a,b){b.result&&(b.params[0].result&&b.params[0].params.definition&&$("osd_nav_GPS").removeClass("fn-hide"),b.params[1].result&&b.params[1].params.definition&&$("osd_nav_OSDMenuViaApp").removeClass("fn-hide"))},!0);q.translate();q.bind();bool_PTZfunction||
$("osd_nav_preset").setStyle("display","none");temperaturesSupport||$("osd_nav_temperature").setStyle("display","none");A||$("osd_nav_coordinates").setStyle("display","none");isEnable("is_show_OSDinfo")&&$("osd_nav_coordinates").setStyle("display","none");isEnable("is_show_LocationInfo")||$("osd_nav_location").setStyle("display","none");isEnable("is_show_pic_OSD")||$("osd_nav_image").setStyle("display","none");isEnable("is_show_fontSize")&&$("osd_nav_font").setStyle("display","");isEnable("is_8M_Flash")&&
($("osd_nav_font").setStyle("display","none"),$("osd_nav_image").setStyle("display","none"));isEnable("is_8M_Flash")&&$("osd_nav_location").setStyle("display","none");if(currenDeviceType.contains("SD"))$("osd_nav_convers").style.display="none",$("osd_nav_channel").addClass("osd-nav-item-current"),q._getVoltageStatus();if(currenDeviceType.contains("SD")&&isEnable("is_show_OSDinfo")){$("osd_nav_osdcombination").style.display="";var a=$("osd_nav_preset").clone(!0,!0).appendText(":");a.removeClass("osd-nav-item").addClass("ui-text").addClass("fn-width80");
var b=$$("#osd_preset div.fn-clear");a.inject(b[0],"top");a=$("osd_nav_temperature").clone(!0,!0).appendText(":");a.removeClass("osd-nav-item").addClass("ui-text").addClass("fn-width80");b=$$("#osd_temperature div:first-child");a.inject(b[0],"top");a=$("osd_nav_coordinates").clone(!0,!0).appendText(":");a.removeClass("osd-nav-item").addClass("ui-text").addClass("fn-width80");b=$$("#osd_coordinates div:first-child");a.inject(b[0],"top");a=$("osd_nav_location").clone(!0,!0).appendText(":");a.removeClass("osd-nav-item").addClass("ui-text").addClass("fn-width80");
b=$$("#osd_location div:first-child");a.inject(b[0],"top");a=$("osd_nav_PTZZoom").clone(!0,!0).appendText(":");a.removeClass("osd-nav-item").addClass("ui-text").addClass("fn-width80");b=$$("#osd_PTZZoom div:first-child");a.inject(b[0],"top");a=$("osd_nav_direction").clone(!0,!0).appendText(":");a.removeClass("osd-nav-item").addClass("ui-text").addClass("fn-width80");b=$$("#osd_direction div:first-child");a.inject(b[0],"top");$("osd_nav_preset").dispose();$("osd_nav_temperature").dispose();$("osd_nav_coordinates").dispose();
$("osd_nav_location").dispose();$("osd_nav_PTZZoom").dispose();$("osd_nav_direction").dispose();$$("#osd_location_info input").setProperty("maxLength",10);q.magicBox=new MagicBox;q.magicBox.getProcessInfo(function(a){JSON.decode(a).result&&JSON.decode(a).params.info.contains("dm81")&&$$("#osd_location_info input").setProperty("maxLength",15)})}currenDeviceType.contains("SD")?($("osd_video_left").addClass("fn-width380"),$("video_OSD_node").className="sd-video",$("video_OSD_node").getParent().className=
"sd-video-box",$("osd_ipc_left_con").addClass("fn-hide"),$("osd_sd_left_con").removeClass("fn-hide"),$("osd_nav_convers").addClass("fn-hide"),$("osd_nav_privateMask").removeClass("fn-hide"),(new CapsManager).get(0,"PrivacyMasking",function(a,b){b.result&&b.params.caps.Support?(y=!0,s.init(),$("osd_nav_privateMask").removeClass("fn-hide"),b.params.caps.SetColorSupport&&s.initColor(b.params.caps.SetColorSupport),b.params.caps.SupportType&&s.initShape(b.params.caps.SupportType),b.params.caps.SetMosaicSupport&&
s.initMosaic(b.params.caps.SetMosaicSupport)):(y=!1,$("osd_nav_privateMask").addClass("fn-hide"));for(var c=$$("#video_tab_OSD .osd-nav .osd-nav-item"),f=c.length,d=0;d<f;d++)if(c[d].style.display!=="none"&&!c[d].hasClass("fn-hide")){c.removeClass("osd-nav-item-current");c[d].addClass("osd-nav-item-current");c[d].fireEvent("click");break}}),currenDeviceType.contains("SD_CA_ICT")?($("video_privmask_goto").addClass("fn-hide"),$("osd_coordinates").addClass("fn-hide"),$("osd_sd_ptzstep").addClass("fn-hide"),
$("osd_sd_zoomfucusiris_wrap").addClass("fn-marl130")):($("osd_sd_ptzstep").removeClass("fn-hide"),$("osd_sd_zoomfucusiris_wrap").removeClass("fn-marl130")),typeof ptzCap.Zoom=="boolean"&&ptzCap.Zoom==!1&&$("encode_zoom_wrap").setStyle("display","none"),typeof ptzCap.Focus=="boolean"&&ptzCap.Focus==!1&&$("encode_focus_wrap").setStyle("display","none"),typeof ptzCap.Iris=="boolean"&&ptzCap.Iris==!1&&$("encode_iris_wrap").setStyle("display","none")):($("osd_video_left").removeClass("fn-width380"),$("video_OSD_node").className=
"ui-videobox-video",$("video_OSD_node").getParent().className="ui-videobox-video",$("osd_ipc_left_con").removeClass("fn-hide"),$("osd_sd_left_con").addClass("fn-hide"),$("osd_nav_convers").removeClass("fn-hide"),$("osd_nav_privateMask").addClass("fn-hide"));bool_flowrate||$("osd_nav_flowrate").setStyle("display","none")},translate:function(){$("video_OSD_delete_all_covers").set("text",tl("w_Removeall"));$("video_OSD_delete_selected_cover").set("text",tl("w_Delete"));$("video_OSD_title").set("text",
tl("w_(Or press right button of mouse)"));$("video_OSD_default").set("text",tl("w_DefaultConfig"));$("video_OSD_refresh").set("text",tl("w_Refresh"));$("video_OSD_confirm").set("text",tl("w_Confirm"));$("osd_nav_convers").set("text",tl("w_AreaOvercover")).set("title",tl("w_AreaOvercover"));$("osd_nav_channel").set("text",tl("w_ChannelTitle")).set("title",tl("w_ChannelTitle"));$("osd_nav_time").set("text",tl("w_TimeTitle")).set("title",tl("w_TimeTitle"));$("osd_nav_preset").set("text",tl("w_Preset")).set("title",
tl("w_Preset"));$("osd_nav_temperature").set("text",tl("w_temperature")).set("title",tl("w_temperature"));$("osd_nav_coordinates").set("text",tl("w_coordinates")).set("title",tl("w_coordinates"));$("osd_nav_location").set("text",tl("w_location")).set("title",tl("w_location"));$("osd_nav_osdcombination").set("text",tl("w_osdcombination")).set("title",tl("w_osdcombination"));$("osd_nav_image").set("text",tl("w_Picture Overlay")).set("title",tl("w_Picture Overlay"));$("osd_nav_font").set("text",tl("w_fontSize")).set("title",
tl("w_fontSize"));$("osd_nav_GPS").set("text",tl("w_GPSPos")).set("title",tl("w_GPSPos"));$("osd_time_show_week_label").set("text",tl("w_Show Week"));$("osd_location_textalign_label").set("text",tl("w_text_align"));$("osd_location_textalign_left").set("text",tl("w_text_align_left"));$("osd_location_textalign_right").set("text",tl("w_text_align_right"));$$(".osd-enable-on").set("text",tl("C_On"));$$(".osd-enable-off").set("text",tl("C_Off"));$("osd_channel_title_label").set("text",tl("w_Input channel title"));
$("osd_location_info_label").set("text",tl("w_Input location"));$("osd_image_preview_label").set("text",tl("w_Picture Preview"));$("osd_image_file_import_btn").set("text",tl("w_Upload Picture"));$("osd_image_requirement_title").set("text",tl("w_Requirement for picture upload_title"));$("osd_image_requirement_1").set("text",tl("w_Requirement for picture upload_385_1"));$("osd_image_requirement_2").set("text",tl("w_Requirement for picture upload_2"));$("osd_image_requirement_3").set("text",tl("w_Requirement for picture upload_385_3"));
$("osd_nav_voltage").set("text",tl("w_voltage"));$("osd_voltage_continue_label").set("text",tl("w_continue_time"));var a=$("osd_voltage_select").getElements("option");a[0].setProperty("text",tl("w_Automatic"));a[1].setProperty("text",tl("w_Manual"));$$("#font-size-small .font-label").setProperty("text",tl("w_fontsize_small"));$$("#font-size-middle .font-label").setProperty("text",tl("w_fontsize_Medium"));$$("#font-size-large .font-label").setProperty("text",tl("w_fontsize_Large"));$("osd_nav_privateMask").set("text",
tl("w_PrivacyMasking"));s.translate();$("osd_nav_PTZZoom").setProperty("text",tl("w_Zoom"));$("osd_nav_direction").setProperty("text",tl("w_dir_display"));$("osd_dirSetting_btn").setProperty("text",tl("w_setNorth"));$("osd_nav_flowrate").set("text",tl("w_flowrate_osd"));$("osd_flowrate_textalign_label").set("text",tl("w_text_align"));$("osd_flowrate_textalign_left").set("text",tl("w_text_align_left"));$("osd_flowrate_textalign_right").set("text",tl("w_text_align_right"));$("osd_show_enter_label").set("text",
tl("w_maxEnter"));$("osd_show_exit_label").set("text",tl("w_maxLeave"));$("flowrate_clear").set("text",tl("w_clear"));$("osd_flowrate_type").set("text",tl("w_statistics"));$("osd_tude_label").set("text",tl("w_longitudeLatitude"));$("osd_nav_OSDMenuViaApp").translation();$("osd_osdMenu_tip").translation()},bind:function(){$("video_OSD_confirm").addEvent("click",o);$("video_OSD_refresh").addEvent("click",p);$("video_OSD_default").addEvent("click",m);$$(".osd-nav-item").addEvent("click",l);$("video_OSD_delete_all_covers").addEvent("click",
function(){$("ocx")&&$("ocx").DelSelReg(-2);b.Covers.each(function(a){a.Rect=[0,0,0,0]})});$("video_OSD_delete_selected_cover").addEvent("click",function(){$("ocx")&&$("ocx").DelSelReg(-1)});$("osd_covers_enable_on").addEvent("click",function(){b.Covers.each(function(a,b){G.covers(b,a.Rect)})});$$("#osd_location_info input","#osd_channel_title").addEvents({keyup:function(){if(this.value.test(/[\||\'|\"]/g))this.value=this.value.replace(/[\||\'|\"]/g,"")},blur:function(){if(this.value.test(/[\||\'|\"]/g))this.value=
this.value.replace(/[\||\'|\"]/g,"")}});$("osd_image_file_import").addEvents({mouseover:function(){$("osd_image_file_import_btn").addClass("ui-button-hover")},mouseout:function(){$("osd_image_file_import_btn").removeClass("ui-button-hover")}});$("osd_location_enable_on").addEvent("click",function(){if(currenDeviceType.contains("SD")&&isEnable("is_show_OSDinfo")){if(this.checked&&$("osd_image_enable_on").checked)this.checked=!1,confirm(tl("w_osd_picture_overlay_will_be_disabled"))?(this.checked=!0,
$("osd_image_enable_on").checked=!1,$("osd_image_enable_off").checked=!0):(this.checked=!1,$("osd_location_enable_off").checked=!0)}else if(this.checked&&$("osd_image_enable_on").checked)this.checked=!1,confirm(tl("w_picture_overlay_will_be_disabled"))?(this.checked=!0,$("osd_image_enable_on").checked=!1,$("osd_image_enable_off").checked=!0):(this.checked=!1,$("osd_location_enable_off").checked=!0)});$("osd_image_enable_on").addEvent("click",function(){if(currenDeviceType.contains("SD")&&isEnable("is_show_OSDinfo")){if(this.checked&&
($("osd_location_enable_on").checked||$("osd_temperature_enable_on").checked||$("osd_preset_enable_on").checked||$("osd_coordinates_enable_on").checked||$("osd_PTZZoom_enable_on").checked||$("osd_direction_enable_on").checked))this.checked=!1,confirm(tl("w_osd_location_function_will_be_disabled"))?(this.checked=!0,$("osd_location_enable_on").checked=!1,$("osd_location_enable_off").checked=!0,$("osd_temperature_enable_on").checked=!1,$("osd_temperature_enable_off").checked=!0,$("osd_preset_enable_on").checked=
!1,$("osd_preset_enable_off").checked=!0,$("osd_coordinates_enable_on").checked=!1,$("osd_coordinates_enable_off").checked=!0,$("osd_PTZZoom_enable_on").checked=!1,$("osd_PTZZoom_enable_off").checked=!0,$("osd_direction_enable_on").checked=!1,$("osd_direction_enable_off").checked=!0):(this.checked=!1,$("osd_image_enable_off").checked=!0)}else if(this.checked&&$("osd_location_enable_on").checked)this.checked=!1,confirm(tl("w_location_function_will_be_disabled"))?(this.checked=!0,$("osd_location_enable_on").checked=
!1,$("osd_location_enable_off").checked=!0):(this.checked=!1,$("osd_image_enable_off").checked=!0)});$("osd_temperature_enable_on").addEvent("click",function(){if(currenDeviceType.contains("SD")&&isEnable("is_show_OSDinfo")&&this.checked&&$("osd_image_enable_on").checked)this.checked=!1,confirm(tl("w_osd_picture_overlay_will_be_disabled"))?(this.checked=!0,$("osd_image_enable_on").checked=!1,$("osd_image_enable_off").checked=!0):(this.checked=!1,$("osd_temperature_enable_off").checked=!0)});$("osd_coordinates_enable_on").addEvent("click",
function(){if(currenDeviceType.contains("SD")&&isEnable("is_show_OSDinfo")&&this.checked&&$("osd_image_enable_on").checked)this.checked=!1,confirm(tl("w_osd_picture_overlay_will_be_disabled"))?(this.checked=!0,$("osd_image_enable_on").checked=!1,$("osd_image_enable_off").checked=!0):(this.checked=!1,$("osd_coordinates_enable_off").checked=!0)});$("osd_preset_enable_on").addEvent("click",function(){if(currenDeviceType.contains("SD")&&isEnable("is_show_OSDinfo")&&this.checked&&$("osd_image_enable_on").checked)this.checked=
!1,confirm(tl("w_osd_picture_overlay_will_be_disabled"))?(this.checked=!0,$("osd_image_enable_on").checked=!1,$("osd_image_enable_off").checked=!0):(this.checked=!1,$("osd_preset_enable_off").checked=!0)});$("osd_voltage_enable_on").addEvent("change",function(){});$("osd_voltage_enable_off").addEvent("change",function(){});$("osd_voltage_select").addEvent("change",function(){this.value=="Auto"?$("osd_voltage_continue").setStyle("display","none"):$("osd_voltage_continue").setStyle("display","block")});
$("osd_sd_boatX").getChildren("div[class^=ui-boat-box]").addEvent("mouseover",function(a){if(a=(a.target||a.srcElement).getProperty("data-for")){var b=this.getParent();b.className="";b.addClass("ui-boat-current ui-boat-current-"+a.toLowerCase())}});$("osd_sd_boatX").addEvent("mouseout",function(){this.className="ui-boat-current"});$$("#osd_sd_boatX div","#osd_sd_zoomfucusiris_wrap .ptzcontrol").addEvent("mousedown",function(){var a=this.getProperty("data-for");a&&cptzd(!0,a,$("osd_sd_footStep").value-
0,0,!1);$("video_privmask_draw").removeClass("ui-button-special-hover");s.switchOcxPrivacyMasking(!1)});$$("#osd_sd_boatX div","#osd_sd_zoomfucusiris_wrap .ptzcontrol").addEvent("mouseup",function(){var a=this.getProperty("data-for");a&&(cptzd(!1,a,$("osd_sd_footStep").value-0,0,!1),clearInterval(-1))});$$(".font-input").addEvent("change",function(){b.FontSize=this.value-0});$("osd_PTZZoom_enable_on").addEvent("click",function(){if(this.checked&&$("osd_image_enable_on").checked)this.checked=!1,confirm(tl("w_osd_picture_overlay_will_be_disabled"))?
(this.checked=!0,$("osd_image_enable_on").checked=!1,$("osd_image_enable_off").checked=!0):(this.checked=!1,$("osd_PTZZoom_enable_off").checked=!0)});$("osd_direction_enable_on").addEvent("click",function(){this.checked&&$("osd_image_enable_on").checked?(this.checked=!1,confirm(tl("w_osd_picture_overlay_will_be_disabled"))?(this.checked=!0,$("dirSetting").setStyle("display","block"),$("osd_sd_left_con").setStyle("display","block"),$("osd_image_enable_on").checked=!1,$("osd_image_enable_off").checked=
!0):(this.checked=!1,$("osd_direction_enable_off").checked=!0)):this.checked&&($("dirSetting").setStyle("display","block"),$("osd_sd_left_con").setStyle("display","block"))});$("osd_direction_enable_off").addEvent("click",function(){this.checked&&($("dirSetting").setStyle("display","none"),$("osd_sd_left_con").setStyle("display","none"))});$("osd_dirSetting_btn").addEvent("click",function(){n()});(new PtzCtrl).getCurrentProtocolCaps(function(a,b){if(b.result){var c=b.params.caps||{};E=c.SupportPTZZoom||
!1;A=c.SupportPTZCoordinates||!1;B=c.DirectionDisplay||!1}},0,!1);$("flowrate_clear").addEvent("click",function(){q.VideoStatServer.clearSectionStat(function(){},0,!1)})},render:function(){q.configManager.getConfig(["VideoWidget","ChannelTitle","VideoWidgetNumberStat"],function(c,g){Site.currentPage.is.encodeConfig&&$("video_OSD_tab").hasClass("ui-tab-current")&&(overlayPlugins("video_OSD_node"),$("ocx")&&$("ocx").SetRegionNum(0),$("ocx")&&$("ocx").SetModuleMode(1),$("ocx")&&$("ocx").ConnectRealVideo(0,
1));g.result&&(b=g.params[0].params.table[0],e=g.params[1].params.table[0],g.params[2].result&&(a=g.params[2].params.table[0]),i(),f=Object.clone(b),d.delay(10))})},postOSDWindow:function(a,b,c,d,f){var e=$$(".osd-nav-item-current")[0].get("data-target"),b=getDefaultRect(b,c,d,f);if(typeof G[e]=="function")G[e](a,b)},imageFileUploadFinish:function(a){a.result?q.updateOverlayPicture():remarkDisplay("video_remark_osd",tl(r[a.errorCode]),3E3,1)},updateOverlayPicture:function(){q.encodeManager.updateOverlayPicture("osd.bmp",
function(a,c){if(c.result){var d=c.params.Infos[0];if(d.Error==""){var e=d.Path.lastIndexOf("/"),e=d.Path.substring(e+1);b.PictureTitle.Name=e;b.PictureTitle.Width=d.Width;b.PictureTitle.Height=d.Height;f.PictureTitle=Object.clone(b.PictureTitle);$("osd_nav_image").fireEvent("click");q.configManager.setConfig("VideoWidget",[f],function(a,b){b.result?k():remarkDisplay("video_remark_osd",tl("Saving failure"),3E3,1)})}else remarkDisplay("video_remark_osd",tl(r[d.Error]),3E3,1)}})},_getVoltageStatus:function(){(new PtzCtrl).getCurrentProtocolCaps(function(a,
b){if(b.result){var c,d=b.params.caps;if(d)c=d.VoltageStatus;c&&c.Support&&(t=!0,$("osd_nav_voltage").setStyle("display","block"))}})},onFileChange:function(a){var b=0;if(a.value.test(/.bmp$/i)){try{b=a.files[0].size}catch(c){}b>65536?remarkDisplay("video_remark_osd",tl("w_PicFileTooLarge"),3E3,2):$("osd_image_submit").click()}else remarkDisplay("video_remark_osd",tl("w_PicTypeNotSupport"),3E3,2);b=a.cloneNode(!0);b.value="";b.cloneEvents(a);a.removeEvents();a.parentNode.replaceChild(b,a)}},z={covers:function(){var a=
b.Covers||[];$("video_OSD_delete").setStyle("display","block");$("ocx")&&($("ocx").SetRegionNum(0),$("ocx").SetRegionNum(-4),a.each(function(b,c){var d=b.Rect[0],f=b.Rect[1],e=b.Rect[2],g=b.Rect[3];if(!(d==e||f==g))$("ocx").SetSelRegionByIndex(c,d,f,e,g),a[c].EncodeBlend=!0}))},privateMask:function(){s.render();$("ocx").SetRegionNum(0)},channel:function(){c((b.ChannelTitle||{}).Rect,tl("w_ChannelTitle"),100,20)},time:function(){c((b.TimeTitle||{}).Rect,tl("w_TimeTitle"),160,20)},preset:function(){c((b.PTZPreset||
{}).Rect,tl("w_Preset"),100,20)},temperature:function(){c((b.Temperature||{}).Rect,tl("w_temperature"),100,20)},coordinates:function(){c((b.PTZCoordinates||{}).Rect,tl("w_coordinates"),100,20)},PTZZoom:function(){c((b.PTZZoom||{}).Rect,tl("w_PTZZoom"),100,20)},location:function(){c((b.CustomTitle[1]||{}).Rect,tl("w_location"),160,20)},osdcombination:function(){var a;if(bool_PTZfunction)a=(b.PTZPreset||{}).Rect;else if(temperaturesSupport)a=(b.Temperature||{}).Rect,a[1]-=550;else if(A)a=(b.PTZCoordinates||
{}).Rect,a[1]-=550;else if(isEnable("is_show_LocationInfo"))a=(b.CustomTitle[1]||{}).Rect,a[1]-=1100;c(a,tl("w_osdcombination"),160,130)},image:function(){var a=b.PictureTitle||{},d=a.Width||80,f=a.Height||80,e={x:1280,y:960},d=(e.x/1920*d).ceil(),f=(e.y/1080*f).ceil(),d=(d*8+7)/8,f=f%4?4-f%4+f:f,d=(500/e.x*(d%32?32-d%32+d:d)).ceil()+2,f=(374/e.y*f).ceil()+2,d=Math.max(d,16),f=Math.max(f,16);c(a.Rect||[0,0,0,0],"",d,f)},voltage:function(){c((b.VoltageStatus||{}).Rect,tl("w_voltage"),100,20)},ptzDirection:function(){c((b.PTZDirection||
{}).Rect,tl("w_ptzDirection"),100,20)},GPS:function(){$("ocx").SetRegionNum(0)},OSDMenuViaApp:function(){c((b.PTZOSDMenuViaApp||{}).Rect,tl("w_osdMenu"),160,130)},flowrate:function(){c((a||{}).Rect,tl("w_flowrate"),120,40)}},G={covers:function(a,c){c[0]==c[2]||c[1]==c[3]?(b.Covers[a].Rect=[0,0,0,0],b.Covers[a].EncodeBlend=!1):(b.Covers[a].Rect=c,b.Covers[a].EncodeBlend=!0)},channel:function(a,c){b.ChannelTitle.Rect=c},time:function(a,c){b.TimeTitle.Rect=c},preset:function(a,c){b.PTZPreset.Rect=c},
temperature:function(a,c){b.Temperature.Rect=c},coordinates:function(a,c){b.PTZCoordinates.Rect=c},PTZZoom:function(a,c){b.PTZZoom.Rect=c},location:function(a,c){b.CustomTitle[1].Rect=c},osdcombination:function(a,c){var d=$unlink(c),f=$unlink(c),e=$unlink(c),g=(v*20).round();d[3]=c[1]+g;f[1]=c[1]+550;f[3]=c[1]+550+g;e[1]=c[1]+1100;bool_PTZfunction&&(b.PTZPreset.Rect=d);temperaturesSupport&&(b.Temperature.Rect=f);A&&(b.PTZCoordinates.Rect=f);E&&(b.PTZZoom.Rect=f);B&&(b.PTZDirection.Rect=f);temperaturesSupport&&
(b.Temperature.Rect=f);b.CustomTitle[1].Rect=e},image:function(a,c){b.PictureTitle.Rect=c},voltage:function(a,c){b.VoltageStatus.Rect=c},OSDMenuViaApp:function(a,c){b.PTZOSDMenuViaApp.Rect=c},ptzDirection:function(a,c){b.PTZCoordinates.Rect=c;b.PTZDirection.Rect=c;b.Temperature.Rect=c},flowrate:function(b,c){a.Rect=c}};(function(){var a=new ConfigManager,b=new PtzCtrl,c=null,d=0,f=[0,0,0],e=s=Page.encodeConfig.Tab.OSD.PrivacyMask={colorSupport:!1,MosaicSupport:!1,shapeID:"",init:function(){if(y)e.ocx=
$("ocx")?$("ocx"):{},e.bind()},translate:function(){$("video_privmask_number_title").set("text",tl("w_PrivacyMaskingNumber"));$("video_privmask_enable_title").set("text",tl("Enable"));$("video_privmask_draw_label").set("text",tl("w_protract"));$("video_privmask_delete_label").set("text",tl("Delete"));$("video_privmask_clean_label").set("text",tl("w_Clean"));$("video_privmask_goto_label").set("text",tl("w_Goto Preset"));$("osd_sd_zoom_title").set("text",tl("w_Zoom"));$("osd_sd_focus_title").set("text",
tl("w_Focus"));$("osd_sd_iris_title").set("text",tl("w_Iris"));$("osd_sd_footStep_title").set("text",tl("w_Step"))},bind:function(){$("video_privmask_number").addEvent("change",e.onMaskListChange);$("video_privmask_draw").addEvent("click",e.onDrawClick);$("video_privmask_delete").addEvent("click",e.onDelClick);$("video_privmask_clean").addEvent("click",e.onCleanClick);$("video_privmask_goto").addEvent("click",e.onGotoClick);$("video_privmask_ShapType").addEvent("change",e.onShapeChange);$("video_privmask_Mosaic").addEvent("click",
e.onMosaicChange)},render:function(){e.getPrivacyMaskingList();e.switchOcxPrivacyMasking(!1)},renderMaskList:function(){var a=$("video_privmask_number");a.empty();for(var b=0;b<c.length;b++){var e=new Option(b+1,b);e.style.color=c[b].Rect[0]!=c[b].Rect[2]&&c[b].Enable?"black":"gray";a.options.add(e)}a.value=d},onMaskListChange:function(){e.switchOcxPrivacyMasking(!1);$("video_privmask_draw").removeClass("ui-button-special-hover");d=$("video_privmask_number").value;if(e.MosaicSupport)$("video_privmask_Mosaic").checked=
c[d].Mosaic,$("video_privmask_Mosaic").fireEvent("click")},onShapeChange:function(){e._ocxClear()},showOcxRegionNow:function(a){a.Color=a.Color||[0,0,0];switch(a.ShapType){case "Polygon":var b=a.Polygon;break;default:b=[[a.Rect[0],a.Rect[1]],[a.Rect[2],a.Rect[3]]]}e.ocx.CreateMainVideoAnalyseShape(0,"PrivacyMask",a.ShapType,a.ShapType,b,"Convex")},_getOcxData:function(a){a.Polygon?(c[d].ShapType="Polygon",c[d].Polygon=a.Polygon):(c[d].ShapType="Rect",a=a.Rect,c[d].Rect=[a[0][0],a[0][1],a[1][0],a[1][1]]);
c[d].Postion=f;e.setMaskColor();if(e.MosaicSupport)c[d].Mosaic=$("video_privmask_Mosaic").checked;setTimeout(e._ocxClear,500);e.savePrivMaskConfig(!0);e.renderMaskList()},initColor:function(a){if(a==!0)e.colorSupport=!0,$("video_privmask_colorWrap").removeClass("fn-hide"),$$("#osd_privateMask_color span").addEvent("click",function(){$$("#osd_privateMask_color span").removeClass("border-white");this.addClass("border-white")})},setMaskColor:function(){if(e.colorSupport==!0){var a=$$("#osd_privateMask_color .border-white")[0],
a=a?a.getProperty("data-color"):"black",b=e.getColorRGB(a);c.each(function(a){a.Enable&&(a.Color=b)})}},getColorRGB:function(a){return{red:[255,0,0,255],orange:[255,150,0,255],yellow:[255,255,0,255],green:[93,214,33,255],blueGreen:[25,233,233,255],blue:[0,60,255,255],purple:[200,0,255,255],black:[0,0,0,255]}[a]},initShape:function(a){if(!(a==void 0||a==null||a.length==0)&&!(a.length==1&&a[0]=="Rect")){$("video_privmask_shapeWrap").removeClass("fn-hide");$("video_privmask_ShapType").empty();for(var b=
"",c=0;c<a.length;c++)switch(a[c]){case "Rect":b+='<option t="w_rectangle" value="Rect">'+tl("w_rectangle")+"</option>";break;case "Polygon":b+='<option t="w_polygon" value="Polygon">'+tl("w_polygon")+"</option>";break;default:b+='<option t="w_unknow" value="'+a[c]+'">'+tl("w_unknow")+"</option>"}$("video_privmask_ShapType").set("html",b)}},initMosaic:function(a){if(a==!0)e.MosaicSupport=!0,$("video_privmask_mosaic_wrap").removeClass("fn-hide")},onMosaicChange:function(){$("video_privmask_Mosaic").checked?
$("video_privmask_colorWrap").addClass("fn-hide"):e.colorSupport&&$("video_privmask_colorWrap").removeClass("fn-hide")},onDrawClick:function(){$("video_privmask_draw").hasClass("ui-button-special-hover")?e.switchOcxPrivacyMasking(!1):(c[d].Enable=!0,e.switchOcxPrivacyMasking(!0),b.getStatus(function(a,b){b.result?f=b.params.status.Postion:remarkDisplay("video_privmask_remark",tl("Operateingfailure"),3E3,1)},!1))},onDelClick:function(){e.switchOcxPrivacyMasking(!1);c[d].Rect=[0,0,0,0];e.savePrivMaskConfig(!0);
e.renderMaskList()},onCleanClick:function(){if(confirm(tl("w_clearPrivacyMaskConfirm"))){e.switchOcxPrivacyMasking(!1);for(var a=0;a<c.length;a++)c[a].Enable=!1,c[a].Rect=[0,0,0,0],c[a].Polygon=[];e.savePrivMaskConfig(!0);e.renderMaskList()}},onGotoClick:function(){if(c[d].Rect[0]!=c[d].Rect[2]&&c[d].Enable){var a=c[d].Postion,b=0,b=a[0]<0?((a[0]*180+360)*10).round():(a[0]*1800).round(),e=(a[1]*-1800).round(),a=(a[2]*128).round();controlPtz(!0,"PositionABS",b,e,a)}},savePrivMaskConfig:function(b){a.setConfig("PrivacyMasking",
[c],function(a,c){c.result?b&&remarkDisplay("video_privmask_remark",tl("Operateingsuccess"),3E3,0):remarkDisplay("video_privmask_remark",tl("Operateingfailure"),3E3,1)})},getPrivacyMaskingList:function(){a.getConfig("PrivacyMasking",function(a,b){b.result?(c=b.params.table[0],e.renderMaskList()):remarkDisplay("video_privmask_remark",tl("Operateingfailure"),3E3,1)})},_ocxEnale:function(a){e.ocx.EnableVideoAnalyseModule(a)},_ocxCreateMainVideoAnalyseShape:function(){if($("video_OSD_tab").hasClass("ui-tab-current")){var a=
$("video_privmask_ShapType").value;e.shapeID=e.ocx.CreateMainVideoAnalyseShape(0,"PrivacyMask",a,a,"","Convex")}},_ocxClear:function(){e.ocx.DeleteAllVideoAnalyseShape();e._ocxCreateMainVideoAnalyseShape()},_ocxGetDate:function(a){e.shapeID=a;a=e.ocx.GetVideoAnalyseShapeConfigData(a);return JSON.decode(a)},_ocxEventDone:function(a){a=e._ocxGetDate(a);e._getOcxData(a)},switchOcxPrivacyMasking:function(a){$("ocx")&&(e._ocxEnale(a),e._ocxCreateMainVideoAnalyseShape(),a?$("video_privmask_draw").addClass("ui-button-special-hover"):
$("video_privmask_draw").removeClass("ui-button-special-hover"))}}})()})();(function(){function i(){$("ocx")&&$("ocx").DelSelReg(-1)}var d=null,h=Page.encodeConfig.Tab.Inter={init:function(){h.configManager=new ConfigManager;h.translate();h.bind()},translate:function(){$("video_Inter_enable_on_label").set("text",tl("C_On"));$("video_Inter_enable_off_label").set("text",tl("C_Off"));$("video_Inter_default").set("text",tl("w_DefaultConfig"));$("video_Inter_refresh").set("text",tl("w_Refresh"));$("video_Inter_confirm").set("text",
tl("w_Confirm"));$("video_Inter_clear").set("text",tl("w_Removeall"));$("video_Inter_del").set("text",tl("w_Delete"));$("video_Inter_title").set("text",tl("w_(Or press right button of mouse)"));$("video_Inter_imgQuality").set("text",tl("w_picQuality"))},render:function(){h.configManager.getConfig(["VideoEncodeROI","Encode"],function(n,k){Site.currentPage.is.encodeConfig&&$("video_Intel_tab").hasClass("ui-tab-current")&&(overlayPlugins("video_Inter_node"),$("ocx")&&$("ocx").SetRegionNum(0),$("ocx")&&
$("ocx").SetModuleMode(1),$("ocx")&&$("ocx").ConnectRealVideo(0,1));if(k.result)d=k.params[0].params.table,encodeJson=k.params[1].params.table,h.renderElement.delay(10)})},renderElement:function(){var n=d[0];n.Main?($("video_Inter_enable_on").checked=!0,$("video_Inter_enable_off").checked=!1):($("video_Inter_enable_on").checked=!1,$("video_Inter_enable_off").checked=!0);$("video_InterImgQuality").value=n.Quality;h._areaCoverInter()},_areaCoverInter:function(){var h=[];$("ocx")&&$("ocx").SetRegionNum(0);
$("ocx")&&$("ocx").SetRegionNum(Page.encodeConfig.MAXINTERAREANUM);d[0].Regions?h=d[0].Regions:d[0].Regions=[];for(var k=h.length,i=0;i<k;i++){var p=h[i][0],m=h[i][1],l=h[i][2],c=h[i][3];p==l||m==c||$("ocx")&&$("ocx").SetSelRegionByIndex(i,p,m,l,c)}},onRefreshClick:function(){h.configManager.getConfig("VideoEncodeROI",function(i,k){k.result?(d=k.params.table,h.renderElement(),remarkDisplay("video_remark_inter",tl("Operateingsuccess"),3E3,0)):remarkDisplay("video_remark_inter",tl("Operateingfailure"),
3E3,1)})},onDefaultClick:function(){h.configManager.getDefault("VideoEncodeROI",function(i,k){k.result?(d=k.params.table,h.renderElement(),remarkDisplay("video_remark_inter",tl("Defaultsuccess"),3E3,0)):remarkDisplay("video_remark_inter",tl("Defaultfailure"),3E3,1)})},_postInterWindow:function(h,k,i,p,m){var m=getDefaultRect(k,i,p,m),k=m[0],i=m[1],p=m[2],m=m[3],l=d[0].Regions;l[h]=[k,i,p,m];if(p==k||i==m)l[h]=[0,0,0,0]},_saveInterJson:function(){var h=d[0];h.Main=$("video_Inter_enable_on").checked;
h.Quality=$("video_InterImgQuality").value-0;for(var i=h.Regions.length;i--;)h.Regions[i]=="0,0,0,0"&&h.Regions.splice(i,1)},onConfirmClick:function(){h._saveInterJson();(encodeJson[0].MainFormat[0].Video.Width>v||encodeJson[0].MainFormat[0].Video.Height>x)&&d[0].Main&&v&&x?remarkDisplay("video_remark_inter",tl("w_errorMaxROI")+z,3E3,1):(new ConfigManager,h.configManager.setConfig("VideoEncodeROI",d,function(d){JSON.decode(d).result?remarkDisplay("video_remark_inter",tl("Succeed in saving configure"),
3E3,0):remarkDisplay("video_remark_inter",tl("Saving failure"),3E3,1)}))},bind:function(){$("video_Inter_clear").addEvent("click",function(){$("ocx")&&$("ocx").DelSelReg(-2);for(var h=d[0].Regions,i=h.length,o=0;o<i;o++)h[o]=[0,0,0,0]});$("video_Inter_del").addEvent("click",i);$("video_Inter_refresh").addEvent("click",h.onRefreshClick);$("video_Inter_confirm").addEvent("click",h.onConfirmClick);$("video_Inter_default").addEvent("click",h.onDefaultClick)}}})();(function(){function i(d,i){return $("ocx")&&
$("ocx").GetConfigPath(d)||Cookie.read("DhWebVideoPath"+d)||h(i)}function d(d,h){h=h.trim();$("ocx")&&$("ocx").SetConfigPath(d,h);Cookie.write("DhWebVideoPath"+d,h,{duration:30})}function h(d){return!$("ocx")?"":Browser.Platform.win?$("ocx").GetUserDirectory()+"\\WebDownload\\"+d:$("ocx").GetUserDirectory()+"/WebDownload/"+d}function n(){for(var d=$$(".video-path-input"),h=null,i=0,c=d.length;i<c;i++){h=d[i];if(!$("ocx")&&h.value.trim()=="")break;if(h.value=="")return remarkDisplay("video_remark_path",
tl("w_pathErrors"),3E3,1),!1;if(Browser.Platform.win){if(!checkedImportLimt(h.id,4))return remarkDisplay("video_remark_path",tl("w_pathErrors"),3E3,1),!1;if(!/^[a-zA-Z]{1}(:){1}/.test(h.value))return remarkDisplay("video_remark_path",tl("w_pathErrors"),3E3,1),!1;if(/[\\]{2}/.test(h.value))return remarkDisplay("video_remark_path",tl("w_pathErrors"),3E3,1),!1;if(/[:]+/.test(h.value.substring(2)))return remarkDisplay("video_remark_path",tl("w_pathErrors"),3E3,1),!1}h.value=h.value.replace(/\s+[\\\\]/g,
"\\").replace(/[\\\\]\s+/g,"\\");if(StringUtil.byteLength(h.value,"aaa")>200){remarkDisplay("video_remark_path",tl("w_pathLong"),3E3,1);return}}return!0}var k="",o=Page.encodeConfig.Tab.path={init:function(){o.translate();o.bind();hasSDCard||$$("#video_tab_path .need-sd-card").setStyle("display","none")},translate:function(){$("video_path_LivePicture_label").set("text",tl("w_Monitor Snapshot Path"));$("video_path_LiveRecord_label").set("text",tl("w_Monitor Record Path"));$("video_path_PlayBackPicture_label").set("text",
tl("w_Playback Snapshot Path"));$("video_path_PlayBackRecord_label").set("text",tl("w_Playback Download Path"));$("video_path_PlayBackRecordCut_label").set("text",tl("w_Playback Cut Path"));$$(".video-path-button").set("text",tl("w_Scan"));$("video_path_confirm").set("text",tl("w_Confirm"));$("video_path_default").set("text",tl("w_DefaultConfig"))},bind:function(){$("video_path_confirm").addEvent("click",o.onConfirmClick);$("video_path_default").addEvent("click",o.onDefaultClick);$$(".video-path-input").addEvents({keyup:function(){StringUtil.byteLength(this.value,
"aaa")>200?$(this.id+"_tip").setProperty("text",tl("w_pathLong")):$(this.id+"_tip").setProperty("text","")},blur:function(){StringUtil.byteLength(this.value,"aaa")>200?$(this.id+"_tip").setProperty("text",tl("w_pathLong")):$(this.id+"_tip").setProperty("text","")}});$$(".video-path-button").addEvent("click",function(){k=this.get("data-target");$("ocx")&&$("ocx").ShowFileBrowse()})},render:function(){$("video_path_LivePicture").value=i(1,"LiveSnapshot");$("video_path_LiveRecord").value=i(2,"LiveRecord");
$("video_path_PlayBackPicture").value=i(3,"PlaybackSnapshot");$("video_path_PlayBackRecord").value=i(4,"PlaybackRecord");$("video_path_PlayBackRecordCut").value=i(5,"VideoClips")},setFilePath:function(d,h){if(k)$("video_path_"+k).value=h;k=""},onConfirmClick:function(){n()&&(d(1,$("video_path_LivePicture").value),d(2,$("video_path_LiveRecord").value),d(3,$("video_path_PlayBackPicture").value),d(4,$("video_path_PlayBackRecord").value),d(5,$("video_path_PlayBackRecordCut").value),remarkDisplay("video_remark_path",
tl("Succeed in saving configure"),3E3,0))},onDefaultClick:function(){$("video_path_LivePicture").value=h("LiveSnapshot");$("video_path_LiveRecord").value=h("LiveRecord");$("video_path_PlayBackPicture").value=h("PlaybackSnapshot");$("video_path_PlayBackRecord").value=h("PlaybackRecord");$("video_path_PlayBackRecordCut").value=h("VideoClips");remarkDisplay("video_remark_path",tl("Defaultsuccess"),3E3,0)}}})()})();function OSDImageUploadFinish(u){Page.encodeConfig.Tab.OSD.imageFileUploadFinish(u)}
function onOSDFileChange(u){Page.encodeConfig.Tab.OSD.onFileChange(u)};
