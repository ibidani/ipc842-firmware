(function(){var h=Page.generalConfig={Tab:[],init:function(){h.Tab.local_setting.init();h.Tab.date_time.init();h.translate();h.bind();h.render()},translate:function(){$("general_tab_title_local_setting").set("text",tl("w_Local Config"));$("general_tab_title_date_time").set("text",tl("w_Date-Time"));$("general_help").set("title",tl("w_help"))},render:function(){$$(".general_tab_title.ui-tab-current").fireEvent("click")},bind:function(){$$(".general_tab_title").addEvent("click",h._onTabTitleClick);
$("general_help").addEvent("click",function(){openHelp("generalConfig.htm")})},_onTabTitleClick:function(){var i=this.getProperty("data-for");h.Tab[i].render();$$(".general_tab_title").removeClass("ui-tab-current");$$(".general_tabs").setStyle("display","none");this.addClass("ui-tab-current");$("general_tab_"+i).setStyle("display","block")}}})();
(function(){var h,i,j,l,u,m=!1,r=0,v=!1,p={mainStream:0,extraStream1:1,extraStream2:2,TVOut:3,Intell:4},a=!0,f=Page.generalConfig.Tab.local_setting={init:function(){f.MagicBox=new MagicBox;f.configManager=new ConfigManager;f.devVideoOut=new DevVideoOut;f.translate();f.bind();f.devVideoOut.enumModes(function(a,e){if(e.result){var f=e.params.modeTable;f&&f.each(function(a){a.Mode.Format=="Auto"?$("videoOut_sel").options.add(new Option(tl("w_openmenu"),a.Mode.Format)):$("videoOut_sel").options.add(new Option(a.Mode.Format,
a.Mode.Format))})}},0,!1)},translate:function(){$("local_setting_device_name_label").set("text",tl("w_DeviceName"));$("local_setting_device_number_label").set("text",tl("w_Device NO."));$("local_setting_language_label").set("text",tl("w_Language"));$("local_setting_video_standard_label").set("text",tl("w_VideoStandard"));$("local_setting_default").set("text",tl("w_DefaultConfig"));$("local_setting_refresh").set("text",tl("w_Refresh"));$("local_setting_confirm").set("text",tl("w_Confirm"));$("local_setting_tvout_label").set("text",
tl("w_tvOut"));$("tvClose").set("text",tl("w_closemenu"));$$("#local_setting_language option").each(function(a){a.set("text",tl(a.value))})},render:function(){v=!1;a?(f.MagicBox.getProductDef(["Languages","VideoStandards","VideoOutputChannels","EncodeSourceConflict"],function(a){if(JSON.decode(a).result){a=JSON.decode(a).params;$("local_setting_language").innerHTML="";a[0].params.definition.each(function(a){$("local_setting_language").options.add(new Option(tl(a),a))});$("local_setting_video_standard").innerHTML=
"";a[1].params.definition.each(function(a){$("local_setting_video_standard").options.add(new Option(a,a))});if(a[2].result&&a[2].params.definition)r=a[2].params.definition;a[3].result&&a[3].params.definition&&(m=a[3].params.definition[0].contains(1<<p.TVOut|1<<p.Intell));if(r)$("general_videoOut").style.display="block"}f._getConfigAndRenderElements(!1)}),a=!1):f._getConfigAndRenderElements(!1)},bind:function(){$("local_setting_device_name").addEvent("keyup",function(){promptImportLimt("local_setting_device_name",
"local_setting_device_name_tip","w_wrongDeviceName",0)});attachLimit("local_setting_device_number",0,998);$("local_setting_confirm").addEvent("click",f._onConfirmClick);$("local_setting_refresh").addEvent("click",f._onRefreshClick);$("local_setting_default").addEvent("click",f._onDefaultClick);$("videoOut_sel").addEvent("change",function(){$("videoOut_sel").value!="0"?m&&IPCIntellentShow&&v&&remarkDisplay("local_setting_remark",tl("w_TVOutConfilctIntell"),0,2):$("local_setting_remark").setStyle("display",
"none")})},_getConfigAndRenderElements:function(a){f.configManager.getConfig(["General","Language","VideoStandard","VideoOut"],function(e){JSON.decode(e).result?(e=JSON.decode(e).params,h=e[0].params.table,i=e[1].params.table,j=e[2].params.table,$unlink(i),l=e[3].result&&e[3].params.table,f._renderElements(),a&&remarkDisplay("local_setting_remark",tl("Operateingsuccess"),3E3,0)):a&&remarkDisplay("local_setting_remark",tl("Operateingfailure"),3E3,1)});r&&m&&IPCIntellentShow&&f.configManager.getConfig("VideoAnalyseRule",
function(a){if(JSON.decode(a).result){u=JSON.decode(a).params.table;for(a=0;a<u.length;a++)u[a].each(function(a){a.Enable&&(v=!0)})}})},_renderElements:function(){$("local_setting_device_name").value=h.MachineName;$("local_setting_device_number").value=h.LocalNo;$("local_setting_language").value=i;if(r)l[0].Enable?$("videoOut_sel").value=l[0].Mode.Format:$("videoOut_sel").value="0";currenDeviceType.contains("3110")?($("local_setting_video_standard").empty(),$("local_setting_video_standard").options.add(new Option(j,
j))):$("local_setting_video_standard").value=j;$("local_setting_device_name_tip").set("text",tl(""))},_onConfirmClick:function(){if(checkedImportLimt("local_setting_device_name",0)){if(r){l[0].Enable=$("videoOut_sel").value!="0"?!0:!1;if(l[0].Enable)l[0].Mode.Format=$("videoOut_sel").value;f.configManager.setConfig("VideoOut",l,function(){},!1)}h.MachineName=$("local_setting_device_name").value;h.LocalNo=$("local_setting_device_number").value-0;i=$("local_setting_language").value;j=$("local_setting_video_standard").value;
f.configManager.setConfig(["General","Language","VideoStandard"],[h,i,j],function(a){checkPostResult(a)?(remarkDisplay("local_setting_remark",tl("Succeed in saving configure"),3E3,0),isNeedReboot(a,"The configuration is taking effect. The device is restarting now. Please don\u2019t leave this page or close the browser.",!1,!1),getlang(i,retranslate)):remarkDisplay("local_setting_remark",tl("Saving failure"),3E3,1)})}else remarkDisplay("local_setting_remark",tl("w_wrongDeviceName"),3E3,1)},_onRefreshClick:function(){f._getConfigAndRenderElements(!0)},
_onDefaultClick:function(){f.configManager.getDefault(["General","Language","VideoStandard","VideoOut"],function(a){JSON.decode(a).result?(a=JSON.decode(a).params,h=a[0].params.table,i=a[1].params.table,j=a[2].params.table,l=a[3].result&&a[3].params.table,f._renderElements(),remarkDisplay("local_setting_remark",tl("Defaultsuccess"),3E3,0)):remarkDisplay("local_setting_remark",tl("Defaultfailure"),3E3,1)})}}})();
(function(){function h(){var b=function(){var b=e[0].value-0,a=e[1].value-0;return a==4||a==6||a==9||a==11?30:a==2&&!(b%4!=0||b%100==0&&b%400!=0)?29:a==2&&(b%4!=0||b%100==0&&b%400!=0)?28:31},a=function(a,c){if(e[a])e[a].maxLength=a==0?4:2,e[a].addEvents({keyup:function(d){if(/[^\d]/g.test(this.value))this.value=this.value.replace(/[^\d]/g,"")-0;if(a==2){var f=b();c=c==f?c:f}if(this.value-0>c)this.value=c;f=this.get("data-index")-0;i(d.code,f)&&(c!=2037?this.value.length>=2&&$$("#date_time_system_datetime input")[(f+
1)%6].select():this.value.length>=4&&$$("#date_time_system_datetime input")[(f+1)%6].select())},blur:function(){if(/[^\d]/g.test(this.value))this.value=this.value.replace(/[^\d]/g,"")-0;if(e[0].value-0<2E3)e[0].value=2E3;if(e[0].value-0>2037)e[0].value=2037;var a=e[1].value-0;if(a<1)e[1].value="01";else if(a<10)e[1].value="0"+a;else if(a>12)e[1].value=12;var a=e[2].value-0,g=b();if(a<1)e[2].value="01";else if(a<10)e[2].value="0"+a;else if(a>g)e[2].value=g;c==2037&&($("date_time_DST_date_begin_time_month").selectedIndex==
1&&p(1,"date_time_DST_date_begin_time_day"),$("date_time_DST_date_end_time_month").selectedIndex==1&&p(1,"date_time_DST_date_end_time_day"))},focus:function(){this.select()}})};a(0,2037);a(1,12);a(2,31)}function i(b,a){a-=0;if(b==39)return $$("#date_time_system_datetime input")[(a+1)%6].select(),!1;else if(b==37)return $$("#date_time_system_datetime input")[(a-1+6)%6].select(),!1;return!0}function j(){$("date_time_system_date0").removeEvents("keyup");$("date_time_system_date0").removeEvents("blur");
$("date_time_system_date0").removeEvents("focus");$("date_time_system_date1").removeEvents("keyup");$("date_time_system_date1").removeEvents("blur");$("date_time_system_date1").removeEvents("focus");$("date_time_system_date2").removeEvents("keyup");$("date_time_system_date2").removeEvents("blur");$("date_time_system_date2").removeEvents("focus")}function l(){m("date_time_system_time",12);m("date_time_DST_begin_time",12);m("date_time_DST_end_time",12)}function u(){m("date_time_system_time",23);m("date_time_DST_begin_time",
23);m("date_time_DST_end_time",23)}function m(b,a){$(b+"0")&&($(b+"0").removeEvents("keypress"),$(b+"0").removeEvents("keyup"),$(b+"0").removeEvents("focus"),$(b+"0").removeEvents("blur"),$(b+"0").addEvents({keypress:function(){b=="date_time_system_time"&&(clearTimeout(k),k=0)},keyup:function(g){if(/[^\d]/g.test(this.value))this.value=this.value.replace(/[^\d]/g,"")-0;if(this.value-0==0&&this.value.length==2){if(a==12)this.value=12}else if(this.value-0>a)this.value=a;var g=g.code,d=this.get("data-index");
if(g==39||g==37){if(d&&g==37){$$("#date_time_system_datetime input")[(d-0-1+6)%6].select();return}if($(b+"1")!=null){$(b+"1").select();return}}this.value.length>=2&&$(b+"1").select()},focus:function(){this.select()},blur:function(){if(/[^\d]/g.test(this.value))this.value=this.value.replace(/[^\d]/g,"")-0;if(this.value.length==1)this.value=this.value=="0"?a==12?"12":"00":"0"+this.value;else if(this.value.length==0)this.value=a==12?"12":"00"}}))}function r(b){$(b).addEvents({keyup:function(a){if(/[^\d]/g.test(this.value))this.value=
this.value.replace(/[^\d]/g,"")-0;if(this.value-0>59)this.value=59;var g=b.slice(0,-1),a=a.code;(a==39||a==37)&&$(g+"0")!=null&&$(g+"0").select()},focus:function(){this.select()},blur:function(){if(/[^\d]/g.test(this.value))this.value=this.value.replace(/[^\d]/g,"")-0;if(this.value.length==1)this.value="0"+this.value;else if(this.value.length==0)this.value="00"}})}function v(b){var a=[$(b+"1"),$(b+"2")],g=function(g,d){a[g]&&a[g].addEvents({keypress:function(){clearInterval(k);k=0},keyup:function(a){if(/[^\d]/g.test(this.value))this.value=
this.value.replace(/[^\d]/g,"")-0;if(this.value-0>d)this.value=d;var c=this.get("data-index")-0;i(a.code,c)&&this.value.length>=2&&$(b+"2").select()},focus:function(){this.select()},blur:function(){if(/[^\d]/g.test(this.value))this.value=this.value.replace(/[^\d]/g,"")-0;if(this.value.length==1)this.value="0"+this.value;else if(this.value.length==0)this.value="00"}})};g(0,59);g(1,59)}function p(b,a){$(a).innerHTML="";for(var g=$("date_time_date_format").selectedIndex==0?$("date_time_system_date0").value-
0:$("date_time_system_date2").value-0,g=getMonthDays(g,b+1),d=0;d<g;d++)$(a).options.add(new Option(d+1));$(a).selectedIndex=g<$(a).selectedIndex+1?g-1:$(a).selectedIndex}var a,f,s=0,e=[],q,n,k,z=["Year-Month-Day","Month-Day-Year","Day-Month-Year"],x=["w_Sunday","w_Monday","w_Tuesday","w_Wednesday","w_Thursday","w_Friday","w_Saturday"],y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],d=Page.generalConfig.Tab.date_time={init:function(){d.configManager=new ConfigManager;
d.global=new Global;d.translate();d.bind()},translate:function(){$("date_time_date_format_label").set("text",tl("w_DateFormat"));$("date_time_time_format_label").set("text",tl("w_TimeFormat"));$("date_time_time_zone_label").set("text",tl("w_TimeZone"));$("date_time_system_time_label").set("text",tl("w_SysTime"));$("date_time_synchronize_PC").set("text",tl("w_synpc"));$("date_time_DST_enable_label").set("text",tl("w_DSTEnable"));$("date_time_DST_type_label").set("text",tl("w_DST Type"));$("date_time_DST_date_label").set("text",
tl("w_Date"));$("date_time_DST_week_label").set("text",tl("w_Week"));$("date_time_DST_begin_time_label").set("text",tl("w_BeginTime"));$("date_time_DST_end_time_label").set("text",tl("w_EndTime"));$("date_time_NTP_enable_label").set("text",tl("w_NTP Settings"));$("date_time_NTP_server_label").set("text",tl("w_NTP Server"));$("date_time_NTP_port_label").set("text",tl("w_Port"));$("date_time_NTP_update_periods_label").set("text",tl("w_UpdatePeriod"));$("date_time_NTP_update_periods_minute_label").set("text",
tl("w_Minute"));$("date_time_default").set("text",tl("w_DefaultConfig"));$("date_time_refresh").set("text",tl("w_Refresh"));$("date_time_confirm").set("text",tl("w_Confirm"));var a=$("date_time_date_format").getElements("option");a[0].set("text",tl("Year-Month-Day"));a[1].set("text",tl("Month-Day-Year"));a[2].set("text",tl("Day-Month-Year"));a=$("date_time_time_format").getElements("option");a[0].set("text","24-"+tl("Hour Standard"));a[1].set("text","12-"+tl("Hour Standard"));for(var c=$("date_time_DST_date_begin_time_month").getElements("option"),
g=$("date_time_DST_date_end_time_month").getElements("option"),d=$("date_time_DST_week_begin_time_month").getElements("option"),f=$("date_time_DST_week_end_time_month").getElements("option"),e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=0;a<12;a++)c[a].set("text",tl(e[a])),g[a].set("text",tl(e[a])),d[a].set("text",tl(e[a])),f[a].set("text",tl(e[a]));c=$("date_time_DST_week_begin_time_sort").getElements("option");g=$("date_time_DST_week_end_time_sort").getElements("option");
d=["1st","2nd","3rd","4th","LastWeek"];for(a=0;a<5;a++)c[a].set("text",tl(d[a])),g[a].set("text",tl(d[a]))},render:function(){currenVendor=="RVi"&&$$("#DST_enable_endtime,#DST_enable_starttime,#DST_enable_datatime,#DST_enable_container").setStyle("display","none");$("date_time_DST_week_begin_time_week").innerHTML="";$("date_time_DST_week_end_time_week").innerHTML="";for(var a=0;a<7;a++)$("date_time_DST_week_begin_time_week").options.add(new Option(tl(x[a]),a)),$("date_time_DST_week_end_time_week").options.add(new Option(tl(x[a]),
a));d._requestTime();d._getConfigAndRenderElements(!1);d._runTime()},bind:function(){attachLimit("date_time_NTP_port",0,65535);attachLimit("date_time_NTP_update_periods",0,30);$$("#date_time_NTP_port,#date_time_NTP_update_periods").addEvent("keyup",function(){this.value-=0});v("date_time_system_time");r("date_time_DST_begin_time1");r("date_time_DST_end_time1");$("date_time_DST_date").addEvent("click",function(){d._showDST("date_time_DST_date")});$("date_time_DST_week").addEvent("click",function(){d._showDST("date_time_DST_week")});
$("date_time_DST_week_begin_time_month").addEvent("change",function(){d._changeWeek(!0,"date_time_DST_week_begin_time_month","date_time_DST_week_begin_time_sort","date_time_DST_week_begin_time_week")});$("date_time_DST_week_end_time_month").addEvent("change",function(){d._changeWeek(!0,"date_time_DST_week_end_time_month","date_time_DST_week_end_time_sort","date_time_DST_week_end_time_week")});$("date_time_DST_week_begin_time_sort").addEvent("change",function(){d._changeWeek(!1,"date_time_DST_week_begin_time_month",
"date_time_DST_week_begin_time_sort","date_time_DST_week_begin_time_week")});$("date_time_DST_week_end_time_sort").addEvent("change",function(){d._changeWeek(!1,"date_time_DST_week_end_time_month","date_time_DST_week_end_time_sort","date_time_DST_week_end_time_week")});$("date_time_DST_date_begin_time_month").addEvent("change",function(){p(this.selectedIndex,"date_time_DST_date_begin_time_day")});$("date_time_DST_date_end_time_month").addEvent("change",function(){p(this.selectedIndex,"date_time_DST_date_end_time_day")});
$("date_time_date_format").addEvent("change",function(){d._changeDateFormat(this.selectedIndex)});$("date_time_time_format").addEvent("change",function(){d._changeTimeFormat(this.selectedIndex)});$("date_time_system_time_12_format").addEvent("change",function(){d._changeAM_PM()});$("date_time_synchronize_PC").addEvent("click",d._synPCTime);$("date_time_NTP_server").addEvent("keyup",function(){promptImportLimt("date_time_NTP_server","date_time_NTP_server_tip","w_wrongNTPName",1)});$("date_time_confirm").addEvent("click",
d._onConfirmClick);$("date_time_refresh").addEvent("click",d._onRefreshClick);$("date_time_default").addEvent("click",d._onDefaultClick)},_getConfigAndRenderElements:function(b){d.configManager.getConfig(["Locales","NTP"],function(c){JSON.decode(c).result?(c=JSON.decode(c).params,a=c[0].params.table,f=c[1].params.table,d._renderElements(),b&&remarkDisplay("date_time_remark",tl("Operateingsuccess"),3E3,0)):b&&remarkDisplay("date_time_remark",tl("Operateingfailure"),3E3,1)},!1)},_renderElements:function(){var b=
a.TimeFormat,c=b.split("-"),g=b.split(" ")[1].charAt(0)=="H",b=$unlink(n.split("-")),o=$unlink(q.split(":")),i=b[0],w=b[1],k=b[2],b="",t=0;j();c[0].charAt(0)=="m"||c[0].charAt(0)=="M"?(s=1,b="Month-Day-Year",$("date_time_system_date0").setProperty("value",w),$("date_time_system_date1").setProperty("value",k),$("date_time_system_date2").setProperty("value",i),e=[$("date_time_system_date2"),$("date_time_system_date0"),$("date_time_system_date1")]):c[0].charAt(0)=="d"||c[0].charAt(0)=="D"?(s=2,b="Day-Month-Year",
$("date_time_system_date0").setProperty("value",k),$("date_time_system_date1").setProperty("value",w),$("date_time_system_date2").setProperty("value",i),e=[$("date_time_system_date2"),$("date_time_system_date1"),$("date_time_system_date0")]):(s=0,b="Year-Month-Day",$("date_time_system_date0").setProperty("value",i),$("date_time_system_date1").setProperty("value",w),$("date_time_system_date2").setProperty("value",k),e=[$("date_time_system_date0"),$("date_time_system_date1"),$("date_time_system_date2")]);
h();p(a.DSTStart.Month-1,"date_time_DST_date_begin_time_day");p(a.DSTEnd.Month-1,"date_time_DST_date_end_time_day");g?(u(),t=24,$("date_time_system_time0").value=o[0],$("date_time_system_time1").value=o[1],$("date_time_system_time2").value=o[2],$("date_time_system_time_12_format").style.display="none",$("date_time_DST_begin_time_12_format").style.display="none",$("date_time_DST_end_time_12_format").style.display="none",$("date_time_DST_begin_time0").setProperty("value",chk10(a.DSTStart.Hour)),$("date_time_DST_end_time0").setProperty("value",
chk10(a.DSTEnd.Hour))):(l(),t=12,$("date_time_system_time_12_format").style.display="",$("date_time_DST_begin_time_12_format").style.display="",$("date_time_DST_end_time_12_format").style.display="",$("date_time_system_time1").value=chk10(o[1]-0),$("date_time_system_time2").value=chk10(o[2]-0),o[0]-0==0?($("date_time_system_time0").value=12,$("date_time_system_time_12_format").value="AM"):o[0]-0<12?($("date_time_system_time0").value=chk10(o[0]-0),$("date_time_system_time_12_format").value="AM"):(o[0]-
0==12?$("date_time_system_time0").value=12:$("date_time_system_time0").value=chk10(o[0]-0-12),$("date_time_system_time_12_format").value="PM"),a.DSTStart.Hour<12?(c=a.DSTStart.Hour==0?"12":chk10(a.DSTStart.Hour),$("date_time_DST_begin_time0").setProperty("value",c),$("date_time_DST_begin_time_12_format").setProperty("value","AM")):(c=a.DSTStart.Hour==12?"12":chk10(a.DSTStart.Hour-12),$("date_time_DST_begin_time0").setProperty("value",c),$("date_time_DST_begin_time_12_format").setProperty("value",
"PM")),a.DSTEnd.Hour<12?(c=a.DSTEnd.Hour==0?"12":chk10(a.DSTEnd.Hour),$("date_time_DST_end_time0").setProperty("value",c),$("date_time_DST_end_time_12_format").setProperty("value","AM")):(c=a.DSTEnd.Hour==12?"12":chk10(a.DSTEnd.Hour-12),$("date_time_DST_end_time0").setProperty("value",c),$("date_time_DST_end_time_12_format").setProperty("value","PM")));$("date_time_date_format").selectedIndex=z.indexOf(b);$("date_time_time_format").selectedIndex=t==12?1:0;$("date_time_DST_enable").checked=a.DSTEnable;
a.DSTStart.Week!=0?($("date_time_DST_week").click(),d._putDSTWeek()):($("date_time_DST_date").click(),d._putDSTDate());$("date_time_DST_begin_time1").setProperty("value",chk10(a.DSTStart.Minute));$("date_time_DST_begin_time2").setProperty("value","00");$("date_time_DST_end_time1").setProperty("value",chk10(a.DSTEnd.Minute));$("date_time_DST_end_time2").setProperty("value","00");$("date_time_NTP_enable").checked=f.Enable?!0:!1;$("date_time_NTP_server").setProperty("value",f.Address);$("date_time_NTP_port").setProperty("value",
f.Port);$("date_time_NTP_update_periods").setProperty("value",f.UpdatePeriod);$("date_time_time_zone").selectedIndex=y.indexOf(f.TimeZone);$("date_time_NTP_server_tip").setProperty("text","")},_onConfirmClick:function(){if(checkedImportLimt("date_time_NTP_server",1)){f.Enable=$("date_time_NTP_enable").checked;f.Address=$("date_time_NTP_server").value;f.Port=$("date_time_NTP_port").value-0;f.UpdatePeriod=$("date_time_NTP_update_periods").value-0;f.TimeZone=y[$("date_time_time_zone").selectedIndex];
var b="";b+=$("date_time_date_format").selectedIndex==0?"yyyy-MM-dd":$("date_time_date_format").selectedIndex==2?"dd-MM-yyyy":"MM-dd-yyyy";b+=" ";b+=$("date_time_time_format").selectedIndex==0?"HH:mm:ss":"hh:mm:ss";var c,g,e,h,i,j;$("date_time_time_format").selectedIndex==1?(e=$("date_time_DST_begin_time_12_format").value=="PM"?$("date_time_DST_begin_time0").value-0==12?12:$("date_time_DST_begin_time0").value-0+12:$("date_time_DST_begin_time0").value-0==12?0:$("date_time_DST_begin_time0").value-0,
h=$("date_time_DST_end_time_12_format").value=="PM"?$("date_time_DST_end_time0").value-0==12?12:$("date_time_DST_end_time0").value-0+12:$("date_time_DST_end_time0").value-0==12?0:$("date_time_DST_end_time0").value-0):(e=$("date_time_DST_begin_time0").value-0,h=$("date_time_DST_end_time0").value-0);c=$("date_time_DST_date_begin_time_month").selectedIndex+1;i=$("date_time_DST_date_begin_time_day").selectedIndex+1;g=$("date_time_DST_date_end_time_month").selectedIndex+1;j=$("date_time_DST_date_end_time_day").selectedIndex+
1;a.DSTEnable=$("date_time_DST_enable").checked;a.TimeFormat=b;a.DSTStart.Hour=e;a.DSTStart.Minute=$("date_time_DST_begin_time1").value-0;a.DSTEnd.Hour=h;a.DSTEnd.Minute=$("date_time_DST_end_time1").value-0;$("date_time_DST_date").checked?(a.DSTStart.Month=c,a.DSTStart.Day=i,a.DSTStart.Week=0,a.DSTEnd.Month=g,a.DSTEnd.Day=j,a.DSTEnd.Week=0):(a.DSTStart.Month=$("date_time_DST_week_begin_time_month").selectedIndex+1,a.DSTStart.Day=$("date_time_DST_week_begin_time_week").value-0,a.DSTStart.Week=$("date_time_DST_week_begin_time_sort").selectedIndex+
1==$("date_time_DST_week_begin_time_sort").length?-1:$("date_time_DST_week_begin_time_sort").selectedIndex+1,a.DSTEnd.Month=$("date_time_DST_week_end_time_month").selectedIndex+1,a.DSTEnd.Day=$("date_time_DST_week_end_time_week").value-0,a.DSTEnd.Week=$("date_time_DST_week_end_time_sort").selectedIndex+1==$("date_time_DST_week_end_time_sort").length?-1:$("date_time_DST_week_end_time_sort").selectedIndex+1);$("date_time_date_format").selectedIndex==0?(a.DSTStart.Year=$("date_time_system_date0").value-
0,a.DSTEnd.Year=$("date_time_system_date0").value-0):(a.DSTStart.Year=$("date_time_system_date2").value-0,a.DSTEnd.Year=$("date_time_system_date2").value-0);var t;d.configManager.setConfig(["Locales","NTP"],[a,f],function(a){t=checkPostResult(a)},!1);e=$unlink(n.split("-"));$("date_time_date_format").selectedIndex==0?(b=$("date_time_system_date0").value-0,c=$("date_time_system_date1").value-0,g=$("date_time_system_date2").value-0):($("date_time_date_format").selectedIndex==2?(g=$("date_time_system_date0").value-
0,c=$("date_time_system_date1").value-0):(c=$("date_time_system_date0").value-0,g=$("date_time_system_date1").value-0),b=$("date_time_system_date2").value-0);k!=0&&b==e[0]-0&&c==e[1]-0&&g==e[2]-0||($("date_time_time_format").selectedIndex==1?$("date_time_system_time_12_format").value=="PM"?b=$("date_time_system_time0").value-0==12?"12":$("date_time_system_time0").value-0+12:(b=$("date_time_system_time0").value-0==12?"00":$("date_time_system_time0").value-0,b=b<10?"0"+b:b):(b=$("date_time_system_time0").value-
0,b=b<10?"0"+b:b),b=$("date_time_date_format").selectedIndex==0?$("date_time_system_date0").value+"-"+$("date_time_system_date1").value+"-"+$("date_time_system_date2").value+" "+b+":"+$("date_time_system_time1").value+":"+$("date_time_system_time2").value:$("date_time_date_format").selectedIndex==1?$("date_time_system_date2").value+"-"+$("date_time_system_date0").value+"-"+$("date_time_system_date1").value+" "+b+":"+$("date_time_system_time1").value+":"+$("date_time_system_time2").value:$("date_time_system_date2").value+
"-"+$("date_time_system_date1").value+"-"+$("date_time_system_date0").value+" "+b+":"+$("date_time_system_time1").value+":"+$("date_time_system_time2").value,d.global.setCurrentTime(b,5,function(a){a=JSON.decode(a).result;t=t&&a},!1));t?(remarkDisplay("date_time_remark",tl("Succeed in saving configure"),3E3,0),function(){d._getCurTime();d._runTime()}.delay(2E3)):remarkDisplay("date_time_remark",tl("Saving failure"),3E3,1)}else remarkDisplay("date_time_remark",tl("w_wrongNTPName"),3E3,1)},_onRefreshClick:function(){d._getConfigAndRenderElements(!0);
d._getCurTime();d._runTime()},_onDefaultClick:function(){d.configManager.getDefault(["Locales","NTP"],function(b){JSON.decode(b).result?(b=JSON.decode(b).params,a=b[0].params.table,f=b[1].params.table,d._renderElements(),remarkDisplay("date_time_remark",tl("Defaultsuccess"),3E3,0)):remarkDisplay("date_time_remark",tl("Defaultfailure"),3E3,1)},!1)},_runTime:function(){k&&(clearInterval(k),k=0);var a=$unlink(n.split("-")),c=a[0]-0,g=a[1]-0,e=a[2]-0,a=$unlink(q.split(":")),f=a[0]-0,h=a[2]-0,i=function(){d.global.getCurrentTime(function(a){if(JSON.decode(a).result)a=
JSON.decode(a).result,a=$unlink(a.split(" ")),n=a[0],q=a[1]},!1)};k=setInterval(function(){if(Site.currentPage.is.generalConfig){var a=$("date_time_system_time1").value.toInt(),b=$("date_time_system_time0").value.toInt();if(++h==60){h=0;$("date_time_system_time2").value="00";$("date_time_system_time1").value=a+1<10?"0"+(a+1):a+1;if(a==59)if($("date_time_system_time1").value="00",$("date_time_system_time0").value=b+1,$("date_time_time_format").selectedIndex==0){if(b==23)$("date_time_system_time0").value=
"00"}else if($("date_time_time_format").selectedIndex==1&&b==12)$("date_time_system_time0").value="01";i();var a=$unlink(q.split(":")),b=a[0].toInt(),d=a[1],j=a[2];h=$unlink(a[2]-0);if(f!=b)$("date_time_time_format").selectedIndex==1?(b<12?($("date_time_system_time0").value=checkTime0(b||12),$("date_time_system_time_12_format").value="AM"):($("date_time_system_time0").value=checkTime0(b-12||12),$("date_time_system_time_12_format").value="PM"),$("date_time_system_time_12_format").style.display=""):
($("date_time_system_time0").value=checkTime0(b),$("date_time_system_time_12_format").style.display="none");$("date_time_system_time1").value=d;$("date_time_system_time2").value=j;d=$unlink(n.split("-"));a=d[0];b=d[1];d=d[2];if($("date_time_date_format").selectedIndex==0){if(c!=a-0)$("date_time_system_date0").value=a;if(g!=b-0)$("date_time_system_date1").value=b;if(e!=d-0)$("date_time_system_date2").value=d}else if($("date_time_date_format").selectedIndex==1){if(g!=b-0)$("date_time_system_date0").value=
b;if(e!=d-0)$("date_time_system_date1").value=d;if(c!=a-0)$("date_time_system_date2").value=a}else if($("date_time_date_format").selectedIndex==2){if(e!=d-0)$("date_time_system_date0").value=d;if(g!=b-0)$("date_time_system_date1").value=b;if(c!=a-0)$("date_time_system_date2").value=a}}else $("date_time_system_time2").value=h<10?"0"+h:h;for(a=0;a<3;a++)document.activeElement.id=="date_time_system_time"+a&&$("date_time_system_time"+a).select()}else clearInterval(k),k=0},1E3)},_requestTime:function(){d.global.getCurrentTime(function(a){if(JSON.decode(a).result)a=
JSON.decode(a).result,a=$unlink(a.split(" ")),n=a[0],q=a[1]},!1)},_getCurTime:function(){d.global.getCurrentTime(function(a){if(JSON.decode(a).result){var c=JSON.decode(a).result,a=$unlink(c.split(" "));n=a[0];q=a[1];var c=$unlink(n.split("-")),a=c[0],d=c[1],c=c[2];$("date_time_date_format").selectedIndex==0?($("date_time_system_date0").value=a,$("date_time_system_date1").value=d,$("date_time_system_date2").value=c):($("date_time_date_format").selectedIndex==1?($("date_time_system_date0").value=d,
$("date_time_system_date1").value=c):($("date_time_system_date0").value=c,$("date_time_system_date1").value=d),$("date_time_system_date2").value=a);c=$unlink(q.split(":"));a=c[0];d=c[1];c=c[2];$("date_time_time_format").selectedIndex==1?(a-0==0?($("date_time_system_time0").value="12",$("date_time_system_time_12_format").value="AM"):a-0<12?($("date_time_system_time0").value=a,$("date_time_system_time_12_format").value="AM"):(a-0==12?$("date_time_system_time0").value="12":$("date_time_system_time0").value=
checkTime0(a-0-12),$("date_time_system_time_12_format").value="PM"),$("date_time_system_time_12_format").style.display=""):($("date_time_system_time0").value=a,$("date_time_system_time_12_format").style.display="none");$("date_time_system_time1").value=d;$("date_time_system_time2").value=c}},!1)},_changeWeek:function(a,c,d){if(a)if($(c).selectedIndex==1){a=getMonthDays(e[0].value-0,2);c=e[0].value-0-2E3-1;for(c=Math.floor(5)-40+c+Math.floor(c/4)+Math.floor(39)+1-1;c<0;)c+=7;if(a==28&&c%7==0){$(d).innerHTML=
"";a=["1st","2nd","3rd","LastWeek"];for(c=0;c<4;c++)$(d).options.add(new Option(tl(a[c])));$(d).selectedIndex=$(d).selectedIndex+1>$(d).length?3:$(d).selectedIndex}}else if($(d).length==4){$(d).innerHTML="";a=["1st","2nd","3rd","4th","LastWeek"];for(c=0;c<5;c++)$(d).options.add(new Option(tl(a[c])))}},_changeDateFormat:function(a){var c;c=s==0?[$("date_time_system_date0").value,$("date_time_system_date1").value,$("date_time_system_date2").value]:s==1?[$("date_time_system_date2").value,$("date_time_system_date0").value,
$("date_time_system_date1").value]:[$("date_time_system_date2").value,$("date_time_system_date1").value,$("date_time_system_date0").value];a==0?($("date_time_system_date0").value=c[0],$("date_time_system_date1").value=c[1],$("date_time_system_date2").value=c[2],j(),e=[$("date_time_system_date0"),$("date_time_system_date1"),$("date_time_system_date2")]):a==1?($("date_time_system_date0").value=c[1],$("date_time_system_date1").value=c[2],$("date_time_system_date2").value=c[0],j(),e=[$("date_time_system_date2"),
$("date_time_system_date0"),$("date_time_system_date1")]):($("date_time_system_date0").value=c[2],$("date_time_system_date1").value=c[1],$("date_time_system_date2").value=c[0],j(),e=[$("date_time_system_date2"),$("date_time_system_date1"),$("date_time_system_date0")]);h();s=a},_changeTimeFormat:function(a){if(a==0){u();if($("date_time_system_time_12_format").value=="AM"){if($("date_time_system_time0").value-0<=12)$("date_time_system_time0").value=$("date_time_system_time0").value-0==12?"00":$("date_time_system_time0").value}else if($("date_time_system_time0").value-
0<12)$("date_time_system_time0").value=$("date_time_system_time0").value-0+12;$("date_time_system_time_12_format").style.display="none";$("date_time_DST_begin_time_12_format").style.display="none";$("date_time_DST_end_time_12_format").style.display="none";if($("date_time_DST_begin_time_12_format").value=="AM"){if($("date_time_DST_begin_time0").value-0<=12)$("date_time_DST_begin_time0").value=$("date_time_DST_begin_time0").value-0==12?"00":$("date_time_DST_begin_time0").value}else if($("date_time_DST_begin_time0").value-
0<12)$("date_time_DST_begin_time0").value=$("date_time_DST_begin_time0").value-0+12;if($("date_time_DST_end_time_12_format").value=="AM"){if($("date_time_DST_end_time0").value-0<=12)$("date_time_DST_end_time0").value=$("date_time_DST_end_time0").value-0==12?"00":$("date_time_DST_end_time0").value}else if($("date_time_DST_end_time0").value-0<12)$("date_time_DST_end_time0").value=$("date_time_DST_end_time0").value-0+12}else{l();$("date_time_system_time_12_format").style.display="";$("date_time_DST_begin_time_12_format").style.display=
"";$("date_time_DST_end_time_12_format").style.display="";if($("date_time_system_time0").value-0<12)$("date_time_system_time0").value=$("date_time_system_time0").value-0==0?"12":$("date_time_system_time0").value,$("date_time_system_time_12_format").value="AM";else if($("date_time_system_time0").value-0>=12)$("date_time_system_time0").value=$("date_time_system_time0").value-0==12?"12":checkTime0($("date_time_system_time0").value-0-12),$("date_time_system_time_12_format").value="PM";if($("date_time_DST_begin_time0").value-
0<12)$("date_time_DST_begin_time0").value=$("date_time_DST_begin_time0").value-0==0?"12":$("date_time_DST_begin_time0").value,$("date_time_DST_begin_time_12_format").value="AM";else if($("date_time_DST_begin_time0").value-0>=12)$("date_time_DST_begin_time0").value=$("date_time_DST_begin_time0").value-0==12?"12":checkTime0($("date_time_DST_begin_time0").value-0-12),$("date_time_DST_begin_time_12_format").value="PM";if($("date_time_DST_end_time0").value-0<12)$("date_time_DST_end_time0").value=$("date_time_DST_end_time0").value-
0==0?"12":$("date_time_DST_end_time0").value,$("date_time_DST_end_time_12_format").value="AM";else if($("date_time_DST_end_time0").value-0>=12)$("date_time_DST_end_time0").value=$("date_time_DST_end_time0").value-0==12?"12":checkTime0($("date_time_DST_end_time0").value-0-12),$("date_time_DST_end_time_12_format").value="PM"}},_changeAM_PM:function(){clearTimeout(k);k=0},_showDST:function(a){a=="date_time_DST_date"?($("date_time_DST_week_begin_time_p").style.display="none",$("date_time_DST_week_end_time_p").style.display=
"none",$("date_time_DST_date_begin_time_p").style.display="",$("date_time_DST_date_end_time_p").style.display="",d._putDSTDate()):($("date_time_DST_date_begin_time_p").style.display="none",$("date_time_DST_date_end_time_p").style.display="none",$("date_time_DST_week_begin_time_p").style.display="",$("date_time_DST_week_end_time_p").style.display="",d._putDSTWeek())},_putDSTDate:function(){$("date_time_DST_date_begin_time_month").selectedIndex=a.DSTStart.Month-1;$("date_time_DST_date_end_time_month").selectedIndex=
a.DSTEnd.Month-1;a.DSTStart.Day==0?$("date_time_DST_date_begin_time_day").selectedIndex=a.DSTStart.Day:$("date_time_DST_date_begin_time_day").selectedIndex=a.DSTStart.Day-1;a.DSTEnd.Day==0?$("date_time_DST_date_end_time_day").selectedIndex=a.DSTEnd.Day:$("date_time_DST_date_end_time_day").selectedIndex=a.DSTEnd.Day-1},_putDSTWeek:function(){$("date_time_DST_week_begin_time_month").selectedIndex=a.DSTStart.Month-1;$("date_time_DST_week_end_time_month").selectedIndex=a.DSTEnd.Month-1;a.DSTStart.Week!=
0?$("date_time_DST_week_begin_time_sort").selectedIndex=a.DSTStart.Week==-1?$("date_time_DST_week_begin_time_sort").length-1:a.DSTStart.Week-1:$("date_time_DST_week_begin_time_sort").selectedIndex=0;a.DSTEnd.Week!=0?$("date_time_DST_week_end_time_sort").selectedIndex=a.DSTEnd.Week==-1?$("date_time_DST_week_end_time_sort").length-1:a.DSTEnd.Week-1:$("date_time_DST_week_end_time_sort").selectedIndex=0;d._changeWeek(!0,"date_time_DST_week_begin_time_month","date_time_DST_week_begin_time_sort","date_time_DST_week_begin_time_week");
$("date_time_DST_week_begin_time_week").value=a.DSTStart.Day.limit(0,6);d._changeWeek(!0,"date_time_DST_week_end_time_month","date_time_DST_week_end_time_sort","date_time_DST_week_end_time_week");$("date_time_DST_week_end_time_week").value=a.DSTEnd.Day.limit(0,6)},_synPCTime:function(){var a=new Date,c=a.getFullYear(),e=chk10(a.getMonth()+1),f=chk10(a.getDate()),h=chk10(a.getHours()),i=chk10(a.getMinutes()),a=chk10(a.getSeconds());s==0?($("date_time_system_date0").value=c,$("date_time_system_date1").value=
e,$("date_time_system_date2").value=f):s==1?($("date_time_system_date2").value=c,$("date_time_system_date0").value=e,$("date_time_system_date1").value=f):($("date_time_system_date2").value=c,$("date_time_system_date1").value=e,$("date_time_system_date0").value=f);d._changeDateFormat($("date_time_date_format").selectedIndex);n=c+"-"+e+"-"+f;q=h+":"+i+":"+a;d.global.setCurrentTime(n+" "+q,5,function(a){JSON.decode(a).result?(d._getCurTime(),d._runTime(),remarkDisplay("date_time_remark",tl("Succeed in saving configure"),
3E3,0)):remarkDisplay("date_time_remark",tl("Saving failure"),3E3,1)},!1)}}})();
