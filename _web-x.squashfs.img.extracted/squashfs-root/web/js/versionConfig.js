(function(){function e(){var a=new IntervideoManager;a.instance(function(c,b){b.result&&a.getVersion("Onvif",function(a,b){b.result&&$("version_onvif").set("text",b.params.Version)},!0,b.result)})}var c=Page.versionConfig={init:function(){c.magicBox=new MagicBox;c.translate();c.render();c.bind();e()},translate:function(){$("version").set("text",tl("w_Edition Info"));$("version_device_type_label").set("text",tl("w_Device Type"));$("version_software_label").set("text",tl("w_Software Version"));$("version_ptz_label").set("text",
tl("w_Ptz Version"));$("version_camera_label").set("text",tl("w_Camera Version"));$("version_web_label").set("text",tl("w_WEB Edition"));$("version_onvif_label").set("text",tl("w_onvif_version"));$("version_sn_label").set("text",tl("w_Serialnumber"));$("version_copyright").set("text",tl("w_Copyright"));$("t_cinfo").set("text","");$("version_help").set("title",tl("w_help"))},render:function(){$("version_onvif_wrap").setStyle("display",bool_GB28181?"none":"block");c._getSerialNo();c._getProductDef();
c._getSubModules()},bind:function(){$("version_help").addEvent("click",function(){openHelp("versionConfig.htm")})},_getSerialNo:function(){c.magicBox.getSerialNo(function(a){a=JSON.decode(a);a.result&&$("version_sn").setProperty("text",a.params.sn)})},_getProductDef:function(){c.magicBox.getProductDef(["MajorVersion","MinorVersion","OEMVersion","Revision","BuildDate","WebVersion","TypeVersion","VendorAbbr"],function(a){isEnable("show_Device_type")?($("version_device_type_wrap").style.display="",c.magicBox.getDeviceType(function(a,
b){b.result?$("version_device_type").setProperty("text",b.params.type):$("version_device_type_wrap").style.display="none"})):$("version_device_type_wrap").style.display="none";var d,b;if(JSON.decode(a).result)a=JSON.decode(a).params,d=a[1].params.definition,b=a[2].params.definition,a[1].params.definition<10?d="00"+a[1].params.definition:a[1].params.definition<100&&(d="0"+a[1].params.definition),a[2].params.definition<10&&(b="0"+a[2].params.definition),d=a[0].params.definition+"."+d+"."+a[7].params.definition+
b+"."+a[3].params.definition+"."+a[6].params.definition,a[4].result&&(d+=", build : "+a[4].params.definition),$("version_software").setProperty("text",d),$("version_web").setProperty("text",a[5].params.definition)})},_getSubModules:function(){currenDeviceType.contains("SD")&&c.magicBox.getSubModules(function(a){var a=JSON.decode(a),c;if(a.result){a=a.params.subModules;c=a.length;for(var b=0;b<c;b++){if("PTZ"===a[b].ModuleName&&"Unknow"!==a[b].SoftwareVersion&&""!=a[b].SoftwareVersion)$("version_ptz_wrap").style.display=
"",$("version_ptz").setProperty("text",a[b].SoftwareVersion);if("Camera"===a[b].ModuleName&&"Unknow"!==a[b].SoftwareVersion&&""!=a[b].SoftwareVersion&&"FF.FF.FF"!=a[b].SoftwareVersion)$("version_camera_wrap").style.display="",$("version_camera").setProperty("text",a[b].SoftwareVersion)}}})}}})();
